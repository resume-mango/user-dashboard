"use strict";(self.webpackChunkuser_dashboard=self.webpackChunkuser_dashboard||[]).push([[334,44],{7693:(e,r,t)=>{t.d(r,{a:()=>d,BO:()=>f,FD:()=>l,WV:()=>v,VW:()=>m,oK:()=>b});var n,a=t(1002),u=t(5861),c=t(7757),s=t.n(c),o=t(9669),i=t.n(o),p=t(3137),d=function(){var e=(0,u.Z)(s().mark((function e(r,t){var n,a,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",url:"/resume/download/".concat(r,"/").concat(t),responseType:"blob"},e.prev=1,e.next=4,i().request(a);case 4:return n=e.sent,e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0.response||!e.t0.response.data){e.next=17;break}return e.next=13,new Response(e.t0.response.data).text();case 13:if(u=e.sent,!(c=JSON.parse(u).error.message||null)||"download limits reached!"!==c){e.next=17;break}return e.abrupt("return",n="limit reached");case 17:return e.abrupt("return",n=null);case 18:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r,t){return e.apply(this,arguments)}}(),f=function(){var e=(0,u.Z)(s().mark((function e(r){var t,n,a,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",url:"/resume",data:{template:r}},e.prev=1,e.next=4,(0,p.Z)(a);case 4:return u=e.sent,t=u.data,n=u.error,e.abrupt("return",{data:t,error:n});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{data:void 0,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,u.Z)(s().mark((function e(r){var t,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"!==(0,a.Z)(n)&&n.cancel("Cancelling previous requests"),n=i().CancelToken.source(),t={method:"PATCH",url:"/resume",cancelToken:n.token,data:r},e.next=5,i().request(t).then((function(e){return{data:e.data,error:void 0}})).catch((function(e){return{data:void 0,error:e}}));case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),v=function(){var e=(0,u.Z)(s().mark((function e(r,t){var n,a,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={method:"PATCH",url:"/resume/".concat(r,"/avatar"),headers:{"Content-Type":"multipart/form-data"},data:t},e.prev=1,e.next=4,(0,p.Z)(u);case 4:return c=e.sent,n=c.data,a=c.error,e.abrupt("return",{data:n,error:a});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{data:void 0,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r,t){return e.apply(this,arguments)}}(),m=function(){var e=(0,u.Z)(s().mark((function e(r){var t,n,a,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"DELETE",url:"/resume/".concat(r,"/avatar")},e.prev=1,e.next=4,(0,p.Z)(a);case 4:return u=e.sent,t=u.data,n=u.error,e.abrupt("return",{data:t,error:n});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{data:void 0,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}(),b=function(){var e=(0,u.Z)(s().mark((function e(r){var t,n,a,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"DELETE",url:"/resume/".concat(r)},e.prev=1,e.next=4,(0,p.Z)(a);case 4:return u=e.sent,t=u.data,n=u.error,e.abrupt("return",{data:t,error:n});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{data:void 0,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}()},7782:(e,r,t)=>{t.d(r,{$C:()=>l,pu:()=>v,vp:()=>b,Ys:()=>h,k6:()=>x,WA:()=>w,Bd:()=>k,Rk:()=>g,c$:()=>y});var n=t(4942),a=t(5861),u=t(7757),c=t.n(u),s=t(9669),o=t.n(s),i=t(7693);function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a,u,s){var o,p,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n&&t.id){e.next=2;break}return e.abrupt("return");case 2:return a(!0),e.prev=3,e.next=6,(0,i.WV)(t.id,r);case 6:if(o=e.sent,p=o.data,d=o.error,!p||d){e.next=13;break}u("avatar",p.fields.avatar),e.next=14;break;case 13:throw new Error("Failed to upload image");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),s({type:"danger",heading:"Err!",message:"Failed to upload image"});case 19:return e.abrupt("return",a(!1));case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(r,t,n,a,u,c){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a,u){var s,o,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t&&r.id){e.next=2;break}return e.abrupt("return");case 2:return n(!0),e.prev=3,e.next=6,(0,i.VW)(r.id);case 6:if(s=e.sent,o=s.data,p=s.error,!o||p){e.next=13;break}a("avatar",o.fields.avatar),e.next=14;break;case 13:throw new Error("Failed to delete Image");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),u({type:"danger",heading:"Err!",message:"Failed to delete image"});case 19:return e.abrupt("return",n(!1));case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(r,t,n,a,u){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a,u,s,o,i){var p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=new FormData,e.abrupt("return",t.toBlob((function(e){m(e,p,r,n,a,u,s,o,i)}),"image/jpeg",80));case 2:case"end":return e.stop()}}),e)})));return function(r,t,n,a,u,c,s,o){return e.apply(this,arguments)}}(),m=function(e,r,t,n,a,u,c,s,o){if(e)return r.append("processed",e,"processed.jpg"),r.append("image",t),r.append("style",JSON.stringify(n)),f(r,a,u,c,s,o)},b=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a,u,s,o){var p,d,f,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(null),!n){e.next=3;break}return e.abrupt("return");case 3:return a(r),e.prev=4,e.next=7,(0,i.oK)(r);case 7:if(p=e.sent,d=p.data,f=p.error,!d||f){e.next=18;break}if(t&&t.items){e.next=13;break}return e.abrupt("return");case 13:l=t.items.filter((function(e){return e._id!==r})),t.items=l,o.setQueryData("resumes",t),e.next=19;break;case 18:throw new Error("Failed to delete resume");case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),console.log(e.t0),s({type:"danger",heading:"Err!",message:"Failed to delete resume"});case 25:return e.abrupt("return",a(null));case 26:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(r,t,n,a,u,c,s){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a,u){var s,o,p,d,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.a)(t,n);case 2:if(!(s=e.sent)){e.next=17;break}if("limit reached"!==s){e.next=6;break}return e.abrupt("return",u(!0));case 6:if(!s.data){e.next=17;break}return o=r?r.replaceAll(/\s/g,"-"):"untitled-resume",p=o+"."+n,d=window.URL.createObjectURL(new Blob([s.data])),(f=document.createElement("a")).href=d,f.setAttribute("download",p),document.body.appendChild(f),f.click(),document.body.removeChild(f),e.abrupt("return",window.URL.revokeObjectURL(d));case 17:return e.abrupt("return",a({type:"danger",heading:"Err!",message:"Failed to donwload design"}));case 18:case"end":return e.stop()}}),e)})));return function(r,t,n,a,u){return e.apply(this,arguments)}}(),x=function(e,r,t,n,a,u,c){if(a)return u(null);if(!r||0===r.length){var s=t;c(e+".0"),n(s)}return u(e)},w=function(e,r){return e(r)},k=function(e,r,t,n,a){n===e+"."+r?(t(e),a(null)):a(e+"."+r)},g=function(e,r,t,n,a){var u=t;a(e+"."+r),n(u)},y=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a,u,s,p,f,l,v){var m,b,x,w,k,g,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=!1,e.prev=1,p(!1),a){e.next=5;break}return e.abrupt("return",m);case 5:return e.next=7,(0,i.FD)(d({title:a.title,template:r,id:n._id},a));case 7:if(b=e.sent,x=b.data,w=b.error,!x||w){e.next=23;break}if(!t){e.next=15;break}return k=x.title?x.title:"",e.next=15,h(k,n._id,t,f,v);case 15:(g=l.getQueryData("resumes"))&&((y=g.findIndex((function(e){return e._id===x._id})))>=0?g.splice(y,1,x):g.unshift(x),l.setQueryData("resumes",g)),x.fields=u(),l.setQueryData(["resume",x._id],x),p(!0),s({},{keepDirty:!1,keepValues:!0,keepIsValid:!0,keepErrors:!0}),e.next=28;break;case 23:if(!o().isCancel(w)){e.next=27;break}p(!0),e.next=28;break;case 27:throw new Error("Failed to update design");case 28:m=!0,e.next=34;break;case 31:e.prev=31,e.t0=e.catch(1),f({type:"danger",heading:"Err!",message:"Failed to update design"});case 34:return e.abrupt("return",m);case 35:case"end":return e.stop()}}),e,null,[[1,31]])})));return function(r,t,n,a,u,c,s,o,i,p){return e.apply(this,arguments)}}()},8045:(e,r,t)=>{t.d(r,{Z:()=>u});var n=t(885),a=t(7294);const u=function(){var e=(0,a.useState)(!1),r=(0,n.Z)(e,2),t=r[0],u=r[1],c=(0,a.useRef)(null),s=function(e){c&&c.current&&(c.current.contains(e.target)?u(!1):u(!0))};return(0,a.useEffect)((function(){if(c&&c.current)return document.addEventListener("mousedown",s,!0),function(){document.removeEventListener("mousedown",s,!0)}}),[c.current]),{isOutside:t,ref:c}}},6044:(e,r,t)=>{t.r(r),t.d(r,{default:()=>a}),t(7294);var n=t(5893);const a=function(){return(0,n.jsx)("div",{className:"align-center",children:(0,n.jsx)("div",{children:(0,n.jsx)("h3",{className:"text-center",children:"This page could not be found"})})})}},2611:(e,r,t)=>{t.d(r,{Bh:()=>p,VN:()=>d,ZT:()=>f,IE:()=>l});var n=t(5861),a=t(7757),u=t.n(a),c=t(9669),s=t.n(c),o=t(704),i=t(3106),p=function(){return(0,o.Z)("resumeTemplates","/templates/resume")},d=function(e,r){var t=function(){var r=(0,n.Z)(u().mark((function r(){var t,n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s().get("/resume",{params:e});case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return(0,i.Z)(["resumes",e],(function(){return t()}),r)},f=function(e,r){var t=function(){var e=(0,n.Z)(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("/templates/resume/".concat(r));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,i.Z)(["resumeTemplates",e],(function(){return t(e)}),r)},l=function(e,r){var t=function(){var e=(0,n.Z)(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("/resume/".concat(r));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,i.Z)(["resume",e],(function(){return t(e)}),r)}}}]);
//# sourceMappingURL=334.bundle.js.map