"use strict";(self.webpackChunkuser_dashboard=self.webpackChunkuser_dashboard||[]).push([[922,44],{3137:(n,e,r)=>{r.d(e,{Z:()=>o});var t=r(5861),i=r(7757),s=r.n(i),a=r(9669),c=r.n(a);const o=function(){var n=(0,t.Z)(s().mark((function n(e){var r,t,i,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="",t="",n.prev=2,n.next=5,c().request(e);case 5:i=n.sent,a=i.data,r=a||"",n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),t=n.t0.response&&n.t0.response.data&&n.t0.response.data.error.message||"Something went wrong!";case 13:return n.abrupt("return",{data:r,error:t});case 14:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}()},3106:(n,e,r)=>{r.d(e,{Z:()=>o});var t=r(4942),i=r(8767),s=r(5454);function a(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,t)}return r}function c(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){(0,t.Z)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}const o=function(n,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],t=arguments.length>3?arguments[3]:void 0,a=(0,s.a)(),o=a.user,d=a.token,u=o&&o.ref;return(0,i.useQuery)(n,e,c({enabled:!!d&&!!u&&r},t))}},3434:(n,e,r)=>{r.d(e,{Z:()=>s});var t=r(7294),i=r(5977);const s=function(){var n=(0,i.TH)().search;return t.useMemo((function(){return new URLSearchParams(n)}),[n])}},6044:(n,e,r)=>{r.r(e),r.d(e,{default:()=>i}),r(7294);var t=r(5893);const i=function(){return(0,t.jsx)("div",{className:"align-center",children:(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"text-center",children:"This page could not be found"})})})}},7922:(n,e,r)=>{r.r(e),r.d(e,{default:()=>mn});var t,i,s=r(7294),a=r(5977),c=r(6044),o=r(168),d=r(5861),u=r(885),l=r(7757),p=r.n(l),h=r(8767),m=r(9163),f=r(3137),x=function(){var n=(0,d.Z)(p().mark((function n(e){var r,t,i,s;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={method:"POST",url:"/subscribe/".concat(e)},n.prev=1,n.next=4,(0,f.Z)(i);case 4:return s=n.sent,r=s.data,t=s.error,n.abrupt("return",{data:r,error:t});case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",{data:void 0,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}(),g=function(){var n=(0,d.Z)(p().mark((function n(e){var r,t,i,s;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={method:"PATCH",url:"/subscription/upgrade/".concat(e)},n.prev=1,n.next=4,(0,f.Z)(i);case 4:return s=n.sent,r=s.data,t=s.error,n.abrupt("return",{data:r,error:t});case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",{data:void 0,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}(),b=function(){var n=(0,d.Z)(p().mark((function n(e,r){var t,i,s,a;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={method:"GET",url:"/subscribe/cb?id=".concat(e,"&type=").concat(r)},n.prev=1,n.next=4,(0,f.Z)(s);case 4:return a=n.sent,t=a.data,i=a.error,n.abrupt("return",{data:t,error:i});case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",{data:void 0,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,r){return n.apply(this,arguments)}}(),v=r(5292),j=r(5454),w=r(3434),k=r(5438),y=r(3360),Z=r(5893);const P=function(){var n=(0,s.useState)(!1),e=(0,u.Z)(n,2),r=e[0],t=e[1],i=(0,j.a)().setToken,c=(0,a.k6)(),o=(0,w.Z)(),l=o.get("session_id"),m=o.get("type"),f=(0,h.useQueryClient)(),x=function(){var n=(0,d.Z)(p().mark((function n(){var e,r,s;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!l||!m){n.next=7;break}return n.next=3,b(l,m);case 3:e=n.sent,r=e.data,s=e.error,r&&!s?(f.setQueryData("activeSubscription",r),i(""),c.push("/my-account/membership")):t(!0);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,s.useEffect)((function(){"cancel"!==m&&"success"!==m||x()}),[]),(0,Z.jsx)(s.Fragment,{children:r?(0,Z.jsx)(L,{children:(0,Z.jsxs)(Q,{children:[(0,Z.jsx)(v.Z,{size:"7rem",color:"#f08438",className:"mb-2"}),(0,Z.jsx)("h1",{children:"Error!"}),(0,Z.jsx)("p",{className:"mb-2",children:" Something went wrong..."}),(0,Z.jsx)(k.z,{size:"lg",btnType:"secondary",onClick:function(){return c.push("/")},children:"Back to Dashboard"})]})}):(0,Z.jsxs)(y.u,{children:[(0,Z.jsx)(y.$j,{type:"primary",size:"2rem"}),(0,Z.jsx)(y.xg,{color:"#f08438",children:"Redirecting"})]})})};var O,z,N,_,S,E,T,C,F,D,$,B,U,A,L=m.ZP.div(t||(t=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100vh;\n"]))),Q=m.ZP.div(i||(i=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 2rem;\n  width: 400px;\n  min-height: 400px;\n  margin: auto;\n  border-radius: 6px;\n  border: 1px solid #e7e7e7;\n  h1 {\n    margin-bottom: 0;\n  }\n  p {\n    font-size: 1rem;\n    max-width: 350px;\n  }\n  button {\n    font-size: 1rem;\n    width: 200px;\n  }\n"]))),H=r(8765),M=r(9576),W=r(4108),I=r(2586),R=r(3727),q=r(9964),G=r(9245),V=r(2790),X=r(3106),Y=r(9669),J=r.n(Y);const K=function(){var n=(0,s.useState)(""),e=(0,u.Z)(n,2),r=e[0],t=e[1],i=(0,s.useState)(!1),c=(0,u.Z)(i,2),o=c[0],l=c[1],m=(0,s.useState)(!1),f=(0,u.Z)(m,2),b=f[0],v=f[1],w=(0,s.useState)(!1),k=(0,u.Z)(w,2),P=k[0],O=k[1],z=(0,s.useState)([]),N=(0,u.Z)(z,2),_=N[0],S=N[1],E=(0,G.d)().setNotify,T=(0,j.a)().setToken,C=function(){var n=(0,d.Z)(p().mark((function n(){var e,r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,J().get("/subscribe");case 2:return e=n.sent,r=e.data,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),F=(0,h.useQueryClient)(),D=(0,q.S)().width,$=(0,a.k6)(),B=(0,X.Z)("subscribe",(function(){return C()}),!0,{staleTime:0,cacheTime:0,onError:function(n){n&&n.response&&409===n.response.status&&O(!0)}}),U=B.data,A=B.isError,L=B.isLoading;(0,s.useEffect)((function(){U&&U.plans&&t(U.plans[0]._id)}),[U]),(0,s.useEffect)((function(){if(r){var n=U.plans.filter((function(n){return n._id===r}))[0];n&&S(n.highlights)}}),[r]);var Q=function(){var n=(0,d.Z)(p().mark((function n(){var e,t,i;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return l(!0),n.next=5,x(r);case 5:e=n.sent,t=e.data,i=e.error,!t||i?(E({type:"danger",heading:"Err",message:"Something went wrong!"}),l(!1)):window.location.replace(t);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,s.useEffect)((function(){if(b){var n=setTimeout((function(){$.replace("/my-account/membership")}),3e3);return function(){return clearTimeout(n)}}}),[b]);var Y=function(){var n=(0,d.Z)(p().mark((function n(){var e,t,i;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o&&!b){n.next=2;break}return n.abrupt("return");case 2:return l(!0),n.next=5,g(r);case 5:if(e=n.sent,t=e.data,i=e.error,t&&!i){n.next=13;break}E({type:"danger",heading:"Err",message:"Failed to upgrade plan!"}),l(!1),n.next=18;break;case 13:return T(""),l(!1),v(!0),F.setQueryData("activeSubscription",t),n.abrupt("return",!0);case 18:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,Z.jsx)(s.Fragment,{children:L&&!U?(0,Z.jsx)("div",{className:"align-center",children:(0,Z.jsx)(y.$j,{size:"40px",type:"primary"})}):A?(0,Z.jsx)(s.Fragment,{children:P?(0,Z.jsx)(I.Z,{show:!0,type:"warning",message:"You are already on premium membership"}):(0,Z.jsx)(I.Z,{show:!0,type:"warning",heading:"Oops",message:"Failed to fetch plans from server."})}):(0,Z.jsxs)(rn,{children:[D>1e3&&(0,Z.jsxs)(tn,{children:[(0,Z.jsx)("img",{src:H.Z,alt:"resume-mango logo",width:"200px",style:{margin:"1.5rem"}}),(0,Z.jsxs)(an,{children:[(0,Z.jsx)("h1",{children:" Upgrade your plan to unlock these features"}),(0,Z.jsxs)(cn,{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)("ul",{children:_.map((function(n,e){return(0,Z.jsxs)("li",{children:[n.bool?(0,Z.jsx)("img",{src:M.Z,alt:"check circle"}):(0,Z.jsx)(pn,{children:(0,Z.jsx)(V.Z,{size:"0.5rem"})}),n.key]},e)}))})}),(0,Z.jsx)("div",{children:(0,Z.jsx)("img",{src:W.Z,alt:"putting items in basket",width:"100%"})})]})]})]}),(0,Z.jsxs)(sn,{children:[(0,Z.jsxs)("div",{className:"rhs-section",children:[D<1e3&&(0,Z.jsx)("img",{src:H.Z,alt:"resume-mango logo",width:"200px",style:{margin:".5rem"}}),(0,Z.jsx)(R.OL,{to:"/",children:(0,Z.jsx)(hn,{children:(0,Z.jsx)(V.Z,{size:"1.3rem"})})})]}),(0,Z.jsxs)(an,{children:[D<1e3&&(0,Z.jsx)(un,{children:(0,Z.jsx)("img",{src:W.Z,alt:"putting items in basket",width:"100%"})}),(0,Z.jsx)("h3",{children:"new"===U.subscription_type?"Select Plan":"Upgrade Plan"}),null==U?void 0:U.plans.map((function(n,e){return(0,Z.jsxs)(on,{onClick:function(){return t(n._id)},children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)(dn,{checked:r===n._id}),(0,Z.jsx)("p",{children:(0,Z.jsxs)("b",{children:[n.name," Plan"]})})]}),(0,Z.jsx)("div",{children:(0,Z.jsxs)("p",{children:[(0,Z.jsxs)("b",{children:["$",n.price," "]}),"/"," ","pro"===n.type?"".concat(24*n.interval_count," Hrs"):n.interval]})})]},e)})),U.invoice&&U.invoice.data&&U.invoice.data.length>0&&(0,Z.jsxs)(en,{children:[(0,Z.jsxs)("div",{className:"item",children:[(0,Z.jsx)("p",{className:"label",children:"Description"}),(0,Z.jsx)("p",{className:"label end",children:"Amount"})]}),U.invoice.data.map((function(n,e){return(0,Z.jsxs)("div",{className:"item",children:[(0,Z.jsx)("p",{children:n.description}),(0,Z.jsxs)("p",{className:"amount ".concat(n.amount<0&&"negative"),children:["$",Math.abs(n.amount)]})]},e)})),(0,Z.jsxs)("div",{className:"item",children:[(0,Z.jsx)("p",{className:"total",children:"NEXT INVOICE"}),(0,Z.jsxs)("p",{className:"total amount ".concat(U.invoice.total<0&&"negative"),children:["$",U.invoice.total," ",U.invoice.currency&&U.invoice.currency]})]})]}),"new"===U.subscription_type?(0,Z.jsx)(ln,{disabled:o,onClick:function(){return Q()},background:"#343434",hoverBackground:"#202020",children:o?(0,Z.jsxs)(s.Fragment,{children:["Processing",(0,Z.jsx)(y.$j,{size:"1.3rem",style:{marginLeft:"1rem"}})]}):"Proceed to Checkout"}):"exists"===U.subscription_type?(0,Z.jsx)(ln,{onClick:function(){return Y()},background:b?"#26bf7b":"#343434",hoverBackground:b?"#26bf7b":"#202020",children:b?(0,Z.jsxs)(s.Fragment,{children:["Upgraded",(0,Z.jsx)(nn,{children:(0,Z.jsxs)("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52",children:[(0,Z.jsx)("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),(0,Z.jsx)("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]})})]}):o?(0,Z.jsxs)(s.Fragment,{children:["Upgrading",(0,Z.jsx)(y.$j,{size:"1.3rem",style:{marginLeft:"1rem"}})]}):"Upgrade Plan "}):null]})]})]})})};var nn=m.ZP.div(O||(O=(0,o.Z)(["\n  .checkmark {\n    width: 25px;\n    height: 25px;\n    border-radius: 50%;\n    display: block;\n    stroke-width: 4;\n    stroke: #fff;\n    stroke-miterlimit: 10;\n    box-shadow: inset 0px 0px 0px #26bf7b;\n    animation: fill 0.4s ease-in-out 0.4s forwards,\n      scale 0.3s ease-in-out 0.9s both;\n    margin-left: 1rem;\n  }\n  .checkmark__circle {\n    stroke-dasharray: 166;\n    stroke-dashoffset: 166;\n    stroke-width: 4;\n    stroke-miterlimit: 10;\n    stroke: #fff;\n    fill: #26bf7b;\n    animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;\n  }\n\n  .checkmark__check {\n    transform-origin: 50% 50%;\n    stroke-dasharray: 48;\n    stroke-dashoffset: 48;\n    animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;\n  }\n\n  @keyframes stroke {\n    100% {\n      stroke-dashoffset: 0;\n    }\n  }\n\n  @keyframes scale {\n    0%,\n    100% {\n      transform: none;\n    }\n\n    50% {\n      transform: scale3d(1.1, 1.1, 1);\n    }\n  }\n\n  @keyframes fill {\n    100% {\n      box-shadow: inset 0px 0px 0px 30px #4bb71b;\n    }\n  }\n"]))),en=m.ZP.div(z||(z=(0,o.Z)(["\n  border-radius: 7px;\n  box-shadow: 5px 5px 10px 5px rgb(237 237 237 / 50%);\n  border: 1px solid rgb(237 237 237 / 40%);\n  padding: 1rem;\n  .item {\n    display: grid;\n    grid-template-columns: 80% 20%;\n    width: 100%;\n    &:not(:last-child) {\n      border-bottom: 1px solid #eee;\n    }\n    p {\n      font-size: 0.8rem;\n    }\n    .end {\n      text-align: end;\n    }\n    .label {\n      font-weight: 600;\n      font-size: 0.7rem;\n      text-transform: uppercase;\n    }\n\n    .amount {\n      font-weight: 600;\n      text-align: end;\n\n      color: #888;\n\n      letter-spacing: 1.5px;\n    }\n    .negative:before {\n      content: '-';\n    }\n    .total {\n      font-weight: 600;\n      color: #343434;\n    }\n  }\n"]))),rn=m.ZP.main(N||(N=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: 60% 40%;\n  width: 100%;\n  height: 100%;\n"]))),tn=m.ZP.div(_||(_=(0,o.Z)(["\n  height: 100%;\n  background-color: #f7f7f7;\n"]))),sn=m.ZP.div(S||(S=(0,o.Z)(["\n  height: 100%;\n  .rhs-section {\n    padding-bottom: 2rem;\n    &:first-child {\n      display: flex;\n      justify-content: flex-end;\n    }\n  }\n  @media (max-width: 1000px) {\n    width: 100%;\n    .rhs-section {\n      &:first-child {\n        justify-content: space-between;\n        align-items: center;\n      }\n    }\n  }\n"]))),an=m.ZP.div(E||(E=(0,o.Z)(["\n  padding-bottom: 4rem;\n  width: 80%;\n  margin: auto;\n  h1 {\n    max-width: 567px;\n  }\n  h2 {\n    font-size: 1.5rem;\n  }\n  h1,\n  h2 {\n    margin-bottom: 2rem;\n  }\n  @media (max-width: 1000px) {\n    width: 95%;\n    h2 {\n      font-size: 1.2rem;\n    }\n  }\n"]))),cn=m.ZP.div(T||(T=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  max-width: 800px;\n\n  ul {\n    margin-bottom: 2.3rem;\n    li {\n      display: flex;\n      font-size: 1rem;\n      padding: 0.5rem 0;\n      img {\n        margin-right: 15px;\n      }\n    }\n  }\n"]))),on=m.ZP.div(C||(C=(0,o.Z)(["\n  user-select: none;\n  width: 100%;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 7px;\n  box-shadow: 5px 5px 10px 5px rgb(237 237 237 / 50%);\n  border: 1px solid rgb(237 237 237 / 40%);\n  padding: 1.5rem;\n  cursor: pointer;\n  margin-bottom: 1.5rem;\n  div {\n    display: flex;\n    align-items: center;\n  }\n  p {\n    text-transform: capitalize;\n    margin: 0;\n  }\n"]))),dn=m.ZP.div(F||(F=(0,o.Z)(["\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  margin-right: 1.5rem;\n  border: 3px solid #fff;\n  outline: 2px solid\n    ",";\n  background-color: ",";\n"])),(function(n){return n.checked?"rgba(240, 132, 56, 1)":"#ddd"}),(function(n){return n.checked?"rgba(240, 132, 56, 1)":"#fff"})),un=(m.ZP.div(D||(D=(0,o.Z)(["\n  width: 100%;\n  height: 50px;\n  margin-top: 1rem;\n"]))),m.ZP.div($||($=(0,o.Z)(["\n  max-width: 480px;\n  padding: 2rem;\n  margin: auto;\n"])))),ln=m.ZP.button(B||(B=(0,o.Z)(["\n  width: 100%;\n  height: 50px;\n  margin-top: 1.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  color: #fff;\n  border-radius: 6px;\n  font-size: 1rem;\n  &:disabled {\n    background-color: ",";\n    opacity: 0.5;\n  }\n  &:hover {\n    background-color: ",";\n  }\n  img {\n    height: auto;\n    width: 70px;\n  }\n"])),(function(n){return n.background}),(function(n){return n.background}),(function(n){return n.hoverBackground})),pn=m.ZP.span(U||(U=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 18px;\n  height: 18px;\n  background-color: ",";\n  border-radius: 50%;\n  margin-right: 15px;\n  svg {\n    path {\n      stroke: ",";\n    }\n  }\n"])),(function(n){return n.theme.shades.danger}),(function(n){return n.theme.colors.danger})),hn=m.ZP.div(A||(A=(0,o.Z)(["\n  width: 30px;\n  height: 30px;\n  margin: 1.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    svg {\n      path {\n        stroke: ",";\n      }\n    }\n  }\n"])),(function(n){return n.theme.colors.primary}));const mn=function(){var n=(0,a.$B)().path;return(0,Z.jsx)(s.Fragment,{children:(0,Z.jsxs)(a.rs,{children:[(0,Z.jsx)(a.AW,{exact:!0,path:n,component:K}),(0,Z.jsx)(a.AW,{path:"".concat(n,"/callback"),component:P}),(0,Z.jsx)(a.AW,{component:c.default})]})})}},8765:(n,e,r)=>{r.d(e,{Z:()=>t});const t=r.p+"images/resume-mango-full-logo.png"}}]);
//# sourceMappingURL=922.bundle.js.map