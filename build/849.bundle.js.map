{"version":3,"file":"849.bundle.js","mappings":"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","sources":["webpack://user-dashboard/./src/components/ui/dashPageHeader.tsx","webpack://user-dashboard/./src/hooks/detectOutsideClick.ts","webpack://user-dashboard/./src/hooks/getUrlParams.ts","webpack://user-dashboard/./src/components/svgs/smile.tsx","webpack://user-dashboard/./src/components/svgs/attachment.tsx","webpack://user-dashboard/./src/pages/resume-review/UploadScreen.tsx","webpack://user-dashboard/./src/components/svgs/image.tsx","webpack://user-dashboard/./src/components/svgs/files.tsx","webpack://user-dashboard/./src/components/ui/CircularProgress.tsx","webpack://user-dashboard/./src/components/svgs/play.tsx","webpack://user-dashboard/./src/components/svgs/retry.tsx","webpack://user-dashboard/./src/pages/resume-review/AttachementUpload.tsx","webpack://user-dashboard/./src/pages/resume-review/MessageBox.tsx","webpack://user-dashboard/./src/pages/resume-review/reviewSidebar.tsx","webpack://user-dashboard/./src/pages/resume-review/viewResume.tsx","webpack://user-dashboard/./src/pages/resume-review/AttachmentDownload.tsx","webpack://user-dashboard/./src/pages/resume-review/ReviewChat.tsx","webpack://user-dashboard/./src/queries/chatQueries.ts","webpack://user-dashboard/./src/queries/resumeQueries.ts"],"sourcesContent":["import React, { Fragment, ReactElement, ReactNode } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { useAuth } from '../../contexts/authProvider'\nimport { useViewport } from '../../contexts/viewPort'\nimport { Button } from '../../styled/button'\n\ninterface ILayout {\n  name?: string\n  title: string | ReactElement<any, any>\n  customBtns?: boolean\n  children?: ReactNode\n}\n\nconst DashPageHeader: React.FC<ILayout> = ({\n  name,\n  title,\n  children,\n  customBtns,\n}) => {\n  const { user } = useAuth()\n  const history = useHistory()\n  const { width } = useViewport()\n\n  return (\n    <Fragment>\n      <Header>\n        <div>\n          {name && <p>{name}</p>}\n          <h1>{title}</h1>\n        </div>\n        {width > 800 && (\n          <div>\n            {!customBtns ? (\n              <Fragment>\n                {user &&\n                user.role &&\n                Array.isArray(user.role) &&\n                user.role.includes('ceo') ? (\n                  <Button\n                    onClick={() => history.push('/resumes/new')}\n                    btnType=\"primary\"\n                    size=\"sm\"\n                  >\n                    Create Resume\n                  </Button>\n                ) : (\n                  <Button\n                    onClick={() => history.push('/subscribe')}\n                    btnType=\"primary\"\n                    size=\"sm\"\n                  >\n                    Upgrade\n                  </Button>\n                )}\n\n                <Button\n                  onClick={() => history.push('/progress-tracker')}\n                  btnType=\"ghost\"\n                  size=\"sm\"\n                >\n                  Tracker\n                </Button>\n              </Fragment>\n            ) : (\n              children\n            )}\n          </div>\n        )}\n      </Header>\n    </Fragment>\n  )\n}\n\nexport default DashPageHeader\n\nconst Header = styled.header`\n  min-height: 175px;\n  max-height: 175px;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  border-bottom: 1px solid #e2e9f3;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  h1 {\n    margin-bottom: 0;\n    span {\n      font-weight: normal;\n    }\n  }\n  div:last-child {\n    display: flex;\n    button {\n      margin: 0 1rem;\n    }\n  }\n  @media (max-width: 768px) {\n    div:last-child {\n      flex-direction: column;\n    }\n  }\n  @media (max-width: 480px) {\n    max-height: 100px;\n    min-height: 100px;\n    h1 {\n      margin: 0;\n    }\n    div:last-child {\n      display: block;\n      width: 100%;\n    }\n  }\n`\n","import { useEffect, useRef, useState } from 'react'\n\n/**\n * Detects if user clicks outside element boundary, tweaked for multiple elements in same list\n * @returns ref object of selected element\n */\nconst detectOutsideClick = () => {\n  const [isOutside, setIsOutside] = useState(false)\n  const ref = useRef<any>(null)\n\n  const handleClickOutside = (e: any) => {\n    if (!ref || !ref.current) return\n    if (!ref.current.contains(e.target)) {\n      setIsOutside(true)\n    } else {\n      setIsOutside(false)\n    }\n  }\n\n  useEffect(() => {\n    if (!ref || !ref.current) return\n    document.addEventListener('mousedown', handleClickOutside, true)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside, true)\n    }\n  }, [ref.current])\n\n  return { isOutside, ref }\n}\n\nexport default detectOutsideClick\n","/* istanbul ignore file */\n\nimport React from 'react'\nimport { useLocation } from 'react-router-dom'\n/**\n * decode parameters form url\n * @returns memoized URLSearchParams\n */\nconst getUrlParams = () => {\n  const { search } = useLocation()\n\n  return React.useMemo(() => new URLSearchParams(search), [search])\n}\n\nexport default getUrlParams\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst SmileIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        viewBox=\"0 0 512 512\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M256 352C293.2 352 319.2 334.5 334.4 318.1C343.3 308.4 358.5 307.7 368.3 316.7C378 325.7 378.6 340.9 369.6 350.6C347.7 374.5 309.7 400 256 400C202.3 400 164.3 374.5 142.4 350.6C133.4 340.9 133.1 325.7 143.7 316.7C153.5 307.7 168.7 308.4 177.6 318.1C192.8 334.5 218.8 352 256 352zM208.4 208C208.4 225.7 194 240 176.4 240C158.7 240 144.4 225.7 144.4 208C144.4 190.3 158.7 176 176.4 176C194 176 208.4 190.3 208.4 208zM304.4 208C304.4 190.3 318.7 176 336.4 176C354 176 368.4 190.3 368.4 208C368.4 225.7 354 240 336.4 240C318.7 240 304.4 225.7 304.4 208zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default SmileIcon\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst AttachmentIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        viewBox=\"0 0 512 512\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M396.2 83.8c-24.4-24.4-64-24.4-88.4 0l-184 184c-42.1 42.1-42.1 110.3 0 152.4s110.3 42.1 152.4 0l152-152c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-152 152c-64 64-167.6 64-231.6 0s-64-167.6 0-231.6l184-184c46.3-46.3 121.3-46.3 167.6 0s46.3 121.3 0 167.6l-176 176c-28.6 28.6-75 28.6-103.6 0s-28.6-75 0-103.6l144-144c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-144 144c-6.7 6.7-6.7 17.7 0 24.4s17.7 6.7 24.4 0l176-176c24.4-24.4 24.4-64 0-88.4z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default AttachmentIcon\n","import React, { Fragment, useCallback } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport styled from 'styled-components'\nimport { Button } from '../../styled/button'\nimport CrossIcon from '../../components/svgs/cross'\nimport { useNotify } from '../../contexts/notify'\n\ninterface IProps {\n  setFiles: (val: any) => void\n  setShow: (val: boolean) => void\n  type: 'image' | 'attachment'\n}\n\nconst UploadScreen: React.FC<IProps> = ({ setFiles, setShow, type }) => {\n  const { setNotify } = useNotify()\n  const onDrop = useCallback(async (acceptedFiles) => {\n    try {\n      setFiles(acceptedFiles)\n      return setShow(false)\n    } catch (err) {\n      console.log(err)\n      return\n    }\n  }, [])\n\n  const onDropRejected = useCallback(async (rejectedFiles) => {\n    try {\n      if (!rejectedFiles || rejectedFiles.length === 0) return\n      return rejectedFiles.forEach((item: Record<string, any>) =>\n        setNotify({\n          type: 'warning',\n          message: item.file.name,\n          heading: item.errors[0].message,\n        })\n      )\n    } catch (err) {\n      console.log(err)\n      return\n    }\n  }, [])\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    accept:\n      type === 'image'\n        ? ['image/png', 'image/jpg', 'image/jpeg', 'image/webp']\n        : type === 'attachment'\n        ? [\n            'video/mp4',\n            'video/webm',\n            'application/msword',\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n            'application/pdf',\n            'text/plain',\n          ]\n        : '',\n    maxFiles: 10,\n    maxSize: 100 * 1024 * 1024,\n    onDrop,\n    onDropRejected,\n  })\n\n  return (\n    <Fragment>\n      <Wrapper>\n        <CloseBtn onClick={() => setShow(false)}>\n          <CrossIcon size=\"1.2rem\" />\n        </CloseBtn>\n\n        <DropWrapper {...getRootProps()}>\n          <input {...getInputProps()} />\n          {isDragActive ? (\n            <p>Drop the files here ...</p>\n          ) : (\n            <Fragment>\n              <p className=\"mb-2\">\n                Drag &apos;n&apos; drop here, or click to select image\n              </p>\n              <Button type=\"button\" btnType=\"primary\" size=\"lg\">\n                Choose File\n              </Button>\n            </Fragment>\n          )}\n        </DropWrapper>\n      </Wrapper>\n    </Fragment>\n  )\n}\n\nexport default UploadScreen\n\nconst Wrapper = styled.div`\n  max-height: 400px;\n  max-width: 850px;\n  height: 100%;\n  width: 100%;\n  padding: 5rem 4rem;\n  background-color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n`\n\nconst DropWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  margin: 0;\n  align-items: center;\n  justify-content: center;\n  background-image: url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='%23ACACACFF' stroke-width='2' stroke-dasharray='5%2c 8' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\");\n  opacity: 0.8;\n  transition: opacity 200ms;\n  cursor: pointer;\n  p {\n    font-size: 1.25rem;\n  }\n  &:hover {\n    opacity: 1;\n  }\n`\nconst CloseBtn = styled.span`\n  display: inline-flex;\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  padding: 1rem;\n  z-index: 1;\n  cursor: pointer;\n\n  &:hover {\n    svg {\n      path {\n        stroke: ${({ theme }) => theme.colors.primary};\n      }\n    }\n  }\n`\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst ImageIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        viewBox=\"0 0 512 512\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M152 120c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48S178.5 120 152 120zM447.1 32h-384C28.65 32-.0091 60.65-.0091 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96C511.1 60.65 483.3 32 447.1 32zM463.1 409.3l-136.8-185.9C323.8 218.8 318.1 216 312 216c-6.113 0-11.82 2.768-15.21 7.379l-106.6 144.1l-37.09-46.1c-3.441-4.279-8.934-6.809-14.77-6.809c-5.842 0-11.33 2.529-14.78 6.809l-75.52 93.81c0-.0293 0 .0293 0 0L47.99 96c0-8.822 7.178-16 16-16h384c8.822 0 16 7.178 16 16V409.3z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default ImageIcon\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst FileIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 384 512\"\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        fill=\"none\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default FileIcon\n","import React, { Fragment, useState, useEffect } from 'react'\nimport styled, { keyframes } from 'styled-components'\n\ninterface ICircularProgress {\n  size?: number\n  progress?: number\n  trackWidth?: number\n  trackColor?: string\n  indicatorWidth?: number\n  indicatorColor?: string\n  indicatorCap?: 'inherit' | 'round' | 'butt' | 'square' | undefined\n  spinnerMode?: boolean\n  spinnerSpeed?: number\n}\nconst CircularProgress = (props: ICircularProgress) => {\n  const {\n    size = 30,\n    progress = 0,\n    trackWidth = 3,\n    trackColor = `#eee`,\n    indicatorWidth = 3,\n    indicatorColor = `rgba(240, 132, 56, 1)`,\n    indicatorCap = `round`,\n    spinnerMode = false,\n    spinnerSpeed = 1,\n  } = props\n\n  const center = size / 2,\n    radius =\n      center - (trackWidth > indicatorWidth ? trackWidth : indicatorWidth),\n    dashArray = 2 * Math.PI * radius,\n    dashOffset = dashArray * ((100 - progress) / 100)\n\n  return (\n    <Fragment>\n      <CircleIcon style={{ width: size, height: size }}>\n        <circle\n          className={`track ${spinnerMode ? 'spinner' : ''}`}\n          cx={center}\n          cy={center}\n          fill=\"transparent\"\n          r={radius}\n          stroke={trackColor}\n          strokeWidth={trackWidth}\n        />\n        <circle\n          className={`indicator ${spinnerMode ? 'indicator-spinner' : ''}`}\n          style={{ animationDuration: (spinnerSpeed * 1000).toString() }}\n          cx={center}\n          cy={center}\n          fill=\"transparent\"\n          r={radius}\n          stroke={indicatorColor}\n          strokeWidth={indicatorWidth}\n          strokeDasharray={dashArray}\n          strokeDashoffset={dashOffset}\n          strokeLinecap={indicatorCap}\n        />\n      </CircleIcon>\n    </Fragment>\n  )\n}\n\nexport default CircularProgress\n\nconst Spinner = keyframes`\n\n  0% {\n    transform: rotate(0)\n  }\n  100% {\n    transform: rotate(360deg)\n  }\n\n`\n\nconst CircleIcon = styled.svg`\n  transform: rotate(-90deg);\n  .indicator-spinner {\n    animation: ${Spinner} 1000ms linear infinite;\n    transform-origin: center;\n  }\n`\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst PlayIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 384 512\"\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        fill=\"none\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default PlayIcon\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst RetryIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        height={size || '1rem'}\n        className={className || ''}\n        viewBox=\"0 0 512 512\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z\"\n        />\n        <path\n          fill={color || '#898989'}\n          d=\"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default RetryIcon\n","import axios from 'axios'\nimport React, { Fragment, useEffect, useRef, useState } from 'react'\nimport styled from 'styled-components'\nimport CrossIcon from '../../components/svgs/cross'\nimport FileIcon from '../../components/svgs/files'\nimport CircularProgress from '../../components/ui/CircularProgress'\nimport PlayIcon from '../../components/svgs/play'\nimport RetryIcon from '../../components/svgs/retry'\n\nconst AttachementUpload = ({\n  file,\n  onSuccess,\n  handeRemoveFile,\n  onDone,\n  index,\n}: {\n  file: File\n  index: number\n  onSuccess: (_file: Record<string, any>, index: number) => void\n  onDone: () => void\n  handeRemoveFile: (index: number, isUploaded: boolean) => void\n}) => {\n  const [progress, setProgress] = useState(0)\n  const [done, setDone] = useState(false)\n  const [error, setError] = useState(false)\n\n  const cancelToken = useRef<any>()\n\n  useEffect(() => {\n    cancelToken.current = axios.CancelToken.source()\n  }, [])\n\n  const uploadFile = async () => {\n    if (!file) return setError(true)\n    setError(false)\n    const formData = new FormData()\n    formData.append('chat-attachments', file)\n\n    await axios\n      .post('/chat/attachments', formData, {\n        cancelToken: cancelToken.current.token,\n        onUploadProgress: (progressEvent) => {\n          const percentage = Math.round(\n            (progressEvent.loaded * 100) / progressEvent.total\n          ) as any\n\n          setProgress(percentage)\n        },\n      })\n      .then((req) => req && req.data && onSuccess(req.data, index))\n      .catch((err) => {\n        if (axios.isCancel(err)) return\n        setError(true)\n      })\n      .finally(() => {\n        onDone()\n        setDone(true)\n      })\n  }\n\n  const removeFile = () => {\n    if (!done && cancelToken.current) {\n      cancelToken.current.cancel('Cancelling previous requests')\n    }\n\n    handeRemoveFile(index, done && !error)\n  }\n\n  useEffect(() => {\n    uploadFile()\n    return\n  }, [])\n\n  return (\n    <Fragment>\n      {error && <Alert>Failed to upload!</Alert>}\n      <StyledFile>\n        <span className=\"icon\">\n          {error ? (\n            <a onClick={() => uploadFile()}>\n              <RetryIcon size=\"1.2rem\" />\n            </a>\n          ) : progress !== 100 ? (\n            <CircularProgress progress={progress} />\n          ) : !done ? (\n            <CircularProgress progress={30} spinnerMode={true} />\n          ) : file.type &&\n            ['video', 'audio'].indexOf(file.type.split('/')[0]) !== -1 ? (\n            <PlayIcon size=\"1.2rem\" />\n          ) : (\n            <FileIcon size=\"1.2rem\" />\n          )}\n        </span>\n        <p className=\"truncate\">{file.name}</p>\n        <span className=\"remove\" onClick={() => removeFile()}>\n          <CrossIcon size=\"0.8rem\" />\n        </span>\n      </StyledFile>\n    </Fragment>\n  )\n}\n\nexport default AttachementUpload\n\nconst Alert = styled.p`\n  margin: 0 0.5rem;\n  font-size: 0.7rem;\n  color: red;\n  line-height: 1;\n`\nconst StyledFile = styled.div`\n  width: 300px;\n  height: 40px;\n  display: grid;\n  grid-template-columns: 40px auto 30px;\n  border: 1px solid rgba(52, 52, 52, 0.2);\n  border-radius: 6px;\n  margin: 0.5rem;\n  overflow: hidden;\n  align-items: center;\n  .icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 6px;\n    background-color: rgba(52, 52, 52, 0.2);\n    height: 100%;\n  }\n  .remove {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n  a {\n    height: fit-content;\n    line-height: 1;\n  }\n  p {\n    margin: 0 0.7rem;\n    font-size: 0.8rem;\n  }\n`\n","import React, { Fragment, useEffect, useRef, useState } from 'react'\nimport ReactDOMServer from 'react-dom/server'\nimport { FormProvider, useFieldArray, useForm } from 'react-hook-form'\nimport RichTextEditor from '../../components/form/RichTextEditor'\nimport { Quill } from 'react-quill'\nimport EmojiPicker, {\n  EmojiStyle,\n  EmojiClickData,\n  Emoji,\n} from 'emoji-picker-react'\nimport styled from 'styled-components'\nimport detectOutsideClick from '../../hooks/detectOutsideClick'\nimport SmileIcon from '../../components/svgs/smile'\nimport AttachmentIcon from '../../components/svgs/attachment'\nimport UploadScreen from './UploadScreen'\nimport ImageIcon from '../../components/svgs/image'\nimport { Button } from '../../styled/button'\nimport { useMutation, useQueryClient } from 'react-query'\nimport { useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport { useNotify } from '../../contexts/notify'\nimport { LoadingDots, Spinner } from '../../styled/loader'\nimport AttachementUpload from './AttachementUpload'\n\ninterface IMessage {\n  message: string\n  attachments: Array<{\n    _id: string\n    name: string\n    path: string\n    type: string\n  }>\n}\ninterface IMessageBox {\n  ticket: string\n  resumeId: string\n  className?: string\n  style: React.CSSProperties\n  isFetchingMessage: boolean\n}\n\nconst Embed = Quill.import('blots/embed')\n\nconst emojiHTML = (value: string) =>\n  ReactDOMServer.renderToString(<Emoji unified={value} size={20} />)\n\nclass EmojiBolt extends Embed {\n  static create(value: string) {\n    const node = super.create()\n    node.title = value\n    node.classList.add('composer-emoji')\n    node.innerHTML = emojiHTML(value)\n    return node\n  }\n}\nEmojiBolt.blotName = 'emojiEmbed'\nEmojiBolt.tagName = 'span'\n\nQuill.register(EmojiBolt)\n\nconst formats = ['bold', 'italic', 'link', 'emojiEmbed']\n\nconst MessageBox = ({\n  ticket,\n  resumeId,\n  className,\n  style,\n  isFetchingMessage,\n}: IMessageBox) => {\n  const history = useHistory()\n  const { setNotify } = useNotify()\n  const defaultValues = {\n    message: '',\n    attachments: [],\n  }\n  const { isOutside, ref } = detectOutsideClick()\n  const quillRef = useRef<any>()\n  const [show, setShow] = useState<'emoji' | 'attachment' | 'image' | null>(\n    null\n  )\n  const [showDropzone, setShowDropzone] = useState(false)\n  const [files, setFiles] = useState<Array<any>>([])\n  const [filesInProgress, setFilesInProgress] = useState(0)\n  const [filesToRemove, setFilesToRemove] = useState<Array<string>>([])\n  const queryClient = useQueryClient()\n\n  const methods = useForm<IMessage>({\n    mode: 'onBlur',\n    defaultValues,\n  })\n\n  const {\n    handleSubmit,\n    watch,\n    reset,\n    control,\n    formState: { isSubmitting },\n  } = methods\n\n  const { append, remove } = useFieldArray({\n    control,\n    name: 'attachments',\n  })\n\n  const message = watch('message')\n  const attachments = watch('attachments')\n\n  const regex = /(<([^>]+)>)/gi\n  const hasMessage = !!message.replace(regex, '').length\n\n  const handleCache = (data: Record<string, any>) => {\n    let chats = queryClient.getQueryData(['chats', data.ticketId]) as any\n    if (!chats) {\n      chats = {\n        pages: [{ total: 1, limit: 15, page: 0, items: [data] }],\n        pageParams: [undefined],\n      }\n    } else {\n      chats.pages[0].items.unshift(data)\n    }\n    queryClient.setQueryData(['chats', data.ticketId], chats)\n\n    if (data.ticketId && ticket === 'new') {\n      history.replace({\n        pathname: `/resume-review/${data.ticketId}`,\n        search: `?ref=${resumeId}`,\n      })\n    }\n    return\n  }\n\n  const sendMessage = useMutation((reqData) => axios.post('/chat', reqData), {\n    onSuccess: ({ data }: any) => {\n      if (!data) return\n      handleCache(data)\n      setFiles([])\n      return reset()\n    },\n    onError: (err: any) => {\n      if (\n        err &&\n        err.response &&\n        err.response.data &&\n        err.response.data.error &&\n        err.response.data.error.status === 400 &&\n        err.response.data.error.message === 'Ticket has been closed!'\n      ) {\n        queryClient.setQueryData(['reviewTicket', ticket], (queryData: any) => {\n          return { ...queryData, status: 'closed' }\n        })\n      }\n      setNotify({\n        type: 'danger',\n        heading: 'Err!',\n        message: 'Failed to send message',\n      })\n    },\n    // onSettled: () => {},\n  })\n\n  const onSubmit = async (data: any) => {\n    if (data.message && hasMessage) {\n      const dummy = document.createElement('div')\n      dummy.innerHTML = data.message\n      const emojis = dummy.querySelectorAll('span.composer-emoji') as any\n      if (emojis && emojis.length > 0) {\n        emojis.forEach((item: HTMLElement) => {\n          item.innerText = item.title\n        })\n      }\n\n      const regex = new RegExp('<p><br></p>', 'g')\n      data.message = dummy.innerHTML.replace(regex, '')\n    } else {\n      data.message = ''\n    }\n\n    return sendMessage.mutate({\n      ...data,\n      ticketId: ticket,\n      resumeId,\n    })\n  }\n  const insertEmoji = async (emojiData: EmojiClickData, _event: MouseEvent) => {\n    setShow(null)\n    if (!quillRef) return\n    const editor = quillRef.current.editor\n    if (!editor) return\n    const selection = await editor.getSelection()\n    if (!selection)\n      return await editor.insertEmbed(0, 'emojiEmbed', emojiData.unified)\n    const cursorPosition = selection.index\n    await editor.insertEmbed(cursorPosition, 'emojiEmbed', emojiData.unified)\n    await editor.setSelection(cursorPosition + 1)\n  }\n\n  const apiDeleteFiles = async (ids: string[]) => {\n    if (ids.length === 0) return\n    const options = {\n      method: 'DELETE',\n      url: `/chat/attachments`,\n      data: { ids },\n    }\n    await axios.request(options as any).catch((_err) => {\n      setNotify({\n        type: 'danger',\n        heading: 'Err!',\n        message: 'Failed to delete file(s)',\n      })\n    })\n  }\n\n  useEffect(() => {\n    if (!isOutside) return\n    setShow(null)\n  }, [isOutside])\n\n  useEffect(() => {\n    if (filesToRemove.length === 0) return\n    const timer = setTimeout(() => {\n      apiDeleteFiles(filesToRemove)\n      setFilesToRemove([])\n    }, 2000)\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [filesToRemove])\n\n  const handleFileDrop = (droppedFiles: File[]) => {\n    setFilesInProgress((prev) => prev + droppedFiles.length)\n    setFiles((prev) => [...prev, ...droppedFiles])\n  }\n\n  const handleFileSuccess = (file: Record<string, any>, _fileIndex: number) => {\n    append(file)\n  }\n\n  const handleRemoveFile = (fileIndex: number, isUploaded: boolean) => {\n    const index = attachments.findIndex(\n      (item) => item.name === files[fileIndex].name\n    )\n    if (isUploaded && index !== -1) {\n      setFilesToRemove((prev) => [...prev, attachments[index]._id])\n      remove(index)\n    }\n    const newFiles = [...files]\n    newFiles.splice(fileIndex, 1)\n    setFiles(newFiles)\n  }\n\n  const handleFileDone = () => {\n    setFilesInProgress((prev) => {\n      if (prev === 0) return 0\n      return prev - 1\n    })\n  }\n  const handleDropzone = (type: 'attachment' | 'image') => {\n    setShow(type)\n    setShowDropzone(true)\n  }\n\n  return (\n    <Fragment>\n      <FormProvider {...methods}>\n        <Wrapper\n          id=\"message-box\"\n          className={className}\n          hasFiles={files && files.length > 0}\n          style={style}\n        >\n          <div id=\"toolbar\">\n            <div\n              className={`${show === 'emoji' ? 'preview-emoji' : ''} emoji`}\n              ref={ref}\n            >\n              <button\n                className=\"insertEmoji toolbar-btn\"\n                onClick={() => setShow(show === 'emoji' ? null : 'emoji')}\n              >\n                <SmileIcon size=\"18px\" color=\"rgba(52, 52, 52, 0.4)\" />\n              </button>\n              <div className=\"emojipicker\">\n                <EmojiPicker\n                  onEmojiClick={insertEmoji}\n                  autoFocusSearch={false}\n                  lazyLoadEmojis={true}\n                  previewConfig={{\n                    showPreview: false,\n                  }}\n                  emojiStyle={EmojiStyle.GOOGLE}\n                  emojiVersion=\"0.6\"\n                  skinTonesDisabled\n                />\n              </div>\n            </div>\n            <button\n              className=\"insertImage toolbar-btn\"\n              onClick={() => handleDropzone('image')}\n            >\n              <ImageIcon size=\"18px\" color=\"rgba(52, 52, 52, 0.4)\" />\n            </button>\n            <button\n              className=\"insertDocument toolbar-btn\"\n              onClick={() => handleDropzone('attachment')}\n            >\n              <AttachmentIcon size=\"18px\" color=\"rgba(52, 52, 52, 0.4)\" />\n            </button>\n            <button className=\"ql-bold toolbar-btn\" />\n            <button className=\"ql-italic toolbar-btn\" />\n            <div className=\"fetch-indicator\">\n              {isFetchingMessage && (\n                <Fragment>\n                  <Spinner size=\"1rem\" type=\"primary\" />\n                  <LoadingDots color=\"rgba(240, 132, 56, 1)\">\n                    Checking\n                  </LoadingDots>\n                </Fragment>\n              )}\n            </div>\n          </div>\n\n          {showDropzone && (\n            <DropWrapper>\n              <UploadScreen\n                setShow={setShowDropzone}\n                setFiles={handleFileDrop}\n                type={show === 'image' ? 'image' : 'attachment'}\n              />\n            </DropWrapper>\n          )}\n          <div className=\"message-box\">\n            <RichTextEditor\n              ref={quillRef}\n              placeholder={'Type text here...'}\n              name=\"message\"\n              formats={formats}\n              modules={{\n                toolbar: {\n                  container: '#toolbar',\n                },\n                clipboard: {\n                  matchVisual: false,\n                },\n              }}\n            />\n\n            {files.map((file, i) => (\n              <AttachementUpload\n                key={i}\n                file={file}\n                index={i}\n                onSuccess={handleFileSuccess}\n                onDone={handleFileDone}\n                handeRemoveFile={handleRemoveFile}\n              />\n            ))}\n            <Button\n              className=\"send-btn\"\n              disabled={\n                isSubmitting ||\n                filesInProgress > 0 ||\n                (!hasMessage && attachments.length === 0)\n              }\n              onClick={handleSubmit(onSubmit)}\n            >\n              {isSubmitting ? <Spinner size=\"1rem\" type=\"primary\" /> : 'Send'}\n            </Button>\n          </div>\n        </Wrapper>\n      </FormProvider>\n    </Fragment>\n  )\n}\n\nexport default MessageBox\n\nconst Wrapper = styled.div<{ hasFiles: boolean }>`\n  margin: 1rem;\n  border: 1px solid rgba(226, 233, 243, 1);\n  border-radius: 6px;\n  position: relative;\n\n  .message-box {\n    min-height: ${({ hasFiles }) => (hasFiles ? '0px' : '100px')};\n    overflow-y: auto;\n    max-height: 100px;\n    .send-btn {\n      position: absolute;\n      bottom: 10px;\n      right: 20px;\n      width: fit-content;\n      padding: 0 1.5rem;\n      min-width: 75px;\n    }\n  }\n  .fetch-indicator {\n    width: auto;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    margin-right: 1rem;\n    p {\n      margin-left: 0.7rem;\n    }\n  }\n  .emoji {\n    display: block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n\n    &.preview-emoji {\n      .emojipicker {\n        display: block;\n      }\n    }\n    .emojipicker {\n      display: none;\n      position: absolute;\n      bottom: 20px;\n      left: -10px;\n      z-index: 1000;\n    }\n  }\n  #toolbar {\n    border: none;\n    border-bottom: 1px solid rgba(226, 233, 243, 1);\n    .toolbar-btn {\n      padding: 3px 10px;\n      width: fit-content;\n    }\n  }\n\n  .quill {\n    background: transparent;\n  }\n  .ql-container {\n    overflow-y: unset;\n  }\n  .ql-editor {\n    .composer-emoji span {\n      position: relative;\n      top: 5px;\n    }\n    /* font-size: 0.8rem; */\n    min-height: ${({ hasFiles }) => (hasFiles ? '0px' : '100px')};\n    p,\n    b,\n    em,\n    i {\n      font-size: 0.875rem;\n    }\n  }\n`\n\nconst DropWrapper = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  background-color: #0000002e;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n","import dayjs from 'dayjs'\nimport React, { Fragment, useState } from 'react'\nimport styled from 'styled-components'\nimport DownArrowIcon from '../../components/svgs/downArrow'\nimport WarningIcon from '../../components/svgs/warning'\nimport logoIcon from '../../public/logo/resume-mango-logo.png'\nimport logoText from '../../public/logo/resume-mango-full-logo-white-letters.png'\nimport { SK_Heading, SK_Text, SK_Wrapper } from '../../styled/loader'\nimport { useHistory } from 'react-router-dom'\nimport { Button } from '../../styled/button'\n\nconst ReviewAccordian = ({\n  data,\n  handleShowResume,\n}: {\n  data: Record<string, any>\n  handleShowResume: (_show: boolean) => void\n}) => {\n  const [show, setShow] = useState({\n    ticket: true,\n    customer: true,\n    resume: true,\n  })\n  const history = useHistory()\n  return (\n    <AccordianWrapper>\n      <div>\n        <Accordian show={show.ticket}>\n          <div\n            className=\"head-wrapper\"\n            onClick={() => setShow({ ...show, ticket: !show.ticket })}\n          >\n            <p className=\"acc_heading\">Ticket Info</p>\n            <span>\n              <DownArrowIcon size=\".8rem\" />\n            </span>\n          </div>\n          <div className=\"item-wrapper\">\n            <div className=\"item\">\n              <p className=\"item-label\">Ticket ID</p>\n              <p>{(data && data._id) || '-'}</p>\n            </div>\n            <div className=\"item\">\n              <p className=\"item-label\">Status</p>\n              <p className=\"capitalize\">{(data && data.status) || '-'}</p>\n            </div>\n          </div>\n        </Accordian>\n        <Accordian show={show.customer}>\n          <div\n            className=\"head-wrapper\"\n            onClick={() => setShow({ ...show, customer: !show.customer })}\n          >\n            <p className=\"acc_heading\">Reviewer Info</p>\n            <span>\n              <DownArrowIcon size=\".8rem\" />\n            </span>\n          </div>\n          <div className=\"item-wrapper\">\n            <div className=\"item\">\n              <p className=\"item-label\">Reviewer </p>\n              <p>\n                {(data &&\n                  data.assignedTo &&\n                  data.assignedTo.firstName &&\n                  (data.assignedTo.firstName + ' ' + data.assignedTo.lastName ||\n                    '')) ||\n                  '-'}\n              </p>\n            </div>\n          </div>\n        </Accordian>\n      </div>\n      <div>\n        <Accordian show={show.resume}>\n          <div\n            className=\"head-wrapper\"\n            onClick={() => setShow({ ...show, resume: !show.resume })}\n          >\n            <p className=\"acc_heading\">Resume Info</p>\n            <span>\n              <DownArrowIcon size=\".8rem\" />\n            </span>\n          </div>\n          <div className=\"item-wrapper\">\n            <div className=\"item\">\n              <p className=\"item-label\">Name</p>\n              <p>{(data && data.resume && data.resume.title) || '-'}</p>\n            </div>\n            <div className=\"item\">\n              <p className=\"item-label\">Date Created</p>\n              <p>\n                {(data &&\n                  data.createdAt &&\n                  dayjs(data.createdAt).format('DD/MM/YYYY')) ||\n                  '-'}\n              </p>\n            </div>\n            <div className=\"item\">\n              <p className=\"item-label\">Resume Link</p>\n              {(data && data.resume && (\n                <a onClick={() => handleShowResume(true)}>View Resume</a>\n              )) ||\n                '-'}\n            </div>\n          </div>\n        </Accordian>\n      </div>\n    </AccordianWrapper>\n  )\n}\n\nconst ReviewSidebar = ({\n  data,\n  isLoading,\n  isError,\n  handleShowResume,\n}: {\n  data: Record<string, any>\n  isLoading: boolean\n  isError: boolean\n  handleShowResume: (_show: boolean) => void\n}) => {\n  const history = useHistory()\n  return (\n    <Fragment>\n      <NavWrapper className=\"hide-scrollbar\">\n        <NavBrand>\n          <LogoWrapper>\n            <a href={`${process.env.BASE_HOST}`}>\n              <img src={logoIcon} width=\"75px\" />\n              <img src={logoText} width=\"125px\" />\n            </a>\n          </LogoWrapper>\n          <p>All-in-one job hunting platform</p>\n          <Button\n            btnType=\"primary\"\n            size=\"sm\"\n            onClick={() => history.push('/resumes/new')}\n          >\n            Create Resume\n          </Button>\n        </NavBrand>\n        <NavLinksWrapper>\n          {isError ? (\n            <div className=\"align-center\">\n              <WarningIcon size=\"2rem\" />\n              <p style={{ marginLeft: '0.5rem' }}>\n                Failed to load ticket details!\n              </p>\n            </div>\n          ) : isLoading ? (\n            <div style={{ padding: '2.5rem', height: '100%' }}>\n              <AccordianWrapper>\n                <SK_Wrapper>\n                  <SK_Heading className=\"mb-1\" />\n                  <SK_Text className=\"mb\" />\n                  <SK_Text className=\"mb\" />\n                  <SK_Text className=\"mb\" />\n                  <SK_Text style={{ marginBottom: '1rem' }} />\n                  <SK_Heading className=\"mb-1\" />\n                  <SK_Text style={{ marginBottom: '5rem' }} />\n                </SK_Wrapper>\n                <SK_Wrapper>\n                  <SK_Heading className=\"mb-1\" />\n                  <SK_Text className=\"mb\" />\n                  <SK_Text className=\"mb\" />\n                </SK_Wrapper>\n              </AccordianWrapper>\n            </div>\n          ) : (\n            <ReviewAccordian data={data} handleShowResume={handleShowResume} />\n          )}\n        </NavLinksWrapper>\n      </NavWrapper>\n    </Fragment>\n  )\n}\n\nexport default ReviewSidebar\nconst AccordianWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n`\nconst Accordian = styled.div<{ show: boolean }>`\n  .item-wrapper,\n  .head-wrapper {\n    padding: 0 2.5rem;\n  }\n  .head-wrapper {\n    background: rgba(240, 132, 56, 0.05);\n    height: 40px;\n    color: ${({ theme }) => theme.colors.primary};\n    margin: auto;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    border-right: 3px solid ${({ theme }) => theme.colors.primary};\n    margin-bottom: 1rem;\n    cursor: pointer;\n    p {\n      font-size: 0.875rem;\n      margin: 0;\n      padding: 0;\n    }\n    svg {\n      transition: all ease-in-out 0.5s;\n      transform: ${({ show }) =>\n        show ? 'rotateZ(360deg)' : 'rotateZ(180deg)'};\n      path {\n        stroke: ${({ theme }) => theme.colors.primary};\n        stroke-width: 2;\n      }\n    }\n  }\n  .item-wrapper {\n    transition: all ease-in-out 0.5s;\n    height: 100%;\n    max-height: ${({ show }) => (show ? '1000px' : '0px')};\n    opacity: ${({ show }) => (show ? 1 : 0)};\n    visibility: ${({ show }) => (show ? 'visible' : 'hidden')};\n\n    overflow: hidden;\n    p {\n      margin: 0.3rem 0;\n    }\n    a {\n      color: ${({ theme }) => theme.colors.primary};\n      text-decoration: underline;\n    }\n    .item {\n      margin-bottom: 1rem;\n    }\n    .item-label {\n      font-size: 0.75rem;\n      color: rgba(52, 52, 52, 0.5);\n    }\n  }\n`\n\nconst NavWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  transition: transform ease-in-out 500ms;\n  max-width: 260px;\n  overflow: auto;\n  position: fixed;\n  z-index: 2;\n  border-right: 1px solid #eee;\n`\n\nconst LogoWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n`\nconst NavBrand = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  max-width: 260px;\n  min-height: 175px;\n  max-height: 175px;\n  background: #0f102a;\n  @media (max-height: 800px) {\n    height: auto;\n  }\n\n  p {\n    color: #bababa;\n    margin-top: 0;\n    font-size: 14px;\n  }\n`\nconst NavLinksWrapper = styled.nav`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: auto;\n  width: 100%;\n  flex: 1;\n  background: #f7f8fa;\n  padding: 2.5rem 0;\n`\n","import React, { Fragment, useEffect, useRef, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\nimport BlocksIcon from '../../components/svgs/blocks'\nimport DownArrowIcon from '../../components/svgs/downArrow'\nimport PreviewSkeleton from '../../components/ui/previewSkeleton'\nimport { useViewport } from '../../contexts/viewPort'\nimport { loadFonts } from '../../helpers/loadFonts'\nimport templateMapper from '../../helpers/templateMapper'\nimport { getResumeTemplate } from '../../queries/resumeQueries'\nimport { Button } from '../../styled/button'\nimport '../../styled/template_global.css'\n\nconst ViewResume = ({\n  resumeData,\n  handleShow,\n}: {\n  resumeData: Record<string, any>\n  handleShow: (_show: boolean) => void\n}) => {\n  const data = resumeData.fields || null\n  const [cssReady, setCssReady] = useState(false)\n  const [fontsReady, setFontsReady] = useState(false)\n  const [isTemplateMapping, setIsTemplateMapping] = useState(false)\n  const [pages, setPages] = useState(1)\n  const [buffer, setBuffer] = useState(0)\n  const [curr, setCurr] = useState(1)\n  const { width, height } = useViewport()\n  const queryEnabled = !!resumeData.template || false\n  const {\n    data: templateData,\n    isLoading: isTemplateLoading,\n    isError: isTemplateError,\n  } = getResumeTemplate(resumeData.template, queryEnabled)\n\n  const isTemplateReady =\n    cssReady && !isTemplateLoading && templateData && fontsReady && queryEnabled\n\n  const ref = useRef<HTMLDivElement>(null)\n  const loadTemplateFonts = async () => {\n    await loadFonts(templateData.fonts)\n    return setFontsReady(true)\n  }\n  useEffect(() => {\n    if (\n      !queryEnabled ||\n      !templateData ||\n      !templateData.fonts ||\n      templateData.fonts === 0\n    )\n      return\n    setFontsReady(false)\n    loadTemplateFonts()\n\n    return () => setFontsReady(true)\n  }, [templateData, queryEnabled])\n\n  useEffect(() => {\n    if (!document || !queryEnabled || cssReady) return\n    const old = document.getElementById('css_style')\n    if (old) {\n      old.remove()\n    }\n    const link = document.createElement('link')\n    link.id = 'css_style'\n    link.setAttribute('rel', 'stylesheet')\n    link.setAttribute('type', 'text/css')\n    link.setAttribute(\n      'href',\n      `${process.env.API_HOST}/css/resumes/${resumeData.template}.css`\n    )\n    document.head.appendChild(link)\n\n    /* istanbul ignore next */\n    link.onload = () => {\n      setCssReady(true)\n    }\n    /* istanbul ignore next */\n    link.onerror = () => {\n      return console.log('stylesheet could not be loaded')\n    }\n  }, [cssReady, queryEnabled])\n\n  const scale = 1\n  useEffect(() => {\n    if (!ref || !ref.current || !templateData) return\n    const page = ref.current.children[0] as HTMLElement\n    page.style.transform = `scale(${scale})`\n  }, [data, ref, templateData, width, height])\n\n  useEffect(() => {\n    if (!data || !isTemplateReady) return\n    setIsTemplateMapping(true)\n    const timer = setTimeout(() => {\n      if (!ref || !ref.current) return\n\n      const page = ref.current.querySelector('.page')\n      if (!page) return\n      const wrapper = page.children[0] as HTMLElement\n\n      if (!wrapper) return\n      const template = JSON.parse(JSON.stringify(templateData))\n      wrapper.innerHTML = ''\n      const pages = templateMapper(template, data, wrapper, buffer)\n      if (!pages) return\n      updatePages(Object.keys(pages).length)\n      setCurr(1)\n      setIsTemplateMapping(false)\n    }, 500)\n    return () => clearTimeout(timer)\n  }, [data, ref.current, isTemplateReady])\n\n  useEffect(() => {\n    if (!ref || !ref.current) return\n    const page = ref.current.querySelector('.page') as HTMLElement\n    if (!page) return\n    const wrapper = page.children[0] as HTMLElement\n    if (!wrapper) return\n    wrapper.style.transform = `translateY(-${page.clientHeight * (curr - 1)}px)`\n    wrapper.style.height = page.clientHeight * curr + 'px'\n  }, [curr, ref.current])\n\n  const updatePages = (total: number) => {\n    curr > total && setCurr(total)\n    setPages(total)\n  }\n\n  const handleClick = (type: 'prev' | 'next') => {\n    if (type === 'prev') curr > 1 && curr <= pages && setCurr(curr - 1)\n    if (type === 'next') curr >= 1 && curr < pages && setCurr(curr + 1)\n    return\n  }\n\n  return (\n    <MainWrapper>\n      <HeadWrapper>\n        <Button btnType=\"ghost\" size=\"lg\" onClick={() => handleShow(false)}>\n          Back to Chats\n        </Button>\n      </HeadWrapper>\n      {isTemplateError ? (\n        <div className=\"align-center\" style={{ height: '90%', flex: 1 }}>\n          <h3>Failed to load resume!</h3>\n        </div>\n      ) : (\n        <Fragment>\n          <Wrapper>\n            {(!isTemplateReady ||\n              !data ||\n              isTemplateMapping ||\n              isTemplateLoading) && (\n              <SkeletonWrapper data-test-id=\"resume_skeleton\">\n                <PreviewSkeleton scale={scale} />\n              </SkeletonWrapper>\n            )}\n\n            <TemplateWrapper\n              ref={ref}\n              style={\n                !isTemplateReady ||\n                !data ||\n                isTemplateMapping ||\n                isTemplateLoading\n                  ? { visibility: 'hidden' }\n                  : { visibility: 'visible' }\n              }\n            >\n              <div className=\"page\">\n                <div style={{ width: '100%' }} />\n              </div>\n            </TemplateWrapper>\n          </Wrapper>\n          <PageToggler>\n            <button\n              type=\"button\"\n              style={{ transform: 'rotateZ(90deg)' }}\n              onClick={() => handleClick('prev')}\n            >\n              <DownArrowIcon size=\"0.75rem\" color=\"#fff\" />\n            </button>\n            <p>\n              {curr}&nbsp;/&nbsp;{pages}\n            </p>\n            <button\n              type=\"button\"\n              style={{ transform: 'rotateZ(270deg)' }}\n              onClick={() => handleClick('next')}\n            >\n              <DownArrowIcon size=\"0.75rem\" color=\"#fff\" />\n            </button>\n          </PageToggler>\n        </Fragment>\n      )}\n    </MainWrapper>\n  )\n}\n\nexport default ViewResume\n\nconst SkeletonWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  padding: 3rem 0 10rem;\n`\nconst HeadWrapper = styled.div`\n  display: flex;\n  padding: 1rem 3rem;\n  justify-content: space-between;\n  top: 0;\n  left: 0;\n  width: 100%;\n  border-bottom: 2px solid #eee;\n  background-color: #fff;\n  z-index: 100;\n`\nconst MainWrapper = styled.div`\n  display: block;\n  position: relative;\n  height: 100vh;\n  width: 100%;\n  overflow: hidden;\n`\nconst Wrapper = styled.div`\n  display: flex;\n  position: relative;\n  margin: auto;\n  height: 100vh;\n  width: 100%;\n  overflow-y: scroll;\n  padding: 3rem 0 10rem;\n  background-color: #f7f9fc;\n`\nconst TemplateWrapper = styled.div`\n  min-height: 297mm;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n\n  .page {\n    position: relative;\n    box-shadow: 0px 0px 15px 0px #0000000f;\n    border: 1px solid #eee;\n  }\n`\n\nconst PageToggler = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  max-width: 100px;\n  bottom: 10%;\n  z-index: 10;\n  height: 35px;\n  border-radius: 6px;\n  background-color: ${({ theme }) => theme.colors.primary};\n  p {\n    font-weight: 600;\n  }\n  button {\n    padding-left: 0.7rem;\n    padding-right: 0.7rem;\n    svg {\n      path {\n        stroke-width: 1.5;\n      }\n    }\n  }\n`\n","import axios from 'axios'\nimport React, { Fragment, useState } from 'react'\nimport styled from 'styled-components'\nimport FileIcon from '../../components/svgs/files'\nimport ImageIcon from '../../components/svgs/image'\nimport PlayIcon from '../../components/svgs/play'\nimport CircularProgress from '../../components/ui/CircularProgress'\nimport { useNotify } from '../../contexts/notify'\n\nconst AttachmentDownload = ({\n  chat_id,\n  attachment,\n  senderType,\n}: {\n  chat_id: string\n  attachment: Record<string, any>\n  senderType: 'reviewer' | 'user'\n}) => {\n  const [progress, setProgress] = useState(0)\n  const [isDownloading, setIsDownloading] = useState(false)\n  const { setNotify } = useNotify()\n\n  const openAttachement = async (chatId: string, id: string) => {\n    if (isDownloading) return\n    setIsDownloading(true)\n    await downloadAttachment(chatId, id).then((res: any) => {\n      if (!res || !res.data) {\n        setIsDownloading(false)\n        return setNotify({\n          type: 'danger',\n          heading: 'Err!',\n          message: 'Failed to download attachment!',\n        })\n      }\n      const url = window.URL.createObjectURL(\n        new Blob([res.data], {\n          type: res.headers['content-type'],\n        })\n      )\n      const link = document.createElement('a')\n      link.href = url\n\n      const name =\n        (res.headers['content-disposition'] &&\n          res.headers['content-disposition']\n            .split('filename=\"')[1]\n            .split('\"')[0]) ||\n        'attachment'\n\n      link.setAttribute('download', name)\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n      window.URL.revokeObjectURL(url)\n      return setIsDownloading(false)\n    })\n  }\n\n  const downloadAttachment = async (chatId: string, id: string) => {\n    let res\n    const options = {\n      method: 'GET',\n      url: `/chat/attachments`,\n      params: { chatId, id },\n      responseType: 'blob',\n      onDownloadProgress: (progressEvent: any) => {\n        const percentage = Math.round(\n          (progressEvent.loaded * 100) / progressEvent.total\n        ) as any\n        setProgress(percentage)\n      },\n    }\n    try {\n      res = await axios.request(options as any)\n      return res\n    } catch (err) {\n      return (res = null)\n    }\n  }\n\n  return (\n    <Fragment>\n      <StyledFile\n        type={senderType}\n        className={`${isDownloading ? 'downloading' : 'idle'}`}\n        onClick={() => openAttachement(chat_id, attachment._id)}\n      >\n        <span className={`icon `}>\n          {isDownloading ? (\n            <CircularProgress progress={progress} />\n          ) : attachment.mimeType ? (\n            attachment.mimeType.split('/')[0] === 'image' ? (\n              <ImageIcon color=\"#fff\" size=\"1.2rem\" />\n            ) : attachment.mimeType.split('/')[0] === 'video' ? (\n              <PlayIcon color=\"#fff\" size=\"1.2rem\" />\n            ) : (\n              <FileIcon color=\"#fff\" size=\"1.2rem\" />\n            )\n          ) : (\n            <FileIcon color=\"#fff\" size=\"1.2rem\" />\n          )}\n        </span>\n        <p className=\"truncate\">{attachment.name}</p>\n      </StyledFile>\n    </Fragment>\n  )\n}\n\nexport default AttachmentDownload\n\nconst StyledFile = styled.div<{ type: 'reviewer' | 'user' }>`\n  width: 300px;\n  height: 40px;\n  display: grid;\n  grid-template-columns: 40px auto 30px;\n  border: 1px solid\n    ${({ type }) =>\n      type === 'reviewer'\n        ? 'rgba(238, 238, 238, 0.2)'\n        : 'rgba(52, 52, 52, 0.2)'};\n  border-radius: 6px;\n  margin: 0.5rem 0;\n  overflow: hidden;\n  align-items: center;\n  position: relative;\n  cursor: pointer;\n  background-color: ${({ type }) =>\n    type === 'reviewer' ? 'rgba(238, 238, 238, 0.2)' : 'rgba(52, 52, 52, 0.2)'};\n  &:before {\n    visibility: hidden;\n    position: absolute;\n    width: 40px;\n    height: 40px;\n    content: '';\n    display: block;\n    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuMi4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIyIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMzQ0IDI0MGgtNTZMMjg3LjEgMTUyYzAtMTMuMjUtMTAuNzUtMjQtMjQtMjRoLTE2QzIzNC43IDEyOCAyMjMuMSAxMzguOCAyMjMuMSAxNTJMMjI0IDI0MGgtNTZjLTkuNTMxIDAtMTguMTYgNS42NTYtMjIgMTQuMzhDMTQyLjIgMjYzLjEgMTQzLjkgMjczLjMgMTUwLjQgMjgwLjNsODguNzUgOTZDMjQzLjcgMzgxLjIgMjUwLjEgMzg0IDI1Ni44IDM4NGM3Ljc4MS0uMzEyNSAxMy4yNS0yLjg3NSAxNy43NS03Ljg0NGw4Ny4yNS05NmM2LjQwNi03LjAzMSA4LjAzMS0xNy4xOSA0LjE4OC0yNS44OFMzNTMuNSAyNDAgMzQ0IDI0MHpNMjU2IDBDMTE0LjYgMCAwIDExNC42IDAgMjU2czExNC42IDI1NiAyNTYgMjU2czI1Ni0xMTQuNiAyNTYtMjU2UzM5Ny40IDAgMjU2IDB6TTI1NiA0NjRjLTExNC43IDAtMjA4LTkzLjMxLTIwOC0yMDhTMTQxLjMgNDggMjU2IDQ4czIwOCA5My4zMSAyMDggMjA4UzM3MC43IDQ2NCAyNTYgNDY0eiIvPjwvc3ZnPg==');\n    background-repeat: no-repeat;\n    background-size: 2rem;\n    background-position: center;\n    background-color: ${({ type }) =>\n      type === 'reviewer'\n        ? 'rgba(238, 238, 238, 0.2)'\n        : 'rgba(52, 52, 52, 0.2)'};\n    top: 0;\n    left: 0;\n    margin: auto;\n  }\n  .icon {\n    opacity: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 6px;\n    background-color: ${({ type }) =>\n      type === 'reviewer'\n        ? 'rgba(238, 238, 238, 0.5)'\n        : 'rgba(52, 52, 52, 0.2)'};\n    height: 100%;\n  }\n  &.idle:hover {\n    &:before {\n      visibility: visible;\n    }\n    .icon {\n      opacity: 0;\n    }\n  }\n  .remove {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n  p {\n    margin: 0 0.7rem !important;\n    font-size: 0.8rem;\n  }\n`\n","import { Fragment, useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport DashPageHeader from '../../components/ui/dashPageHeader'\nimport MessageBox from './MessageBox'\nimport { chatFetcher, getReviewTicketById } from '../../queries/chatQueries'\nimport { useInfiniteQuery, useQueryClient } from 'react-query'\nimport ReactHtmlParser from 'react-html-parser'\nimport getUrlParams from '../../hooks/getUrlParams'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { LoadingDots, LoadingWrapper, Spinner } from '../../styled/loader'\nimport ReviewSidebar from './reviewSidebar'\nimport WarningIcon from '../../components/svgs/warning'\nimport ViewResume from './viewResume'\nimport AttachmentDownload from './AttachmentDownload'\nimport ReactDOMServer from 'react-dom/server'\nimport { Emoji } from 'emoji-picker-react'\n\nconst ReviewChat = () => {\n  const queryParams = getUrlParams()\n  const { ticket } = useParams<{ ticket: string }>()\n  const resumeId = queryParams.get('ref')\n  const preview = queryParams.get('preview')\n  const history = useHistory()\n  const [showPreview, setShowPreview] = useState(preview || false)\n  const {\n    data: ticketData,\n    isLoading: ticketLoading,\n    isError: ticketError,\n  } = getReviewTicketById({ ticket } as any)\n\n  const ticketStatus = (ticketData && ticketData.status === 'open') || false\n\n  const {\n    isLoading,\n    isError,\n    data,\n    hasNextPage,\n    fetchNextPage,\n    isFetching,\n    isFetchingNextPage,\n  } = useInfiniteQuery(\n    ['chats', ticket],\n    ({ pageParam = 0 }) =>\n      chatFetcher({ ticketId: ticket, page: pageParam, limit: 5 }),\n    {\n      getNextPageParam: (lastPage: any, pages) => {\n        const hasNext =\n          lastPage.page + 1 < Math.ceil(lastPage.total / lastPage.limit)\n        if (hasNext) return pages.length\n        return undefined\n      },\n      enabled: ticket !== 'new' && !preview,\n      refetchOnWindowFocus: ticket !== 'new' && !preview && ticketStatus,\n      refetchInterval:\n        ticket !== 'new' && !preview && ticketStatus ? 1000 * 60 : 0,\n    }\n  )\n\n  const firstPageLength =\n    data &&\n    data.pages &&\n    data.pages[0] &&\n    data.pages[0].items &&\n    data.pages[0].items.length\n\n  const pagesLength = data?.pages.length\n\n  useEffect(() => {\n    const messageSection = document.getElementById('message-section')\n    if (!messageSection) return\n    const lastPage =\n      data && data.pages.length > 1 && data.pages[data.pages.length - 1]\n    if (!lastPage) return\n    const lastItem =\n      lastPage.items &&\n      lastPage.items.length > 0 &&\n      lastPage.items[lastPage.items.length - 1]\n    if (!lastItem || !lastItem._id) return\n    const element = document.getElementById(lastItem._id)\n    if (!element) return\n    messageSection.scrollTop = element?.offsetTop\n  }, [pagesLength])\n\n  useEffect(() => {\n    return scrollToBottom('first-page-length')\n  }, [firstPageLength])\n\n  useEffect(() => {\n    if (isLoading) return\n\n    const wrapper = document.getElementById('main-section')\n    const header = document.querySelector('header')\n    const messageBox = document.getElementById('message-box')\n    const messageSection = document.getElementById('message-section')\n    if (!wrapper || !header || !messageBox || !messageSection) return\n\n    wrapper.style.maxHeight = '100vh'\n    messageSection.style.overflowY = 'scroll'\n    messageSection.style.height = `${\n      wrapper.clientHeight - header.clientHeight - messageBox.clientHeight\n    }px`\n    messageSection.focus()\n    scrollToBottom()\n\n    const timer = setTimeout(() => {\n      messageSection.style.opacity = '1'\n      messageBox.style.opacity = '1'\n    }, 500)\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [isLoading, preview, ticketStatus])\n\n  const scrollToBottom = (val?: 'first-page-length' | undefined) => {\n    if (\n      (data && data.pages.length === 1) ||\n      (val === 'first-page-length' &&\n        data &&\n        firstPageLength > data.pages[0].limit)\n    ) {\n      const messageSection = document.getElementById('message-section')\n      if (!messageSection) return\n      messageSection.scrollTop = messageSection.scrollHeight\n    }\n    return\n  }\n  const parseMessage = (val: string) => {\n    const dummy = document.createElement('div')\n    dummy.innerHTML = val\n    const element =\n      dummy.children.length === 1 && (dummy.children[0] as HTMLElement)\n    let size = 20\n    if (element && element.children.length > 0) {\n      if (\n        element.children.length === 1 &&\n        Array.from(element.childNodes).filter((child) => child.nodeType === 3)\n          .length === 0\n      ) {\n        size = 40\n      }\n    }\n    const emojis = dummy.querySelectorAll('span.composer-emoji') as any\n    if (emojis && emojis.length > 0) {\n      emojis.forEach((item: HTMLElement) => {\n        item.className = 'emoji-icon'\n        return (item.innerHTML = ReactDOMServer.renderToString(\n          <Emoji unified={item.title} size={size} />\n        ))\n      })\n    }\n\n    return dummy.innerHTML\n  }\n\n  const handeShowResume = (show: boolean) => {\n    !show\n      ? history.replace({ search: '' })\n      : history.replace({ search: '?preview=true' })\n    return setShowPreview(show)\n  }\n\n  return (\n    <Fragment>\n      <ReviewSidebar\n        data={ticketData}\n        isLoading={ticketLoading}\n        isError={ticketError}\n        handleShowResume={handeShowResume}\n      />\n      <div>\n        <Content id=\"main-section\">\n          {ticketData && ticketData.resume && showPreview ? (\n            <ViewResume\n              resumeData={ticketData.resume}\n              handleShow={handeShowResume}\n            />\n          ) : (\n            <Fragment>\n              <DashPageHeader\n                title=\"Reviewer Support Chat\"\n                customBtns\n              ></DashPageHeader>\n\n              {isError ? (\n                <div\n                  className=\"align-center\"\n                  style={{ height: '90%', flex: 1 }}\n                >\n                  <h3>Failed to load chat!</h3>\n                </div>\n              ) : isLoading ? (\n                <LoadingWrapper style={{ height: '90%' }}>\n                  <Spinner size=\"2rem\" type=\"primary\" />\n                </LoadingWrapper>\n              ) : (\n                <Fragment>\n                  <MessageSection id=\"message-section\" style={{ opacity: 0 }}>\n                    <ChatSection>\n                      {hasNextPage && (\n                        <div className=\"load-more\">\n                          <a onClick={() => fetchNextPage()}>\n                            {!isFetchingNextPage ? (\n                              'Load older messages'\n                            ) : (\n                              <LoadingDots color=\"rgba(240, 132, 56, 1)\">\n                                Loading Messages\n                              </LoadingDots>\n                            )}\n                          </a>\n                        </div>\n                      )}\n\n                      {data &&\n                        data.pages &&\n                        data?.pages\n                          .map(data?.pages.pop, [...data?.pages])\n                          .map((group, i) => (\n                            <Fragment key={i}>\n                              {group &&\n                                group.items &&\n                                group.items.length > 0 &&\n                                group.items\n                                  .map(group.items.pop, [...group.items])\n                                  .map(\n                                    (item: Record<string, any>, i: number) => (\n                                      <ChatWrapper\n                                        type={\n                                          item.senderType &&\n                                          item.senderType === 'reviewer'\n                                            ? 'reciever'\n                                            : 'sender'\n                                        }\n                                        key={i}\n                                        id={item._id}\n                                      >\n                                        <div className=\"message\">\n                                          <p className=\"label\">\n                                            {item.senderType &&\n                                            item.senderType === 'reviewer'\n                                              ? 'Reviewer'\n                                              : 'You'}\n                                          </p>\n                                          <div className=\"bubble\">\n                                            {item.message && (\n                                              <div>\n                                                {ReactHtmlParser(\n                                                  parseMessage(item.message)\n                                                )}\n                                              </div>\n                                            )}\n                                            {item.attachments &&\n                                              item.attachments.length > 0 &&\n                                              item.attachments.map(\n                                                (\n                                                  attachment: Record<\n                                                    string,\n                                                    any\n                                                  >,\n                                                  i: number\n                                                ) => (\n                                                  <Fragment key={i}>\n                                                    <AttachmentDownload\n                                                      attachment={attachment}\n                                                      chat_id={item._id}\n                                                      senderType={\n                                                        item.senderType\n                                                      }\n                                                    />\n                                                  </Fragment>\n                                                )\n                                              )}\n                                          </div>\n                                        </div>\n                                      </ChatWrapper>\n                                    )\n                                  )}\n                            </Fragment>\n                          ))}\n                    </ChatSection>\n                  </MessageSection>\n                  {!ticketData || ticketStatus ? (\n                    <MessageBox\n                      isFetchingMessage={isFetching && !isFetchingNextPage}\n                      ticket={ticket as string}\n                      resumeId={resumeId as string}\n                      style={{ opacity: 0 }}\n                    />\n                  ) : (\n                    <AlertBox id=\"message-box\">\n                      <span>\n                        <WarningIcon size=\"1.3rem\" />\n                      </span>\n                      <p>Ticket has been closed!</p>\n                    </AlertBox>\n                  )}\n                </Fragment>\n              )}\n            </Fragment>\n          )}\n        </Content>\n      </div>\n    </Fragment>\n  )\n}\n\nexport default ReviewChat\n\nconst AlertBox = styled.div`\n  margin-top: 2rem;\n  display: flex;\n  height: 50px;\n  justify-content: center;\n  align-items: center;\n  background-color: #eee;\n  span {\n    height: fit-content;\n    margin-right: 0.5rem;\n    margin-top: 0.3rem;\n  }\n  p {\n    text-align: center;\n    margin: 0;\n  }\n`\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  margin-left: 260px;\n  min-height: 100vh;\n  overflow-x: hidden;\n`\n\nconst MessageSection = styled.div`\n  display: flex;\n  align-items: flex-end;\n  height: 100%;\n  width: 100%;\n`\nconst ChatSection = styled.div`\n  margin-top: auto;\n  padding: 1.5rem 1.5rem 0;\n  height: fit-content;\n  width: 100%;\n  .load-more {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    justify-content: center;\n    border-bottom: 1px solid rgba(52, 52, 52, 0.2);\n    transition: color ease-in-out 0.2s;\n    a {\n      padding: 0.7rem;\n      text-transform: capitalize;\n      &:hover {\n        color: ${({ theme }) => theme.colors.primary};\n      }\n    }\n  }\n`\nconst ChatWrapper = styled.div<{ type: 'sender' | 'reciever' }>`\n  width: 100%;\n  display: flex;\n  justify-content: ${({ type }) =>\n    type === 'sender' ? 'flex-end' : 'flex-start'};\n  .message {\n    max-width: 50%;\n    width: fit-content;\n  }\n  .label {\n    text-align: ${({ type }) => (type === 'sender' ? 'end' : 'start')};\n    margin-bottom: 0.2rem;\n  }\n  .bubble {\n    background-color: #0f102a;\n    background-color: ${({ type }) =>\n      type === 'sender' ? '#F08438' : '#0f102a'};\n    padding: 0.5rem 1rem;\n    border-radius: 6px;\n    color: white;\n    font-size: 0.8rem;\n    p {\n      margin: 0;\n    }\n    .emoji-icon {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      height: fit-content;\n      line-height: 1;\n      position: relative;\n      top: 4px;\n    }\n  }\n`\n","import axios from 'axios'\nimport getQueryAdvance from '../hooks/getQueryAdvance'\n\nexport interface GetReviewParams {\n  title?: string\n  page: number\n  limit: number\n}\n\nexport interface GetChatsPatams {\n  ticketId: string\n  page: number\n  limit: number\n}\n\nexport const chatFetcher = async (params: GetChatsPatams) => {\n  const { ticketId, ...rest } = params\n\n  const { data } = await axios.get(`/ticket/${ticketId}`, {\n    params: rest,\n  })\n  return data\n}\n\nexport const getReviewTicketById = ({ ticket }: { ticket: string }) => {\n  const fetcher = async () => {\n    const { data } = await axios.get(`/resume-review/${ticket}`)\n    return data\n  }\n  return getQueryAdvance(\n    ['reviewTicket', ticket],\n    () => fetcher(),\n    ticket !== 'new'\n  )\n}\n\nexport const getReviewTickets = (params: GetReviewParams) => {\n  const fetcher = async () => {\n    const { data } = await axios.get(`/resume-review`, { params })\n    return data\n  }\n  return getQueryAdvance(['resumeReview', params], () => fetcher())\n}\n","import axios from 'axios'\nimport getQuery from '../hooks/getQuery'\nimport getQueryAdvance from '../hooks/getQueryAdvance'\nexport interface GetResumesParams {\n  title?: string\n  page: number\n  limit: number\n}\n/**\n * Gets All resume templates\n * @returns UseQueryResult\n */\nexport const getAllResumeTemplates = () => {\n  return getQuery('resumeTemplates', `/templates/resume`)\n}\n\n/**\n * Gets all user created resume\n * @returns UseQueryResult\n */\n// export const getAllResumes = () => {\n//   const fetcher = async () => {\n//     const { data } = await axios.get(`/resume`)\n//     return data\n//   }\n\n//   return getQueryAdvance('resumes', () => fetcher())\n// }\nexport const getAllResumes = (params: GetResumesParams) => {\n  const fetcher = async () => {\n    const { data } = await axios.get(`/resume`, { params })\n    return data\n  }\n  return getQueryAdvance(['resumes', params], () => fetcher())\n}\n\n/**\n * Gets single resume template\n * @param template resume template object _id\n * @param enabled should quey be enabled?\n * @returns UseQueryResult\n */\nexport const getResumeTemplate = (template: string, enabled?: boolean) => {\n  const fetcher = async (name: string) => {\n    const { data } = await axios.get(`/templates/resume/${name}`)\n    return data\n  }\n\n  return getQueryAdvance(\n    ['resumeTemplates', template],\n    () => fetcher(template),\n    enabled\n  )\n}\n/**\n * Gets single user resume\n * @param id resume object _id\n * @param enabled should query be enabled?\n * @returns UseQueryResult\n */\nexport const getResume = (id: string, enabled?: boolean) => {\n  const fetchResume = async (id: string) => {\n    const { data } = await axios.get(`/resume/${id}`)\n    return data\n  }\n  return getQueryAdvance(['resume', id], () => fetchResume(id), enabled)\n}\n"],"names":["name","title","children","customBtns","user","useAuth","history","useHistory","width","useViewport","Fragment","Header","role","Array","isArray","includes","onClick","push","btnType","size","styled","useState","isOutside","setIsOutside","ref","useRef","handleClickOutside","e","current","contains","target","useEffect","document","addEventListener","removeEventListener","search","useLocation","React","URLSearchParams","color","className","height","viewBox","fill","xmlns","d","setFiles","setShow","type","setNotify","useNotify","onDrop","useCallback","acceptedFiles","console","log","onDropRejected","rejectedFiles","length","forEach","item","message","file","heading","errors","useDropzone","accept","maxFiles","maxSize","getRootProps","getInputProps","isDragActive","Wrapper","CloseBtn","DropWrapper","theme","colors","primary","props","progress","trackWidth","trackColor","indicatorWidth","indicatorColor","indicatorCap","spinnerMode","spinnerSpeed","center","radius","dashArray","Math","PI","dashOffset","CircleIcon","style","cx","cy","r","stroke","strokeWidth","animationDuration","toString","strokeDasharray","strokeDashoffset","strokeLinecap","Spinner","keyframes","onSuccess","handeRemoveFile","onDone","index","setProgress","done","setDone","error","setError","cancelToken","axios","uploadFile","formData","FormData","append","token","onUploadProgress","progressEvent","percentage","round","loaded","total","then","req","data","err","Alert","StyledFile","indexOf","split","cancel","EmojiBolt","value","node","classList","add","innerHTML","ReactDOMServer","unified","emojiHTML","Quill","blotName","tagName","formats","ticket","resumeId","isFetchingMessage","detectOutsideClick","quillRef","show","showDropzone","setShowDropzone","files","filesInProgress","setFilesInProgress","filesToRemove","setFilesToRemove","queryClient","useQueryClient","methods","useForm","mode","defaultValues","attachments","handleSubmit","watch","reset","control","isSubmitting","formState","useFieldArray","remove","hasMessage","replace","sendMessage","useMutation","reqData","chats","getQueryData","ticketId","pages","items","unshift","limit","page","pageParams","undefined","setQueryData","pathname","handleCache","onError","response","status","queryData","onSubmit","dummy","createElement","emojis","querySelectorAll","innerText","regex","RegExp","mutate","insertEmoji","emojiData","_event","editor","getSelection","selection","insertEmbed","cursorPosition","setSelection","apiDeleteFiles","ids","options","method","url","_err","timer","setTimeout","clearTimeout","handleFileSuccess","_fileIndex","handleRemoveFile","fileIndex","isUploaded","findIndex","prev","_id","newFiles","splice","handleFileDone","handleDropzone","id","hasFiles","onEmojiClick","autoFocusSearch","lazyLoadEmojis","previewConfig","showPreview","emojiStyle","EmojiStyle","emojiVersion","skinTonesDisabled","droppedFiles","RichTextEditor","placeholder","modules","toolbar","container","clipboard","matchVisual","map","i","disabled","ReviewAccordian","handleShowResume","customer","resume","AccordianWrapper","Accordian","assignedTo","firstName","lastName","createdAt","dayjs","format","isLoading","isError","NavWrapper","NavBrand","LogoWrapper","href","process","src","logoIcon","logoText","NavLinksWrapper","marginLeft","padding","marginBottom","resumeData","handleShow","fields","cssReady","setCssReady","fontsReady","setFontsReady","isTemplateMapping","setIsTemplateMapping","setPages","buffer","curr","setCurr","queryEnabled","template","getResumeTemplate","templateData","isTemplateLoading","isTemplateError","isTemplateReady","loadTemplateFonts","loadFonts","fonts","old","getElementById","link","setAttribute","head","appendChild","onload","onerror","transform","querySelector","wrapper","JSON","parse","stringify","templateMapper","updatePages","Object","keys","clientHeight","handleClick","MainWrapper","HeadWrapper","flex","SkeletonWrapper","scale","TemplateWrapper","visibility","PageToggler","chat_id","attachment","senderType","isDownloading","setIsDownloading","openAttachement","chatId","downloadAttachment","res","window","URL","createObjectURL","Blob","headers","body","click","removeChild","revokeObjectURL","params","responseType","onDownloadProgress","mimeType","queryParams","getUrlParams","useParams","get","preview","setShowPreview","getReviewTicketById","ticketData","ticketLoading","ticketError","ticketStatus","useInfiniteQuery","pageParam","chatFetcher","getNextPageParam","lastPage","ceil","enabled","refetchOnWindowFocus","refetchInterval","hasNextPage","fetchNextPage","isFetching","isFetchingNextPage","firstPageLength","pagesLength","messageSection","lastItem","element","scrollTop","offsetTop","scrollToBottom","header","messageBox","maxHeight","overflowY","focus","opacity","val","scrollHeight","parseMessage","from","childNodes","filter","child","nodeType","handeShowResume","Content","MessageSection","ChatSection","pop","group","ChatWrapper","ReactHtmlParser","AlertBox","rest","fetcher","getQueryAdvance","getReviewTickets","getAllResumeTemplates","getQuery","getAllResumes","getResume","fetchResume"],"sourceRoot":""}