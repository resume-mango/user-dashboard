(self.webpackChunkuser_dashboard=self.webpackChunkuser_dashboard||[]).push([[849],{8614:(e,n,t)=>{"use strict";t.d(n,{Z:()=>m});var r,i=t(168),s=t(7294),a=t(5977),c=t(9163),o=t(5454),l=t(9964),u=t(5438),d=t(5893);const m=function(e){var n=e.name,t=e.title,r=e.children,i=e.customBtns,c=(0,o.a)().user,m=(0,a.k6)(),h=(0,l.S)().width;return(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)(p,{children:[(0,d.jsxs)("div",{children:[n&&(0,d.jsx)("p",{children:n}),(0,d.jsx)("h1",{children:t})]}),h>800&&(0,d.jsx)("div",{children:i?r:(0,d.jsxs)(s.Fragment,{children:[c&&c.role&&Array.isArray(c.role)&&c.role.includes("ceo")?(0,d.jsx)(u.z,{onClick:function(){return m.push("/resumes/new")},btnType:"primary",size:"sm",children:"Create Resume"}):(0,d.jsx)(u.z,{onClick:function(){return m.push("/subscribe")},btnType:"primary",size:"sm",children:"Upgrade"}),(0,d.jsx)(u.z,{onClick:function(){return m.push("/progress-tracker")},btnType:"ghost",size:"sm",children:"Tracker"})]})})]})})};var p=c.ZP.header(r||(r=(0,i.Z)(["\n  min-height: 175px;\n  max-height: 175px;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  border-bottom: 1px solid #e2e9f3;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  h1 {\n    margin-bottom: 0;\n    span {\n      font-weight: normal;\n    }\n  }\n  div:last-child {\n    display: flex;\n    button {\n      margin: 0 1rem;\n    }\n  }\n  @media (max-width: 768px) {\n    div:last-child {\n      flex-direction: column;\n    }\n  }\n  @media (max-width: 480px) {\n    max-height: 100px;\n    min-height: 100px;\n    h1 {\n      margin: 0;\n    }\n    div:last-child {\n      display: block;\n      width: 100%;\n    }\n  }\n"])))},8045:(e,n,t)=>{"use strict";t.d(n,{Z:()=>s});var r=t(885),i=t(7294);const s=function(){var e=(0,i.useState)(!1),n=(0,r.Z)(e,2),t=n[0],s=n[1],a=(0,i.useRef)(null),c=function(e){a&&a.current&&(a.current.contains(e.target)?s(!1):s(!0))};return(0,i.useEffect)((function(){if(a&&a.current)return document.addEventListener("mousedown",c,!0),function(){document.removeEventListener("mousedown",c,!0)}}),[a.current]),{isOutside:t,ref:a}}},3434:(e,n,t)=>{"use strict";t.d(n,{Z:()=>s});var r=t(7294),i=t(5977);const s=function(){var e=(0,i.TH)().search;return r.useMemo((function(){return new URLSearchParams(e)}),[e])}},9525:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>pn});var r=t(168),i=t(2982),s=t(885),a=t(7294),c=t(9163),o=t(8614),l=t(5861),u=t(4942),d=t(5671),m=t(3144),p=t(1752),h=t(136),f=t(3930),g=t(1120),x=t(7757),j=t.n(x),v=t(7762),b=t(2283),y=t(2201),w=t(4290),Z=t(7819),k=t(8045),N=t(5893);const M=function(e){var n=e.size,t=e.color,r=e.className;return(0,N.jsx)(a.Fragment,{children:(0,N.jsx)("svg",{width:n||"1rem",className:r||"",height:n||"1rem",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,N.jsx)("path",{fill:t||"#898989",d:"M256 352C293.2 352 319.2 334.5 334.4 318.1C343.3 308.4 358.5 307.7 368.3 316.7C378 325.7 378.6 340.9 369.6 350.6C347.7 374.5 309.7 400 256 400C202.3 400 164.3 374.5 142.4 350.6C133.4 340.9 133.1 325.7 143.7 316.7C153.5 307.7 168.7 308.4 177.6 318.1C192.8 334.5 218.8 352 256 352zM208.4 208C208.4 225.7 194 240 176.4 240C158.7 240 144.4 225.7 144.4 208C144.4 190.3 158.7 176 176.4 176C194 176 208.4 190.3 208.4 208zM304.4 208C304.4 190.3 318.7 176 336.4 176C354 176 368.4 190.3 368.4 208C368.4 225.7 354 240 336.4 240C318.7 240 304.4 225.7 304.4 208zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"})})})},z=function(e){var n=e.size,t=e.color,r=e.className;return(0,N.jsx)(a.Fragment,{children:(0,N.jsx)("svg",{width:n||"1rem",className:r||"",height:n||"1rem",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,N.jsx)("path",{fill:t||"#898989",d:"M396.2 83.8c-24.4-24.4-64-24.4-88.4 0l-184 184c-42.1 42.1-42.1 110.3 0 152.4s110.3 42.1 152.4 0l152-152c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-152 152c-64 64-167.6 64-231.6 0s-64-167.6 0-231.6l184-184c46.3-46.3 121.3-46.3 167.6 0s46.3 121.3 0 167.6l-176 176c-28.6 28.6-75 28.6-103.6 0s-28.6-75 0-103.6l144-144c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-144 144c-6.7 6.7-6.7 17.7 0 24.4s17.7 6.7 24.4 0l176-176c24.4-24.4 24.4-64 0-88.4z"})})})};var C,T,S,E=t(463),I=t(5438),O=t(2790),L=t(9245);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const F=function(e){var n=e.setFiles,t=e.setShow,r=e.type,i=(0,L.d)().setNotify,s=(0,a.useCallback)(function(){var e=(0,l.Z)(j().mark((function e(r){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(r),e.abrupt("return",t(!1));case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}(),[]),c=(0,a.useCallback)(function(){var e=(0,l.Z)(j().mark((function e(n){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&0!==n.length){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",n.forEach((function(e){return i({type:"warning",message:e.file.name,heading:e.errors[0].message})})));case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}(),[]),o=(0,E.uI)({accept:"image"===r?["image/png","image/jpg","image/jpeg","image/webp"]:"attachment"===r?["video/mp4","video/webm","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf","text/plain"]:"",maxFiles:10,maxSize:104857600,onDrop:s,onDropRejected:c}),u=o.getRootProps,d=o.getInputProps,m=o.isDragActive;return(0,N.jsx)(a.Fragment,{children:(0,N.jsxs)(A,{children:[(0,N.jsx)(B,{onClick:function(){return t(!1)},children:(0,N.jsx)(O.Z,{size:"1.2rem"})}),(0,N.jsxs)(R,D(D({},u()),{},{children:[(0,N.jsx)("input",D({},d())),m?(0,N.jsx)("p",{children:"Drop the files here ..."}):(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)("p",{className:"mb-2",children:"Drag 'n' drop here, or click to select image"}),(0,N.jsx)(I.z,{type:"button",btnType:"primary",size:"lg",children:"Choose File"})]})]}))]})})};var A=c.ZP.div(C||(C=(0,r.Z)(["\n  max-height: 400px;\n  max-width: 850px;\n  height: 100%;\n  width: 100%;\n  padding: 5rem 4rem;\n  background-color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n"]))),R=c.ZP.div(T||(T=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  margin: 0;\n  align-items: center;\n  justify-content: center;\n  background-image: url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='%23ACACACFF' stroke-width='2' stroke-dasharray='5%2c 8' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\");\n  opacity: 0.8;\n  transition: opacity 200ms;\n  cursor: pointer;\n  p {\n    font-size: 1.25rem;\n  }\n  &:hover {\n    opacity: 1;\n  }\n"]))),B=c.ZP.span(S||(S=(0,r.Z)(["\n  display: inline-flex;\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  padding: 1rem;\n  z-index: 1;\n  cursor: pointer;\n\n  &:hover {\n    svg {\n      path {\n        stroke: ",";\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.primary}));const H=function(e){var n=e.size,t=e.color,r=e.className;return(0,N.jsx)(a.Fragment,{children:(0,N.jsx)("svg",{width:n||"1rem",className:r||"",height:n||"1rem",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,N.jsx)("path",{fill:t||"#898989",d:"M152 120c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48S178.5 120 152 120zM447.1 32h-384C28.65 32-.0091 60.65-.0091 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96C511.1 60.65 483.3 32 447.1 32zM463.1 409.3l-136.8-185.9C323.8 218.8 318.1 216 312 216c-6.113 0-11.82 2.768-15.21 7.379l-106.6 144.1l-37.09-46.1c-3.441-4.279-8.934-6.809-14.77-6.809c-5.842 0-11.33 2.529-14.78 6.809l-75.52 93.81c0-.0293 0 .0293 0 0L47.99 96c0-8.822 7.178-16 16-16h384c8.822 0 16 7.178 16 16V409.3z"})})})};var U=t(8767),Y=t(5977),Q=t(9669),V=t.n(Q),_=t(3360);const q=function(e){var n=e.size,t=e.color,r=e.className;return(0,N.jsx)(a.Fragment,{children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:n||"1rem",className:r||"",height:n||"1rem",fill:"none",children:(0,N.jsx)("path",{fill:t||"#898989",d:"M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"})})})};var W,G;const J=function(e){var n=e.size,t=void 0===n?30:n,r=e.progress,i=void 0===r?0:r,s=e.trackWidth,c=void 0===s?3:s,o=e.trackColor,l=void 0===o?"#eee":o,u=e.indicatorWidth,d=void 0===u?3:u,m=e.indicatorColor,p=void 0===m?"rgba(240, 132, 56, 1)":m,h=e.indicatorCap,f=void 0===h?"round":h,g=e.spinnerMode,x=void 0!==g&&g,j=e.spinnerSpeed,v=void 0===j?1:j,b=t/2,y=b-(c>d?c:d),w=2*Math.PI*y,Z=w*((100-i)/100);return(0,N.jsx)(a.Fragment,{children:(0,N.jsxs)($,{style:{width:t,height:t},children:[(0,N.jsx)("circle",{className:"track ".concat(x?"spinner":""),cx:b,cy:b,fill:"transparent",r:y,stroke:l,strokeWidth:c}),(0,N.jsx)("circle",{className:"indicator ".concat(x?"indicator-spinner":""),style:{animationDuration:(1e3*v).toString()},cx:b,cy:b,fill:"transparent",r:y,stroke:p,strokeWidth:d,strokeDasharray:w,strokeDashoffset:Z,strokeLinecap:f})]})})};var X=(0,c.F4)(W||(W=(0,r.Z)(["\n\n  0% {\n    transform: rotate(0)\n  }\n  100% {\n    transform: rotate(360deg)\n  }\n\n"]))),$=c.ZP.svg(G||(G=(0,r.Z)(["\n  transform: rotate(-90deg);\n  .indicator-spinner {\n    animation: "," 1000ms linear infinite;\n    transform-origin: center;\n  }\n"])),X);const K=function(e){var n=e.size,t=e.color,r=e.className;return(0,N.jsx)(a.Fragment,{children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:n||"1rem",className:r||"",height:n||"1rem",fill:"none",children:(0,N.jsx)("path",{fill:t||"#898989",d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})})})},ee=function(e){var n=e.size,t=e.color,r=e.className;return(0,N.jsx)(a.Fragment,{children:(0,N.jsxs)("svg",{width:n||"1rem",height:n||"1rem",className:r||"",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,N.jsx)("path",{fill:t||"#898989",d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}),(0,N.jsx)("path",{fill:t||"#898989",d:"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"})]})})};var ne,te;const re=function(e){var n=e.file,t=e.onSuccess,r=e.handeRemoveFile,i=e.onDone,c=e.index,o=(0,a.useState)(0),u=(0,s.Z)(o,2),d=u[0],m=u[1],p=(0,a.useState)(!1),h=(0,s.Z)(p,2),f=h[0],g=h[1],x=(0,a.useState)(!1),v=(0,s.Z)(x,2),b=v[0],y=v[1],w=(0,a.useRef)();(0,a.useEffect)((function(){w.current=V().CancelToken.source()}),[]);var Z=function(){var e=(0,l.Z)(j().mark((function e(){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",y(!0));case 2:return y(!1),(r=new FormData).append("chat-attachments",n),e.next=7,V().post("/chat/attachments",r,{cancelToken:w.current.token,onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);m(n)}}).then((function(e){return e&&e.data&&t(e.data,c)})).catch((function(e){V().isCancel(e)||y(!0)})).finally((function(){i(),g(!0)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){Z()}),[]),(0,N.jsxs)(a.Fragment,{children:[b&&(0,N.jsx)(ae,{children:"Failed to upload!"}),(0,N.jsxs)(ce,{children:[(0,N.jsx)("span",{className:"icon",children:b?(0,N.jsx)("a",{onClick:function(){return Z()},children:(0,N.jsx)(ee,{size:"1.2rem"})}):100!==d?(0,N.jsx)(J,{progress:d}):f?n.type&&-1!==["video","audio"].indexOf(n.type.split("/")[0])?(0,N.jsx)(K,{size:"1.2rem"}):(0,N.jsx)(q,{size:"1.2rem"}):(0,N.jsx)(J,{progress:30,spinnerMode:!0})}),(0,N.jsx)("p",{className:"truncate",children:n.name}),(0,N.jsx)("span",{className:"remove",onClick:function(){return!f&&w.current&&w.current.cancel("Cancelling previous requests"),void r(c,f&&!b)},children:(0,N.jsx)(O.Z,{size:"0.8rem"})})]})]})};var ie,se,ae=c.ZP.p(ne||(ne=(0,r.Z)(["\n  margin: 0 0.5rem;\n  font-size: 0.7rem;\n  color: red;\n  line-height: 1;\n"]))),ce=c.ZP.div(te||(te=(0,r.Z)(["\n  width: 300px;\n  height: 40px;\n  display: grid;\n  grid-template-columns: 40px auto 30px;\n  border: 1px solid rgba(52, 52, 52, 0.2);\n  border-radius: 6px;\n  margin: 0.5rem;\n  overflow: hidden;\n  align-items: center;\n  .icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 6px;\n    background-color: rgba(52, 52, 52, 0.2);\n    height: 100%;\n  }\n  .remove {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n  a {\n    height: fit-content;\n    line-height: 1;\n  }\n  p {\n    margin: 0 0.7rem;\n    font-size: 0.8rem;\n  }\n"])));function oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ue=function(e){(0,h.Z)(i,e);var n,t,r=(n=i,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,g.Z)(n);if(t){var i=(0,g.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,f.Z)(this,e)});function i(){return(0,d.Z)(this,i),r.apply(this,arguments)}return(0,m.Z)(i,null,[{key:"create",value:function(e){var n=(0,p.Z)((0,g.Z)(i),"create",this).call(this);return n.title=e,n.classList.add("composer-emoji"),n.innerHTML=function(e){return v.renderToString((0,N.jsx)(Z.dy,{unified:e,size:20}))}(e),n}}]),i}(w.Quill.import("blots/embed"));ue.blotName="emojiEmbed",ue.tagName="span",w.Quill.register(ue);var de=["bold","italic","link","emojiEmbed"];const me=function(e){var n=e.ticket,t=e.resumeId,r=e.className,c=e.style,o=e.isFetchingMessage,u=(0,Y.k6)(),d=(0,L.d)().setNotify,m=(0,k.Z)(),p=m.isOutside,h=m.ref,f=(0,a.useRef)(),g=(0,a.useState)(null),x=(0,s.Z)(g,2),v=x[0],w=x[1],C=(0,a.useState)(!1),T=(0,s.Z)(C,2),S=T[0],E=T[1],O=(0,a.useState)([]),P=(0,s.Z)(O,2),D=P[0],A=P[1],R=(0,a.useState)(0),B=(0,s.Z)(R,2),Q=B[0],q=B[1],W=(0,a.useState)([]),G=(0,s.Z)(W,2),J=G[0],X=G[1],$=(0,U.useQueryClient)(),K=(0,b.cI)({mode:"onBlur",defaultValues:{message:"",attachments:[]}}),ee=K.handleSubmit,ne=K.watch,te=K.reset,ie=K.control,se=K.formState.isSubmitting,ae=(0,b.Dq)({control:ie,name:"attachments"}),ce=ae.append,oe=ae.remove,ue=ne("message"),me=ne("attachments"),pe=!!ue.replace(/(<([^>]+)>)/gi,"").length,he=(0,U.useMutation)((function(e){return V().post("/chat",e)}),{onSuccess:function(e){var r=e.data;if(r)return function(e){var r=$.getQueryData(["chats",e.ticketId]);r?r.pages[0].items.unshift(e):r={pages:[{total:1,limit:15,page:0,items:[e]}],pageParams:[void 0]},$.setQueryData(["chats",e.ticketId],r),e.ticketId&&"new"===n&&u.replace({pathname:"/resume-review/".concat(e.ticketId),search:"?ref=".concat(t)})}(r),A([]),te()},onError:function(e){e&&e.response&&e.response.data&&e.response.data.error&&400===e.response.data.error.status&&"Ticket has been closed!"===e.response.data.error.message&&$.setQueryData(["reviewTicket",n],(function(e){return le(le({},e),{},{status:"closed"})})),d({type:"danger",heading:"Err!",message:"Failed to send message"})}}),fe=function(){var e=(0,l.Z)(j().mark((function e(r){var i,s,a;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.message&&pe?((i=document.createElement("div")).innerHTML=r.message,(s=i.querySelectorAll("span.composer-emoji"))&&s.length>0&&s.forEach((function(e){e.innerText=e.title})),a=new RegExp("<p><br></p>","g"),r.message=i.innerHTML.replace(a,"")):r.message="",e.abrupt("return",he.mutate(le(le({},r),{},{ticketId:n,resumeId:t})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ge=function(){var e=(0,l.Z)(j().mark((function e(n,t){var r,i,s;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(null),f){e.next=3;break}return e.abrupt("return");case 3:if(r=f.current.editor){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,r.getSelection();case 8:if(i=e.sent){e.next=13;break}return e.next=12,r.insertEmbed(0,"emojiEmbed",n.unified);case 12:return e.abrupt("return",e.sent);case 13:return s=i.index,e.next=16,r.insertEmbed(s,"emojiEmbed",n.unified);case 16:return e.next=18,r.setSelection(s+1);case 18:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),xe=function(){var e=(0,l.Z)(j().mark((function e(n){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:return t={method:"DELETE",url:"/chat/attachments",data:{ids:n}},e.next=5,V().request(t).catch((function(e){d({type:"danger",heading:"Err!",message:"Failed to delete file(s)"})}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){p&&w(null)}),[p]),(0,a.useEffect)((function(){if(0!==J.length){var e=setTimeout((function(){xe(J),X([])}),2e3);return function(){clearTimeout(e)}}}),[J]);var je=function(e,n){ce(e)},ye=function(e,n){var t=me.findIndex((function(n){return n.name===D[e].name}));n&&-1!==t&&(X((function(e){return[].concat((0,i.Z)(e),[me[t]._id])})),oe(t));var r=(0,i.Z)(D);r.splice(e,1),A(r)},we=function(){q((function(e){return 0===e?0:e-1}))},Ze=function(e){w(e),E(!0)};return(0,N.jsx)(a.Fragment,{children:(0,N.jsx)(b.RV,le(le({},K),{},{children:(0,N.jsxs)(ve,{id:"message-box",className:r,hasFiles:D&&D.length>0,style:c,children:[(0,N.jsxs)("div",{id:"toolbar",children:[(0,N.jsxs)("div",{className:"".concat("emoji"===v?"preview-emoji":""," emoji"),ref:h,children:[(0,N.jsx)("button",{className:"insertEmoji toolbar-btn",onClick:function(){return w("emoji"===v?null:"emoji")},children:(0,N.jsx)(M,{size:"18px",color:"rgba(52, 52, 52, 0.4)"})}),(0,N.jsx)("div",{className:"emojipicker",children:(0,N.jsx)(Z.ZP,{onEmojiClick:ge,autoFocusSearch:!1,lazyLoadEmojis:!0,previewConfig:{showPreview:!1},emojiStyle:Z.Ye.GOOGLE,emojiVersion:"0.6",skinTonesDisabled:!0})})]}),(0,N.jsx)("button",{className:"insertImage toolbar-btn",onClick:function(){return Ze("image")},children:(0,N.jsx)(H,{size:"18px",color:"rgba(52, 52, 52, 0.4)"})}),(0,N.jsx)("button",{className:"insertDocument toolbar-btn",onClick:function(){return Ze("attachment")},children:(0,N.jsx)(z,{size:"18px",color:"rgba(52, 52, 52, 0.4)"})}),(0,N.jsx)("button",{className:"ql-bold toolbar-btn"}),(0,N.jsx)("button",{className:"ql-italic toolbar-btn"}),(0,N.jsx)("div",{className:"fetch-indicator",children:o&&(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)(_.$j,{size:"1rem",type:"primary"}),(0,N.jsx)(_.xg,{color:"rgba(240, 132, 56, 1)",children:"Checking"})]})})]}),S&&(0,N.jsx)(be,{children:(0,N.jsx)(F,{setShow:E,setFiles:function(e){q((function(n){return n+e.length})),A((function(n){return[].concat((0,i.Z)(n),(0,i.Z)(e))}))},type:"image"===v?"image":"attachment"})}),(0,N.jsxs)("div",{className:"message-box",children:[(0,N.jsx)(y.Z,{ref:f,placeholder:"Type text here...",name:"message",formats:de,modules:{toolbar:{container:"#toolbar"},clipboard:{matchVisual:!1}}}),D.map((function(e,n){return(0,N.jsx)(re,{file:e,index:n,onSuccess:je,onDone:we,handeRemoveFile:ye},n)})),(0,N.jsx)(I.z,{className:"send-btn",disabled:se||Q>0||!pe&&0===me.length,onClick:ee(fe),children:se?(0,N.jsx)(_.$j,{size:"1rem",type:"primary"}):"Send"})]})]})}))})};var pe,he,fe,ge,xe,je,ve=c.ZP.div(ie||(ie=(0,r.Z)(["\n  margin: 1rem;\n  border: 1px solid rgba(226, 233, 243, 1);\n  border-radius: 6px;\n  position: relative;\n\n  .message-box {\n    min-height: ",";\n    overflow-y: auto;\n    max-height: 100px;\n    .send-btn {\n      position: absolute;\n      bottom: 10px;\n      right: 20px;\n      width: fit-content;\n      padding: 0 1.5rem;\n      min-width: 75px;\n    }\n  }\n  .fetch-indicator {\n    width: auto;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    margin-right: 1rem;\n    p {\n      margin-left: 0.7rem;\n    }\n  }\n  .emoji {\n    display: block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n\n    &.preview-emoji {\n      .emojipicker {\n        display: block;\n      }\n    }\n    .emojipicker {\n      display: none;\n      position: absolute;\n      bottom: 20px;\n      left: -10px;\n      z-index: 1000;\n    }\n  }\n  #toolbar {\n    border: none;\n    border-bottom: 1px solid rgba(226, 233, 243, 1);\n    .toolbar-btn {\n      padding: 3px 10px;\n      width: fit-content;\n    }\n  }\n\n  .quill {\n    background: transparent;\n  }\n  .ql-container {\n    overflow-y: unset;\n  }\n  .ql-editor {\n    .composer-emoji span {\n      position: relative;\n      top: 5px;\n    }\n    /* font-size: 0.8rem; */\n    min-height: ",";\n    p,\n    b,\n    em,\n    i {\n      font-size: 0.875rem;\n    }\n  }\n"])),(function(e){return e.hasFiles?"0px":"100px"}),(function(e){return e.hasFiles?"0px":"100px"})),be=c.ZP.div(se||(se=(0,r.Z)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  background-color: #0000002e;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),ye=t(4371),we=t(653),Ze=t(3434),ke=t(7484),Ne=t.n(ke),Me=t(7912),ze=t(5292),Ce=t(8930),Te=t(7414);function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ie=function(e){var n=e.data,t=e.handleShowResume,r=(0,a.useState)({ticket:!0,customer:!0,resume:!0}),i=(0,s.Z)(r,2),c=i[0],o=i[1];return(0,Y.k6)(),(0,N.jsxs)(Be,{children:[(0,N.jsxs)("div",{children:[(0,N.jsxs)(He,{show:c.ticket,children:[(0,N.jsxs)("div",{className:"head-wrapper",onClick:function(){return o(Ee(Ee({},c),{},{ticket:!c.ticket}))},children:[(0,N.jsx)("p",{className:"acc_heading",children:"Ticket Info"}),(0,N.jsx)("span",{children:(0,N.jsx)(Me.Z,{size:".8rem"})})]}),(0,N.jsxs)("div",{className:"item-wrapper",children:[(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("p",{className:"item-label",children:"Ticket ID"}),(0,N.jsx)("p",{children:n&&n._id||"-"})]}),(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("p",{className:"item-label",children:"Status"}),(0,N.jsx)("p",{className:"capitalize",children:n&&n.status||"-"})]})]})]}),(0,N.jsxs)(He,{show:c.customer,children:[(0,N.jsxs)("div",{className:"head-wrapper",onClick:function(){return o(Ee(Ee({},c),{},{customer:!c.customer}))},children:[(0,N.jsx)("p",{className:"acc_heading",children:"Reviewer Info"}),(0,N.jsx)("span",{children:(0,N.jsx)(Me.Z,{size:".8rem"})})]}),(0,N.jsx)("div",{className:"item-wrapper",children:(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("p",{className:"item-label",children:"Reviewer "}),(0,N.jsx)("p",{children:n&&n.assignedTo&&n.assignedTo.firstName&&(n.assignedTo.firstName+" "+n.assignedTo.lastName||"")||"-"})]})})]})]}),(0,N.jsx)("div",{children:(0,N.jsxs)(He,{show:c.resume,children:[(0,N.jsxs)("div",{className:"head-wrapper",onClick:function(){return o(Ee(Ee({},c),{},{resume:!c.resume}))},children:[(0,N.jsx)("p",{className:"acc_heading",children:"Resume Info"}),(0,N.jsx)("span",{children:(0,N.jsx)(Me.Z,{size:".8rem"})})]}),(0,N.jsxs)("div",{className:"item-wrapper",children:[(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("p",{className:"item-label",children:"Name"}),(0,N.jsx)("p",{children:n&&n.resume&&n.resume.title||"-"})]}),(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("p",{className:"item-label",children:"Date Created"}),(0,N.jsx)("p",{children:n&&n.createdAt&&Ne()(n.createdAt).format("DD/MM/YYYY")||"-"})]}),(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("p",{className:"item-label",children:"Resume Link"}),n&&n.resume&&(0,N.jsx)("a",{onClick:function(){return t(!0)},children:"View Resume"})||"-"]})]})]})})]})};const Oe=function(e){var n=e.data,t=e.isLoading,r=e.isError,i=e.handleShowResume,s=(0,Y.k6)();return(0,N.jsx)(a.Fragment,{children:(0,N.jsxs)(Ue,{className:"hide-scrollbar",children:[(0,N.jsxs)(Qe,{children:[(0,N.jsx)(Ye,{children:(0,N.jsxs)("a",{href:"".concat("https://www.resumemango.com"),children:[(0,N.jsx)("img",{src:Ce.Z,width:"75px"}),(0,N.jsx)("img",{src:Te.Z,width:"125px"})]})}),(0,N.jsx)("p",{children:"All-in-one job hunting platform"}),(0,N.jsx)(I.z,{btnType:"primary",size:"sm",onClick:function(){return s.push("/resumes/new")},children:"Create Resume"})]}),(0,N.jsx)(Ve,{children:r?(0,N.jsxs)("div",{className:"align-center",children:[(0,N.jsx)(ze.Z,{size:"2rem"}),(0,N.jsx)("p",{style:{marginLeft:"0.5rem"},children:"Failed to load ticket details!"})]}):t?(0,N.jsx)("div",{style:{padding:"2.5rem",height:"100%"},children:(0,N.jsxs)(Be,{children:[(0,N.jsxs)(_.ZL,{children:[(0,N.jsx)(_.up,{className:"mb-1"}),(0,N.jsx)(_.NE,{className:"mb"}),(0,N.jsx)(_.NE,{className:"mb"}),(0,N.jsx)(_.NE,{className:"mb"}),(0,N.jsx)(_.NE,{style:{marginBottom:"1rem"}}),(0,N.jsx)(_.up,{className:"mb-1"}),(0,N.jsx)(_.NE,{style:{marginBottom:"5rem"}})]}),(0,N.jsxs)(_.ZL,{children:[(0,N.jsx)(_.up,{className:"mb-1"}),(0,N.jsx)(_.NE,{className:"mb"}),(0,N.jsx)(_.NE,{className:"mb"})]})]})}):(0,N.jsx)(Ie,{data:n,handleShowResume:i})})]})})};var Le,Pe,De,Fe,Ae,Re,Be=c.ZP.div(pe||(pe=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n"]))),He=c.ZP.div(he||(he=(0,r.Z)(["\n  .item-wrapper,\n  .head-wrapper {\n    padding: 0 2.5rem;\n  }\n  .head-wrapper {\n    background: rgba(240, 132, 56, 0.05);\n    height: 40px;\n    color: ",";\n    margin: auto;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    border-right: 3px solid ",";\n    margin-bottom: 1rem;\n    cursor: pointer;\n    p {\n      font-size: 0.875rem;\n      margin: 0;\n      padding: 0;\n    }\n    svg {\n      transition: all ease-in-out 0.5s;\n      transform: ",";\n      path {\n        stroke: ",";\n        stroke-width: 2;\n      }\n    }\n  }\n  .item-wrapper {\n    transition: all ease-in-out 0.5s;\n    height: 100%;\n    max-height: ",";\n    opacity: ",";\n    visibility: ",";\n\n    overflow: hidden;\n    p {\n      margin: 0.3rem 0;\n    }\n    a {\n      color: ",";\n      text-decoration: underline;\n    }\n    .item {\n      margin-bottom: 1rem;\n    }\n    .item-label {\n      font-size: 0.75rem;\n      color: rgba(52, 52, 52, 0.5);\n    }\n  }\n"])),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.show?"rotateZ(360deg)":"rotateZ(180deg)"}),(function(e){return e.theme.colors.primary}),(function(e){return e.show?"1000px":"0px"}),(function(e){return e.show?1:0}),(function(e){return e.show?"visible":"hidden"}),(function(e){return e.theme.colors.primary})),Ue=c.ZP.div(fe||(fe=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  transition: transform ease-in-out 500ms;\n  max-width: 260px;\n  overflow: auto;\n  position: fixed;\n  z-index: 2;\n  border-right: 1px solid #eee;\n"]))),Ye=c.ZP.div(ge||(ge=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n"]))),Qe=c.ZP.div(xe||(xe=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  max-width: 260px;\n  min-height: 175px;\n  max-height: 175px;\n  background: #0f102a;\n  @media (max-height: 800px) {\n    height: auto;\n  }\n\n  p {\n    color: #bababa;\n    margin-top: 0;\n    font-size: 14px;\n  }\n"]))),Ve=c.ZP.nav(je||(je=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: auto;\n  width: 100%;\n  flex: 1;\n  background: #f7f8fa;\n  padding: 2.5rem 0;\n"]))),_e=t(3554),qe=t(9964),We=t(5951),Ge=t(8772),Je=t(2611);t(2150);const Xe=function(e){var n=e.resumeData,t=e.handleShow,r=n.fields||null,i=(0,a.useState)(!1),c=(0,s.Z)(i,2),o=c[0],u=c[1],d=(0,a.useState)(!1),m=(0,s.Z)(d,2),p=m[0],h=m[1],f=(0,a.useState)(!1),g=(0,s.Z)(f,2),x=g[0],v=g[1],b=(0,a.useState)(1),y=(0,s.Z)(b,2),w=y[0],Z=y[1],k=(0,a.useState)(0),M=(0,s.Z)(k,2),z=M[0],C=(M[1],(0,a.useState)(1)),T=(0,s.Z)(C,2),S=T[0],E=T[1],O=(0,qe.S)(),L=O.width,P=O.height,D=!!n.template||!1,F=(0,Je.ZT)(n.template,D),A=F.data,R=F.isLoading,B=F.isError,H=o&&!R&&A&&p&&D,U=(0,a.useRef)(null),Y=function(){var e=(0,l.Z)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,We.h)(A.fonts);case 2:return e.abrupt("return",h(!0));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(D&&A&&A.fonts&&0!==A.fonts)return h(!1),Y(),function(){return h(!0)}}),[A,D]),(0,a.useEffect)((function(){if(document&&D&&!o){var e=document.getElementById("css_style");e&&e.remove();var t=document.createElement("link");t.id="css_style",t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href","".concat("https://api.resumemango.com","/css/resumes/").concat(n.template,".css")),document.head.appendChild(t),t.onload=function(){u(!0)},t.onerror=function(){return console.log("stylesheet could not be loaded")}}}),[o,D]),(0,a.useEffect)((function(){U&&U.current&&A&&(U.current.children[0].style.transform="scale(".concat(1,")"))}),[r,U,A,L,P]),(0,a.useEffect)((function(){if(r&&H){v(!0);var e=setTimeout((function(){if(U&&U.current){var e=U.current.querySelector(".page");if(e){var n=e.children[0];if(n){var t=JSON.parse(JSON.stringify(A));n.innerHTML="";var i=(0,Ge.Z)(t,r,n,z);i&&(Q(Object.keys(i).length),E(1),v(!1))}}}}),500);return function(){return clearTimeout(e)}}}),[r,U.current,H]),(0,a.useEffect)((function(){if(U&&U.current){var e=U.current.querySelector(".page");if(e){var n=e.children[0];n&&(n.style.transform="translateY(-".concat(e.clientHeight*(S-1),"px)"),n.style.height=e.clientHeight*S+"px")}}}),[S,U.current]);var Q=function(e){S>e&&E(e),Z(e)},V=function(e){"prev"===e&&S>1&&S<=w&&E(S-1),"next"===e&&S>=1&&S<w&&E(S+1)};return(0,N.jsxs)(nn,{children:[(0,N.jsx)(en,{children:(0,N.jsx)(I.z,{btnType:"ghost",size:"lg",onClick:function(){return t(!1)},children:"Back to Chats"})}),B?(0,N.jsx)("div",{className:"align-center",style:{height:"90%",flex:1},children:(0,N.jsx)("h3",{children:"Failed to load resume!"})}):(0,N.jsxs)(a.Fragment,{children:[(0,N.jsxs)(tn,{children:[(!H||!r||x||R)&&(0,N.jsx)(Ke,{"data-test-id":"resume_skeleton",children:(0,N.jsx)(_e.Z,{scale:1})}),(0,N.jsx)(rn,{ref:U,style:!H||!r||x||R?{visibility:"hidden"}:{visibility:"visible"},children:(0,N.jsx)("div",{className:"page",children:(0,N.jsx)("div",{style:{width:"100%"}})})})]}),(0,N.jsxs)(sn,{children:[(0,N.jsx)("button",{type:"button",style:{transform:"rotateZ(90deg)"},onClick:function(){return V("prev")},children:(0,N.jsx)(Me.Z,{size:"0.75rem",color:"#fff"})}),(0,N.jsxs)("p",{children:[S," / ",w]}),(0,N.jsx)("button",{type:"button",style:{transform:"rotateZ(270deg)"},onClick:function(){return V("next")},children:(0,N.jsx)(Me.Z,{size:"0.75rem",color:"#fff"})})]})]})]})};var $e,Ke=c.ZP.div(Le||(Le=(0,r.Z)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  padding: 3rem 0 10rem;\n"]))),en=c.ZP.div(Pe||(Pe=(0,r.Z)(["\n  display: flex;\n  padding: 1rem 3rem;\n  justify-content: space-between;\n  top: 0;\n  left: 0;\n  width: 100%;\n  border-bottom: 2px solid #eee;\n  background-color: #fff;\n  z-index: 100;\n"]))),nn=c.ZP.div(De||(De=(0,r.Z)(["\n  display: block;\n  position: relative;\n  height: 100vh;\n  width: 100%;\n  overflow: hidden;\n"]))),tn=c.ZP.div(Fe||(Fe=(0,r.Z)(["\n  display: flex;\n  position: relative;\n  margin: auto;\n  height: 100vh;\n  width: 100%;\n  overflow-y: scroll;\n  padding: 3rem 0 10rem;\n  background-color: #f7f9fc;\n"]))),rn=c.ZP.div(Ae||(Ae=(0,r.Z)(["\n  min-height: 297mm;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n\n  .page {\n    position: relative;\n    box-shadow: 0px 0px 15px 0px #0000000f;\n    border: 1px solid #eee;\n  }\n"]))),sn=c.ZP.div(Re||(Re=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  max-width: 100px;\n  bottom: 10%;\n  z-index: 10;\n  height: 35px;\n  border-radius: 6px;\n  background-color: ",";\n  p {\n    font-weight: 600;\n  }\n  button {\n    padding-left: 0.7rem;\n    padding-right: 0.7rem;\n    svg {\n      path {\n        stroke-width: 1.5;\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.primary}));const an=function(e){var n=e.chat_id,t=e.attachment,r=e.senderType,i=(0,a.useState)(0),c=(0,s.Z)(i,2),o=c[0],u=c[1],d=(0,a.useState)(!1),m=(0,s.Z)(d,2),p=m[0],h=m[1],f=(0,L.d)().setNotify,g=function(){var e=(0,l.Z)(j().mark((function e(n,t){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return h(!0),e.next=5,x(n,t).then((function(e){if(!e||!e.data)return h(!1),f({type:"danger",heading:"Err!",message:"Failed to download attachment!"});var n=window.URL.createObjectURL(new Blob([e.data],{type:e.headers["content-type"]})),t=document.createElement("a");t.href=n;var r=e.headers["content-disposition"]&&e.headers["content-disposition"].split('filename="')[1].split('"')[0]||"attachment";return t.setAttribute("download",r),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(n),h(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),x=function(){var e=(0,l.Z)(j().mark((function e(n,t){var r,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={method:"GET",url:"/chat/attachments",params:{chatId:n,id:t},responseType:"blob",onDownloadProgress:function(e){var n=Math.round(100*e.loaded/e.total);u(n)}},e.prev=1,e.next=4,V().request(i);case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r=null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,N.jsx)(a.Fragment,{children:(0,N.jsxs)(mn,{type:r,className:"".concat(p?"downloading":"idle"),onClick:function(){return g(n,t._id)},children:[(0,N.jsx)("span",{className:"icon ",children:p?(0,N.jsx)(J,{progress:o}):t.mimeType?"image"===t.mimeType.split("/")[0]?(0,N.jsx)(H,{color:"#fff",size:"1.2rem"}):"video"===t.mimeType.split("/")[0]?(0,N.jsx)(K,{color:"#fff",size:"1.2rem"}):(0,N.jsx)(q,{color:"#fff",size:"1.2rem"}):(0,N.jsx)(q,{color:"#fff",size:"1.2rem"})}),(0,N.jsx)("p",{className:"truncate",children:t.name})]})})};var cn,on,ln,un,dn,mn=c.ZP.div($e||($e=(0,r.Z)(["\n  width: 300px;\n  height: 40px;\n  display: grid;\n  grid-template-columns: 40px auto 30px;\n  border: 1px solid\n    ",";\n  border-radius: 6px;\n  margin: 0.5rem 0;\n  overflow: hidden;\n  align-items: center;\n  position: relative;\n  cursor: pointer;\n  background-color: ",";\n  &:before {\n    visibility: hidden;\n    position: absolute;\n    width: 40px;\n    height: 40px;\n    content: '';\n    display: block;\n    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuMi4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIyIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMzQ0IDI0MGgtNTZMMjg3LjEgMTUyYzAtMTMuMjUtMTAuNzUtMjQtMjQtMjRoLTE2QzIzNC43IDEyOCAyMjMuMSAxMzguOCAyMjMuMSAxNTJMMjI0IDI0MGgtNTZjLTkuNTMxIDAtMTguMTYgNS42NTYtMjIgMTQuMzhDMTQyLjIgMjYzLjEgMTQzLjkgMjczLjMgMTUwLjQgMjgwLjNsODguNzUgOTZDMjQzLjcgMzgxLjIgMjUwLjEgMzg0IDI1Ni44IDM4NGM3Ljc4MS0uMzEyNSAxMy4yNS0yLjg3NSAxNy43NS03Ljg0NGw4Ny4yNS05NmM2LjQwNi03LjAzMSA4LjAzMS0xNy4xOSA0LjE4OC0yNS44OFMzNTMuNSAyNDAgMzQ0IDI0MHpNMjU2IDBDMTE0LjYgMCAwIDExNC42IDAgMjU2czExNC42IDI1NiAyNTYgMjU2czI1Ni0xMTQuNiAyNTYtMjU2UzM5Ny40IDAgMjU2IDB6TTI1NiA0NjRjLTExNC43IDAtMjA4LTkzLjMxLTIwOC0yMDhTMTQxLjMgNDggMjU2IDQ4czIwOCA5My4zMSAyMDggMjA4UzM3MC43IDQ2NCAyNTYgNDY0eiIvPjwvc3ZnPg==');\n    background-repeat: no-repeat;\n    background-size: 2rem;\n    background-position: center;\n    background-color: ",";\n    top: 0;\n    left: 0;\n    margin: auto;\n  }\n  .icon {\n    opacity: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 6px;\n    background-color: ",";\n    height: 100%;\n  }\n  &.idle:hover {\n    &:before {\n      visibility: visible;\n    }\n    .icon {\n      opacity: 0;\n    }\n  }\n  .remove {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n  p {\n    margin: 0 0.7rem !important;\n    font-size: 0.8rem;\n  }\n"])),(function(e){return"reviewer"===e.type?"rgba(238, 238, 238, 0.2)":"rgba(52, 52, 52, 0.2)"}),(function(e){return"reviewer"===e.type?"rgba(238, 238, 238, 0.2)":"rgba(52, 52, 52, 0.2)"}),(function(e){return"reviewer"===e.type?"rgba(238, 238, 238, 0.2)":"rgba(52, 52, 52, 0.2)"}),(function(e){return"reviewer"===e.type?"rgba(238, 238, 238, 0.5)":"rgba(52, 52, 52, 0.2)"}));const pn=function(){var e=(0,Ze.Z)(),n=(0,Y.UO)().ticket,t=e.get("ref"),r=e.get("preview"),c=(0,Y.k6)(),l=(0,a.useState)(r||!1),u=(0,s.Z)(l,2),d=u[0],m=u[1],p=(0,ye.W2)({ticket:n}),h=p.data,f=p.isLoading,g=p.isError,x=h&&"open"===h.status||!1,j=(0,U.useInfiniteQuery)(["chats",n],(function(e){var t=e.pageParam,r=void 0===t?0:t;return(0,ye.jF)({ticketId:n,page:r,limit:5})}),{getNextPageParam:function(e,n){if(e.page+1<Math.ceil(e.total/e.limit))return n.length},enabled:"new"!==n&&!r,refetchOnWindowFocus:"new"!==n&&!r&&x,refetchInterval:"new"!==n&&!r&&x?6e4:0}),b=j.isLoading,y=j.isError,w=j.data,k=j.hasNextPage,M=j.fetchNextPage,z=j.isFetching,C=j.isFetchingNextPage,T=w&&w.pages&&w.pages[0]&&w.pages[0].items&&w.pages[0].items.length,S=null==w?void 0:w.pages.length;(0,a.useEffect)((function(){var e=document.getElementById("message-section");if(e){var n=w&&w.pages.length>1&&w.pages[w.pages.length-1];if(n){var t=n.items&&n.items.length>0&&n.items[n.items.length-1];if(t&&t._id){var r=document.getElementById(t._id);r&&(e.scrollTop=null==r?void 0:r.offsetTop)}}}}),[S]),(0,a.useEffect)((function(){return E("first-page-length")}),[T]),(0,a.useEffect)((function(){if(!b){var e=document.getElementById("main-section"),n=document.querySelector("header"),t=document.getElementById("message-box"),r=document.getElementById("message-section");if(e&&n&&t&&r){e.style.maxHeight="100vh",r.style.overflowY="scroll",r.style.height="".concat(e.clientHeight-n.clientHeight-t.clientHeight,"px"),r.focus(),E();var i=setTimeout((function(){r.style.opacity="1",t.style.opacity="1"}),500);return function(){clearTimeout(i)}}}}),[b,r,x]);var E=function(e){if(w&&1===w.pages.length||"first-page-length"===e&&w&&T>w.pages[0].limit){var n=document.getElementById("message-section");if(!n)return;n.scrollTop=n.scrollHeight}},I=function(e){var n=document.createElement("div");n.innerHTML=e;var t=1===n.children.length&&n.children[0],r=20;t&&t.children.length>0&&1===t.children.length&&0===Array.from(t.childNodes).filter((function(e){return 3===e.nodeType})).length&&(r=40);var i=n.querySelectorAll("span.composer-emoji");return i&&i.length>0&&i.forEach((function(e){return e.className="emoji-icon",e.innerHTML=v.renderToString((0,N.jsx)(Z.dy,{unified:e.title,size:r}))})),n.innerHTML},O=function(e){return e?c.replace({search:"?preview=true"}):c.replace({search:""}),m(e)};return(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)(Oe,{data:h,isLoading:f,isError:g,handleShowResume:O}),(0,N.jsx)("div",{children:(0,N.jsx)(fn,{id:"main-section",children:h&&h.resume&&d?(0,N.jsx)(Xe,{resumeData:h.resume,handleShow:O}):(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)(o.Z,{title:"Reviewer Support Chat",customBtns:!0}),y?(0,N.jsx)("div",{className:"align-center",style:{height:"90%",flex:1},children:(0,N.jsx)("h3",{children:"Failed to load chat!"})}):b?(0,N.jsx)(_.u,{style:{height:"90%"},children:(0,N.jsx)(_.$j,{size:"2rem",type:"primary"})}):(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)(gn,{id:"message-section",style:{opacity:0},children:(0,N.jsxs)(xn,{children:[k&&(0,N.jsx)("div",{className:"load-more",children:(0,N.jsx)("a",{onClick:function(){return M()},children:C?(0,N.jsx)(_.xg,{color:"rgba(240, 132, 56, 1)",children:"Loading Messages"}):"Load older messages"})}),w&&w.pages&&(null==w?void 0:w.pages.map(null==w?void 0:w.pages.pop,(0,i.Z)(null==w?void 0:w.pages)).map((function(e,n){return(0,N.jsx)(a.Fragment,{children:e&&e.items&&e.items.length>0&&e.items.map(e.items.pop,(0,i.Z)(e.items)).map((function(e,n){return(0,N.jsx)(jn,{type:e.senderType&&"reviewer"===e.senderType?"reciever":"sender",id:e._id,children:(0,N.jsxs)("div",{className:"message",children:[(0,N.jsx)("p",{className:"label",children:e.senderType&&"reviewer"===e.senderType?"Reviewer":"You"}),(0,N.jsxs)("div",{className:"bubble",children:[e.message&&(0,N.jsx)("div",{children:(0,we.ZP)(I(e.message))}),e.attachments&&e.attachments.length>0&&e.attachments.map((function(n,t){return(0,N.jsx)(a.Fragment,{children:(0,N.jsx)(an,{attachment:n,chat_id:e._id,senderType:e.senderType})},t)}))]})]})},n)}))},n)})))]})}),!h||x?(0,N.jsx)(me,{isFetchingMessage:z&&!C,ticket:n,resumeId:t,style:{opacity:0}}):(0,N.jsxs)(hn,{id:"message-box",children:[(0,N.jsx)("span",{children:(0,N.jsx)(ze.Z,{size:"1.3rem"})}),(0,N.jsx)("p",{children:"Ticket has been closed!"})]})]})]})})})]})};var hn=c.ZP.div(cn||(cn=(0,r.Z)(["\n  margin-top: 2rem;\n  display: flex;\n  height: 50px;\n  justify-content: center;\n  align-items: center;\n  background-color: #eee;\n  span {\n    height: fit-content;\n    margin-right: 0.5rem;\n    margin-top: 0.3rem;\n  }\n  p {\n    text-align: center;\n    margin: 0;\n  }\n"]))),fn=c.ZP.div(on||(on=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  margin-left: 260px;\n  min-height: 100vh;\n  overflow-x: hidden;\n"]))),gn=c.ZP.div(ln||(ln=(0,r.Z)(["\n  display: flex;\n  align-items: flex-end;\n  height: 100%;\n  width: 100%;\n"]))),xn=c.ZP.div(un||(un=(0,r.Z)(["\n  margin-top: auto;\n  padding: 1.5rem 1.5rem 0;\n  height: fit-content;\n  width: 100%;\n  .load-more {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    justify-content: center;\n    border-bottom: 1px solid rgba(52, 52, 52, 0.2);\n    transition: color ease-in-out 0.2s;\n    a {\n      padding: 0.7rem;\n      text-transform: capitalize;\n      &:hover {\n        color: ",";\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.primary})),jn=c.ZP.div(dn||(dn=(0,r.Z)(["\n  width: 100%;\n  display: flex;\n  justify-content: ",";\n  .message {\n    max-width: 50%;\n    width: fit-content;\n  }\n  .label {\n    text-align: ",";\n    margin-bottom: 0.2rem;\n  }\n  .bubble {\n    background-color: #0f102a;\n    background-color: ",";\n    padding: 0.5rem 1rem;\n    border-radius: 6px;\n    color: white;\n    font-size: 0.8rem;\n    p {\n      margin: 0;\n    }\n    .emoji-icon {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      height: fit-content;\n      line-height: 1;\n      position: relative;\n      top: 4px;\n    }\n  }\n"])),(function(e){return"sender"===e.type?"flex-end":"flex-start"}),(function(e){return"sender"===e.type?"end":"start"}),(function(e){return"sender"===e.type?"#F08438":"#0f102a"}))},4371:(e,n,t)=>{"use strict";t.d(n,{jF:()=>d,W2:()=>m,jM:()=>p});var r=t(5987),i=t(5861),s=t(7757),a=t.n(s),c=t(9669),o=t.n(c),l=t(3106),u=["ticketId"],d=function(){var e=(0,i.Z)(a().mark((function e(n){var t,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.ticketId,i=(0,r.Z)(n,u),e.next=3,o().get("/ticket/".concat(t),{params:i});case 3:return s=e.sent,c=s.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(e){var n=e.ticket,t=function(){var e=(0,i.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("/resume-review/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.Z)(["reviewTicket",n],(function(){return t()}),"new"!==n)},p=function(e){var n=function(){var n=(0,i.Z)(a().mark((function n(){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o().get("/resume-review",{params:e});case 2:return t=n.sent,r=t.data,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,l.Z)(["resumeReview",e],(function(){return n()}))}},2611:(e,n,t)=>{"use strict";t.d(n,{Bh:()=>u,VN:()=>d,ZT:()=>m,IE:()=>p});var r=t(5861),i=t(7757),s=t.n(i),a=t(9669),c=t.n(a),o=t(704),l=t(3106),u=function(){return(0,o.Z)("resumeTemplates","/templates/resume")},d=function(e){var n=function(){var n=(0,r.Z)(s().mark((function n(){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("/resume",{params:e});case 2:return t=n.sent,r=t.data,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,l.Z)(["resumes",e],(function(){return n()}))},m=function(e,n){var t=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/templates/resume/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.Z)(["resumeTemplates",e],(function(){return t(e)}),n)},p=function(e,n){var t=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/resume/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.Z)(["resume",e],(function(){return t(e)}),n)}},9557:()=>{}}]);
//# sourceMappingURL=849.bundle.js.map