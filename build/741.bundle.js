"use strict";(self.webpackChunkuser_dashboard=self.webpackChunkuser_dashboard||[]).push([[741],{8741:(e,n,t)=>{t.r(n),t.d(n,{default:()=>vn});var r,i=t(7294),s=t(5977),a=t(9964),o=t(5438),l=t(6044),c=t(168),d=t(5861),u=t(885),p=t(7757),m=t.n(p),f=t(8767),h=t(9163),x=t(3360),g=t(3876),v=t(5893);const y=function(e){var n=e.templateName,t=(0,i.useState)(!1),r=(0,u.Z)(t,2),a=r[0],l=r[1],c=(0,s.k6)(),p=(0,f.useQueryClient)(),h=function(){var e=(0,d.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!1),e.next=3,(0,g.I3)(n,c,p);case 3:return e.sent||l(!0),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){h()}),[]),(0,v.jsx)(i.Fragment,{children:(0,v.jsx)("div",{className:"flex-center h-100",children:a?(0,v.jsxs)(b,{children:[(0,v.jsx)("h2",{children:"Failed to create coverletter."}),(0,v.jsx)(o.z,{btnType:"primary",size:"lg",onClick:function(){return h()},children:"Try Again"})]}):(0,v.jsx)(x.$j,{size:"2.5rem",type:"primary"})})})};var b=h.ZP.div(r||(r=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),j=t(4942),Z=t(2283),w=(t(2150),t(9245)),C=t(5337),E=t(8834),k=t(7561),S=k.Z_().required("first name is required").max(20,"Max 20 characters allowed").min(3,"Min 3 characters required"),_=k.Z_().required("last name is required").max(20,"Max 20 characters allowed").min(3,"Min 3 characters required"),N=k.Z_().email("email is invalid").required("email is required"),P=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,T=k.Z_().test("isValid","Invalid phone number",(function(e){return!e||P.test(e)&&e.length>=6&&e.length<=10})),z=k.Z_().max(50,"Max 50 characters allowed"),D=k.Z_().label("address").max(50,"Max 50 characters allowed"),F=k.Z_().max(50,"Max 50 characters allowed"),O=k.Z_().max(50,"Max 50 characters allowed"),L=k.Z_().test("test_length_greater_than_3000","Max 3000 characters allowed",(function(e){return!e||!(e.replaceAll("<br>","!!!!!!!!!!!!!!!").replace(/(<([^>]+)>)/gi,"").length>3e3)})),R=k.Ry().shape({first_name:S,last_name:_,email_address:N,phone_number:T,designation:z,address:D,company:F,hiring_manager:O,description:L}),A=t(5951);function V(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?V(Object(t),!0).forEach((function(n){(0,j.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var q={title:"",first_name:"",last_name:"",email_address:"",phone_number:"",designation:"",address:"",company:"",hiring_manager:"",description:""},I={data:B(B({},q),{},{id:null}),templateData:null,template:null,step:1,submitSuccess:!1,isSaving:!1,setStep:function(){},setTemplate:function(){},submitCoverletter:function(){},isTemplateReady:!1},M=i.createContext(I);const H=function(e){var n=e.initialData,t=e.templateName,r=e.children,s=(0,i.useState)(!1),a=(0,u.Z)(s,2),o=a[0],l=a[1],c=(0,i.useState)(!1),p=(0,u.Z)(c,2),h=p[0],x=p[1],y=(0,i.useState)("template1"),b=(0,u.Z)(y,2),j=b[0],k=b[1],S=(0,i.useState)(!1),_=(0,u.Z)(S,2),N=_[0],P=_[1],T=(0,i.useState)(!1),z=(0,u.Z)(T,2),D=z[0],F=z[1],O=(0,i.useState)(1),L=(0,u.Z)(O,2),V=L[0],I=L[1],H=(0,i.useState)(!1),$=(0,u.Z)(H,2),G=$[0],X=$[1],J=(0,w.d)().setNotify,U=(0,f.useQueryClient)(),Q=(0,Z.cI)({mode:"onChange",defaultValues:q,criteriaMode:"all",resolver:(0,E.X)(R)}),W=(0,C.xB)(j,N&&!!t),Y=W.data,K=W.isLoading,ee=(W.isError,Q.handleSubmit),ne=Q.watch,te=Q.reset,re=Q.trigger,ie=Q.setValue,se=Q.formState,ae=se.isValid,oe=se.isDirty;(0,i.useEffect)((function(){if(n){n.template&&k(n.template);var e=n.fields;if(e){var t={title:n.title||"Untitled",first_name:e.first_name||"",last_name:e.last_name||"",email_address:e.email_address||"",phone_number:e.phone_number||"",designation:e.designation||"",address:e.address||"",company:e.company||"",hiring_manager:e.hiring_manager||"",description:e.description||""};te(t,{keepDirty:!0,keepIsValid:!0,keepErrors:!0}),P(!0)}}}),[n]),(0,i.useEffect)((function(){l(!1)}),[j]);var le=function(){var e=(0,d.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.h)(Y.fonts);case 2:return e.abrupt("return",x(!0));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){if(N&&Y&&Y.fonts&&0!==Y.fonts)return x(!1),le(),function(){return x(!0)}}),[Y,N]),(0,i.useEffect)((function(){if(document&&N&&!o){var e=document.getElementById("css_style");e&&e.remove();var n=document.createElement("link");return n.id="css_style",n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","".concat("https://api.resumemango.com","/css/coverletters/").concat(j,".css")),n.onload=function(){l(!0)},n.onerror=function(){return console.log("stylesheet could not be loaded")},document.head.appendChild(n),function(){l(!0)}}}),[o,N]);var ce=ne(),de=!!ce.description.replace(/(<([^>]+)>)/gi,"").length;(0,i.useEffect)((function(){!de&&oe&&ie("description","")}),[ce.description]);var ue=function(){var e=(0,d.Z)(m().mark((function e(t,r){var i,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(){var e=(0,d.Z)(m().mark((function e(r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.T3)(j,t,n,r,ne,te,F,J,U);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r){e.next=5;break}if(re(),ae){e.next=5;break}return e.abrupt("return",J({type:"warning",heading:"Invalid fields!",message:"Valid fields are required to proceed"}));case 5:if(!oe&&n.template===j){e.next=12;break}return X(!0),e.next=9,ee(i)();case 9:X(!1),e.next=17;break;case 12:return X(!0),s=ce.first_name,e.next=16,(0,g.dG)(s,n._id,t,J);case 16:X(!1);case 17:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,v.jsx)(M.Provider,{value:{data:B(B({},ce),{},{id:n?n._id:null}),isTemplateReady:o&&!K&&Y&&h&&N,templateData:Y,submitSuccess:D,setTemplate:k,template:j,submitCoverletter:ue,step:V,setStep:I,isSaving:G},children:(0,v.jsx)(Z.RV,B(B({},Q),{},{children:r}))})};var $,G,X=function(){var e=i.useContext(M);return{data:e.data,isTemplateReady:e.isTemplateReady,templateData:e.templateData,setTemplate:e.setTemplate,template:e.template,submitCoverletter:e.submitCoverletter,submitSuccess:e.submitSuccess,step:e.step,setStep:e.setStep,isSaving:e.isSaving}},J=t(2566),U=t(7723),Q=t(1757),W=t(5934),Y=t(2537);const K=function(){var e=X().data,n=(0,i.useState)(""),t=(0,u.Z)(n,2),r=t[0],s=t[1],a=(0,Z.Gc)().setValue;return(0,i.useEffect)((function(){s(e.title)}),[e.title]),(0,i.useEffect)((function(){var e=setTimeout((function(){a("title",r,{shouldDirty:!0})}),300);return function(){return clearTimeout(e)}}),[r]),(0,v.jsxs)(i.Fragment,{children:[(0,v.jsxs)(ne,{children:[(0,v.jsx)("input",{name:"title",placeholder:"Untitled",value:r,onChange:function(e){return function(e){e.target.value.length>30?s(e.target.value.substring(0,30)):s(e.target.value)}(e)},spellCheck:!1,autoComplete:"off"}),(0,v.jsx)("p",{id:"mask",children:r})]}),(0,v.jsx)("h2",{children:"Primary Details"}),(0,v.jsxs)(ee,{className:"mb-3",children:[(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"first_name",label:"First Name"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"last_name",label:"Last Name"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"email_address",label:"Email address"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"phone_number",label:"Phone number"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"designation",label:"Designation"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"address",label:"Address"})})]}),(0,v.jsx)("h2",{children:"Company Details"}),(0,v.jsxs)(ee,{className:"mb-3",children:[(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"company",label:"Company Name"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"hiring_manager",label:"Hiring manager name"})})]})]})};var ee=h.ZP.div($||($=(0,c.Z)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 1.5rem;\n"]))),ne=h.ZP.div(G||(G=(0,c.Z)(["\n  overflow: hidden;\n  max-width: 100%;\n  position: relative;\n  top: -20px;\n  margin: 1rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  input {\n    background-color: transparent;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0px;\n    top: 0px;\n    padding: 0px;\n    margin: 0px;\n    border: none;\n    font-size: 2rem;\n    text-align: center;\n    z-index: 1;\n    color: #555;\n  }\n  input:focus {\n    color: #343434;\n  }\n  input:hover ~ p:after,\n  input:focus ~ p:after {\n    background-color: ",";\n  }\n\n  p {\n    height: 100%;\n    position: relative;\n    width: fit-content;\n    font-size: 2rem;\n    text-align: center;\n    margin: 0;\n    color: transparent;\n    &:after {\n      content: '';\n      display: flex;\n      height: 2px;\n      z-index: 100;\n      bottom: -10px;\n      width: 100%;\n      background-color: transparent;\n    }\n  }\n"])),(function(e){return e.theme.colors.primary})),te=t(2201);const re=function(){var e=(0,Z.Gc)().formState.errors;return(0,v.jsx)(i.Fragment,{children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)("h2",{children:"Letter Details"}),(0,v.jsx)("p",{className:"mb-3",children:"3â€“4 paragraphs explaining why you're the perfect candidate for a specific job"}),(0,v.jsx)(te.Z,{name:"description"}),e.description&&(0,v.jsx)(W.dp,{style:{marginTop:"0.5rem"},children:e.description.message})]})})};var ie,se,ae,oe,le=t(5292);const ce=function(e){var n=e.step,t=e.setStep,r=e.max,s=(0,i.useState)(!1),l=(0,u.Z)(s,2),c=l[0],d=l[1],p=X(),m=p.submitCoverletter,f=p.submitSuccess,h=(0,a.S)().width>1300?"lg":"sm",g=(0,Z.Gc)().formState,y=g.isSubmitting,b=g.isDirty,j=g.isValid;return(0,i.useEffect)((function(){var e=setTimeout((function(){c&&(b&&m(null,2===n),d(!1))}),1e3);return function(){return clearTimeout(e)}}),[c]),(0,v.jsx)(i.Fragment,{children:(0,v.jsxs)(ge,{children:[1===n?(0,v.jsx)(K,{}):2===n?(0,v.jsx)(re,{}):null,(0,v.jsxs)(W.Mf,{children:[(0,v.jsx)(o.z,{type:"button",btnType:"ghost",size:h,color:"#343434",onClick:function(){return n>1&&t((function(e){return e-1}))},style:{marginRight:"1rem"},children:1===n?"Cancel":"Previous"}),(0,v.jsx)(o.z,{type:"button",btnType:"primary",size:h,onClick:function(){return n<r&&t((function(e){return e+1})),d(!0)},disabled:(y||!j||!b||c)&&2===n,children:2===n?"Save Changes":"Next"})]}),(0,v.jsx)(U.Z,{in:y&&j,timeout:{enter:200,exit:5e3},children:(0,v.jsx)(ve,{"data-test-id":"save-loader",children:y?(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(x.$j,{type:"primary",size:"1.5rem"}),(0,v.jsx)(ye,{color:"#f08438",children:"Saving"})]}):f?(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(Q.Z,{size:"1.5rem",color:"#f08438"}),(0,v.jsx)("p",{style:{color:"#f08438",margin:"0 0.7rem"},children:"Saved"})]}):(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(le.Z,{size:"1.5rem",color:"#f08438"}),(0,v.jsx)("p",{style:{color:"#f08438",margin:"0 0.7rem"},children:"Failed"})]})})})]})})};var de,ue,pe,me,fe,he,xe,ge=h.ZP.div(ie||(ie=(0,c.Z)(["\n  padding: 2.75rem;\n  max-width: 900px;\n  margin: auto;\n"]))),ve=h.ZP.div(se||(se=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: fit-content;\n  padding: 0 0.5rem;\n  height: 50px;\n  min-width: 50px;\n  transition: ease 300ms;\n  background-color: #fff;\n  border-radius: 1rem;\n  box-shadow: 4px 0px 20px 0px #ddd;\n  border: 1px solid #eee;\n  position: absolute;\n  left: 40px;\n  bottom: 40px;\n  opacity: 0;\n  visibility: hidden;\n\n  &.enter-done,\n  &.enter-active,\n  &.exit-active {\n    opacity: 1;\n    visibility: visible;\n  }\n  &.exit-done {\n    opacity: 0;\n    visibility: hidden;\n  }\n"]))),ye=h.ZP.p(oe||(oe=(0,c.Z)(["\n  display: inline-flex;\n  margin: 0 0.7rem;\n  color: ",";\n  &:after {\n    content: '.';\n    margin-left: 0.1rem;\n    animation: ","\n      1s steps(5, end) infinite;\n  }\n"])),(function(e){var n=e.theme;return e.color||n.colors.dark}),(function(e){var n=e.theme;return function(e){return(0,h.F4)(ae||(ae=(0,c.Z)(["\n   0%, 20% {\n    color: rgba(0,0,0,0);\n    text-shadow:\n      .25em 0 0 rgba(0,0,0,0),\n      .5em 0 0 rgba(0,0,0,0);}\n  40% {\n    color: ",";\n    text-shadow:\n      .25em 0 0 rgba(0,0,0,0),\n      .5em 0 0 rgba(0,0,0,0);}\n  60% {\n    text-shadow:\n      .25em 0 0 ",",\n      .5em 0 0 rgba(0,0,0,0);}\n  80%, 100% {\n    text-shadow:\n      .25em 0 0 ",",\n      .5em 0 0 ",";\n    }\n    \n"])),e,e,e,e)}(e.color||n.colors.dark)})),be=t(2136),je=t(7912),Ze=t(5970),we=t(2434),Ce=t(8772),Ee=t(3554);const ke=function(e){var n=e.isDataLoading,t=(0,i.useRef)(null),r=(0,i.useState)(1),o=(0,u.Z)(r,2),l=o[0],c=o[1],d=(0,i.useState)(1),p=(0,u.Z)(d,2),m=p[0],f=p[1],h=(0,i.useState)(0),g=(0,u.Z)(h,2),y=g[0],b=g[1],j=(0,i.useState)(!1),w=(0,u.Z)(j,2),C=w[0],E=w[1],k=(0,i.useState)(!1),S=(0,u.Z)(k,2),_=S[0],N=S[1],P=(0,a.S)(),T=P.width,z=P.height,D=(0,s.k6)(),F=X(),O=F.data,L=F.templateData,R=F.isTemplateReady,A=F.submitCoverletter,V=F.isSaving,B=(0,Z.Gc)().formState,q=B.isSubmitting,I=B.isValid;(0,i.useEffect)((function(){V&&E(!1)}),[V]);var M=T>=1500?.6:T/1920,H=M>=.7?50*M:-60*M;(0,i.useEffect)((function(){var e=function(e,n){if(e&&e.current){var t=e.current.children[0];t.style.transform="scale(".concat(n,")"),e.current.style.width=t.getBoundingClientRect().width+"px",e.current.style.height=t.getBoundingClientRect().height+"px";var r=t.clientWidth*(n-1)/2,i=t.clientHeight*(n-1)/2;t.style.transform="translate3d(".concat(r,"px, ").concat(i,"px, 0px) scale(").concat(n,")");var s=document.createElement("div");s.className="dummybuff",s.style.height="50px",s.style.transform="scale(".concat(n,")"),s.style.visibility="hidden",s.style.position="absolute",s.style.opacity="0",document.body.appendChild(s);var a=s.getBoundingClientRect().height;return{dummyBufferEl:s,bufferHeight:a}}}(t,M);e&&(e.bufferHeight&&b(e.bufferHeight),e.dummyBufferEl&&document.body.removeChild(e.dummyBufferEl))}),[t.current,T,z]),(0,i.useEffect)((function(){if(O&&!q&&R&&0!==y){var e=setTimeout((function(){if(t&&t.current){var e=t.current.querySelector(".page");if(e){var n=e.children[0];if(n){var r=JSON.parse(JSON.stringify(L));n.innerHTML="";var i=(0,Ce.Z)(r,O,n,y);i&&($(Object.keys(i).length),_||N(!0))}}}}),500);return function(){return clearTimeout(e)}}}),[O,t,R,y]),(0,i.useEffect)((function(){if(t&&t.current){var e=t.current.querySelector(".page");if(e){var n=e.children[0];n&&(n.style.transform="translateY(-".concat(e.clientHeight*(m-1),"px)"),n.style.height=e.clientHeight*m+"px")}}}),[m,t.current]);var $=function(e){m>e&&f(e),c(e)},G=function(e){"prev"===e&&m>1&&m<=l&&f(m-1),"next"===e&&m>=1&&m<l&&f(m+1)};return(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(Le,{"data-test-id":"preview-skeleton",style:!n&&O&&R&&_?{visibility:"hidden"}:{visibility:"visible"},children:T?(0,v.jsx)(Ee.Z,{style:{position:"absolute",marginTop:0,top:"".concat(H,"px")},scale:M}):null}),(0,v.jsxs)(Pe,{children:[(0,v.jsx)(De,{ref:t,children:(0,v.jsx)("div",{className:"page",children:(0,v.jsx)("div",{style:{width:"100%"}})})}),(0,v.jsxs)(Te,{className:"template_footer ".concat(!n&&O&&R&&_?"":"invisible"),children:[(0,v.jsx)("div",{children:(0,v.jsxs)(Oe,{type:"button",btnType:"ghost",color:"#F08438",size:"lg",style:{justifyContent:"space-around"},disabled:q,onClick:function(){return D.push("/coverletters/preview/".concat(O.id))},children:[(0,v.jsx)(be.Z,{size:T<1300?"0.8rem":"1rem"}),"Change template"]})}),(0,v.jsxs)(ze,{children:[(0,v.jsx)("button",{type:"button",style:{transform:"rotateZ(90deg)"},onClick:function(){return G("prev")},children:(0,v.jsx)(je.Z,{size:"0.75rem"})}),(0,v.jsxs)("p",{children:[m,"Â /Â ",l]}),(0,v.jsx)("button",{type:"button",style:{transform:"rotateZ(270deg)"},onClick:function(){return G("next")},children:(0,v.jsx)(je.Z,{size:"0.75rem"})})]}),(0,v.jsx)("div",{children:(0,v.jsxs)(Fe,{vertical:"top",horizontal:"left",show:C,setShow:E,disabled:V||!I||q,children:[(0,v.jsx)(Ze.Z.Button,{children:(0,v.jsx)(i.Fragment,{children:V?(0,v.jsxs)(i.Fragment,{children:["Downloading ",(0,v.jsx)(x.$j,{size:"1rem"})]}):(0,v.jsxs)(i.Fragment,{children:["Download ",(0,v.jsx)(we.Z,{})," ",(0,v.jsx)(je.Z,{})]})})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return A("pdf")},children:"Download PDF"})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return A("docx")},children:"Export to DOCX"})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return A("txt")},children:"Export to TXT"})})]})})]})]})]})};var Se,_e,Ne,Pe=h.ZP.div(de||(de=(0,c.Z)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  margin: auto;\n"]))),Te=h.ZP.div(ue||(ue=(0,c.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 1.5rem;\n"]))),ze=h.ZP.div(pe||(pe=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  p {\n    font-weight: 600;\n  }\n  button {\n    padding-left: 0.5rem;\n    padding-right: 0.5rem;\n    svg {\n      path {\n        stroke-width: 1.5;\n      }\n    }\n  }\n"]))),De=h.ZP.div(me||(me=(0,c.Z)(["\n  display: block;\n  position: relative;\n"]))),Fe=(0,h.ZP)(Ze.Z)(fe||(fe=(0,c.Z)(["\n  button {\n    background: rgba(240, 132, 56, 1);\n    color: #fff;\n    height: 40px;\n    width: 150px;\n    display: flex;\n    justify-content: space-around;\n    padding: 0 1rem;\n    border-radius: 6px;\n    @media (max-width: 1300px) {\n      height: 32px;\n      font-size: 0.75rem;\n      width: 120px;\n    }\n    svg {\n      path {\n        stroke: #fff;\n      }\n    }\n    &:disabled {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.theme.colors.grey})),Oe=(0,h.ZP)(o.z)(he||(he=(0,c.Z)(["\n  @media (max-width: 1300px) {\n    height: 32px;\n    font-size: 0.75rem;\n    width: 120px;\n  }\n"]))),Le=h.ZP.div(xe||(xe=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: auto;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  background: #f7f9fc;\n"]))),Re=t(1239),Ae=t(732),Ve=t(6527);const Be=function(e){var n=e.isLoading,t=X(),r=t.data,s=t.step,a=t.setStep,o=(0,Ve.Z)(!1),l=o.showExitPrompt,c=o.setShowExitPrompt,d=(0,Z.Gc)().formState,u=d.errors,p=d.isDirty,m=d.isValid,f=d.isSubmitting,h=!!(u.first_name||u.last_name||u.phone_number||u.email_address||u.address||u.designation||u.company||u.hiring_manager),x=!!u.description,g=!(!(r.first_name&&r.last_name&&r.email_address)||h),y=!x;(0,i.useEffect)((function(){return function(){c(!1)}}),[]),(0,i.useEffect)((function(){c(!(!p&&m&&!f))}),[p,f,m]);var b=r&&r.id?["/coverletters/preview/".concat(r.id)]:[];return(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(Ae.Z,{show:l,setShow:c,exludedPaths:b}),(0,v.jsxs)(Ke,{children:[(0,v.jsxs)(J.Z,{max:2,current:s,backRoute:"/coverletters",children:[(0,v.jsx)(J.Z.Step,{name:"Personal Info",isValid:g,isError:h,onClick:function(){return a(1)}}),(0,v.jsx)(J.Z.Step,{name:"Letter Body",isValid:y,isError:x,onClick:function(){return a(2)}})]}),(0,v.jsxs)("form",{id:"coverLetterForm",style:{overflow:"hidden"},children:[(0,v.jsx)(en,{children:n||!r?(0,v.jsx)(Re.Z,{}):(0,v.jsx)(ce,{step:s,setStep:a,max:2})}),(0,v.jsx)(nn,{children:(0,v.jsx)(ke,{isDataLoading:n})})]})]})]})};var qe,Ie,Me,He,$e,Ge,Xe,Je,Ue,Qe,We,Ye,Ke=h.ZP.div(Se||(Se=(0,c.Z)(["\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding-top: 7rem;\n"]))),en=h.ZP.div(_e||(_e=(0,c.Z)(["\n  height: 100%;\n  width: 50%;\n  margin-right: 50%;\n  overflow-y: scroll;\n  &::-webkit-scrollbar {\n    width: 0;\n  }\n"]))),nn=h.ZP.div(Ne||(Ne=(0,c.Z)(["\n  background-color: #f7f9fc;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  height: 100%;\n  position: fixed;\n  width: 50%;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  overflow-y: scroll;\n  padding-top: 7rem;\n  @media (max-width: 1500px) {\n    padding-bottom: 2rem;\n    padding-top: 9rem;\n  }\n"]))),tn=t(9029);const rn=function(e){var n=e.isLoading,t=(0,i.useState)(!1),r=(0,u.Z)(t,2),l=r[0],c=r[1],d=(0,i.useState)(!1),p=(0,u.Z)(d,2),m=p[0],f=p[1],h=(0,i.useState)(1),g=(0,u.Z)(h,2),y=g[0],b=g[1],j=(0,i.useState)(1),w=(0,u.Z)(j,2),E=w[0],k=w[1],S=(0,i.useState)(0),_=(0,u.Z)(S,2),N=_[0],P=_[1],T=(0,a.S)(),z=T.width,D=T.height,F=(0,s.k6)(),O=X(),L=O.data,R=O.isTemplateReady,A=O.template,V=O.templateData,B=O.setTemplate,q=O.submitCoverletter,I=O.isSaving,M=(0,C.Kj)(),H=M.data,$=M.isLoading,G=M.isError,J=(0,i.useRef)(null),U=(0,Z.Gc)().formState.isValid,Q=z>=1920?1.15:z<=1080?1.4*z/1920:1.15*z/1920;(0,i.useEffect)((function(){if(J&&J.current&&V){var e=J.current.children[0];e.style.transform="scale(".concat(Q,")"),J.current.style.width=e.getBoundingClientRect().width+"px",J.current.style.height=e.getBoundingClientRect().height+"px";var n=e.clientWidth*(Q-1)/2,t=e.clientHeight*(Q-1)/2;e.style.transform="translate3d(".concat(n,"px, ").concat(t,"px, 0px) scale(").concat(Q,")");var r=document.createElement("div");r.style.height="50px",r.style.transform="scale(".concat(Q,")"),r.style.visibility="hidden",r.style.position="absolute",r.style.opacity="0",document.body.appendChild(r);var i=r.getBoundingClientRect().height;P(i),document.body.removeChild(r)}}),[L,J,V,H,z,D]),(0,i.useEffect)((function(){if(L&&H&&!I&&!$&&R&&0!==N){f(!0);var e=setTimeout((function(){if(J&&J.current){var e=document.querySelector(".rhs_wrapper");e&&e.scrollTo(0,0);var n=J.current.querySelector(".page");if(n){var t=n.children[0];if(t){var r=JSON.parse(JSON.stringify(V));t.innerHTML="";var i=(0,Ce.Z)(r,L,t,N);i&&(W(Object.keys(i).length),k(1),f(!1))}}}}),500);return function(){return clearTimeout(e)}}}),[L,J,$,H,R,I,N]),(0,i.useEffect)((function(){if(J&&J.current){var e=J.current.querySelector(".page");if(e){var n=e.children[0];n&&(n.style.transform="translateY(-".concat(e.clientHeight*(E-1),"px)"),n.style.height=e.clientHeight*E+"px")}}}),[E,J.current]),(0,i.useEffect)((function(){I&&c(!1)}),[I]);var W=function(e){E>e&&k(e),b(e)},Y=function(e){"prev"===e&&E>1&&E<=y&&k(E-1),"next"===e&&E>=1&&E<y&&k(E+1)};return(0,v.jsxs)(i.Fragment,{children:[(0,v.jsxs)(un,{children:[(0,v.jsx)(o.z,{btnType:"ghost",size:"lg",onClick:function(){return F.push("/coverletters/edit/".concat(L.id))},children:"Back to Editor"}),(0,v.jsx)("div",{children:!G&&!$&&(0,v.jsxs)(fn,{vertical:"bottom",horizontal:"left",show:l,setShow:c,disabled:I||!U,children:[(0,v.jsx)(Ze.Z.Button,{children:(0,v.jsx)(i.Fragment,{children:I?(0,v.jsxs)(i.Fragment,{children:["Downloading ",(0,v.jsx)(x.$j,{size:"1rem"})]}):(0,v.jsxs)(i.Fragment,{children:["Download ",(0,v.jsx)(tn.Z,{})]})})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return q("pdf")},children:"Download PDF"})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return q("docx")},children:"Export to DOCX"})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return q("txt")},children:"Export to TXT"})})]})})]}),G?(0,v.jsx)("div",{className:"align-center",style:{height:"40vh"},children:(0,v.jsx)("h3",{children:"Failed to load design!"})}):(0,v.jsxs)(sn,{children:[(0,v.jsx)(on,{children:(0,v.jsx)(pn,{"data-test-id":"coverletter-templates",children:H&&H.map((function(e,n){return(0,v.jsxs)(mn,{active:A===e.name,"data-test-id":A===e.name?"active-template":"inactive-template",children:[(0,v.jsx)("div",{onClick:function(){return n=e.name,void(I||B(n));var n},children:(0,v.jsx)("img",{src:e.thumbnail,alt:""})}),(0,v.jsx)("p",{children:e.name})]},n)}))})}),(0,v.jsx)(ln,{children:(0,v.jsxs)(cn,{className:"rhs_wrapper",children:[(0,v.jsxs)(dn,{children:[(0,v.jsx)("button",{type:"button",style:{transform:"rotateZ(90deg)"},onClick:function(){return Y("prev")},children:(0,v.jsx)(je.Z,{size:"0.75rem",color:"#fff"})}),(0,v.jsxs)("p",{children:[E,"Â /Â ",y]}),(0,v.jsx)("button",{type:"button",style:{transform:"rotateZ(270deg)"},onClick:function(){return Y("next")},children:(0,v.jsx)(je.Z,{size:"0.75rem",color:"#fff"})})]}),(0,v.jsxs)(hn,{children:[(!R||n||!L||m||$)&&(0,v.jsx)(an,{"data-test-id":"coverletter-skeleton",children:(0,v.jsx)(Ee.Z,{scale:Q})}),(0,v.jsx)(xn,{ref:J,style:!R||n||!L||m||$?{visibility:"hidden"}:{visibility:"visible"},children:(0,v.jsx)("div",{className:"page",children:(0,v.jsx)("div",{style:{width:"100%"}})})})]})]})})]})]})};var sn=h.ZP.div(qe||(qe=(0,c.Z)(["\n  background-color: #fff;\n  display: grid;\n  grid-template-columns: minmax(400px, 500px) auto;\n  height: 100%;\n  @media (max-width: 1080px) {\n    grid-template-columns: 30% 70%;\n  }\n"]))),an=h.ZP.div(Ie||(Ie=(0,c.Z)(["\n  position: absolute;\n  z-index: 1;\n"]))),on=h.ZP.div(Me||(Me=(0,c.Z)(["\n  height: 100%;\n  max-height: 100vh;\n  padding: 7rem 2rem 3rem;\n  overflow-y: auto;\n  @media (max-width: 1080px) {\n    padding: 7rem 0 3rem;\n  }\n"]))),ln=h.ZP.div(He||(He=(0,c.Z)(["\n  background-color: #f7f9fc;\n  user-select: none;\n  max-height: 100vh;\n  overflow: hidden;\n  position: relative;\n"]))),cn=h.ZP.div($e||($e=(0,c.Z)(["\n  display: flex;\n  padding: 7rem 2rem 3rem;\n  height: 100%;\n  width: 100%;\n  margin: 0 auto;\n  overflow: scroll;\n"]))),dn=h.ZP.div(Ge||(Ge=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  max-width: 100px;\n  bottom: 10%;\n  z-index: 10;\n  height: 35px;\n  border-radius: 6px;\n  background-color: ",";\n  p {\n    font-weight: 600;\n  }\n  button {\n    padding-left: 0.7rem;\n    padding-right: 0.7rem;\n    svg {\n      path {\n        stroke-width: 1.5;\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.primary})),un=h.ZP.div(Xe||(Xe=(0,c.Z)(["\n  display: flex;\n  padding: 1rem 3rem;\n  justify-content: space-between;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  border-bottom: 2px solid #eee;\n  background-color: #fff;\n  z-index: 100;\n"]))),pn=h.ZP.div(Je||(Je=(0,c.Z)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 1rem;\n  padding: 0 2rem;\n  max-width: 450px;\n  margin: auto;\n  @media (max-width: 1080px) {\n    grid-template-columns: repeat(1, 1fr);\n  }\n"]))),mn=h.ZP.div(Ue||(Ue=(0,c.Z)(["\n  div {\n    display: flex;\n    width: 100%;\n    min-height: 250px;\n    background-color: #f7f7f7;\n    outline-style: solid;\n    outline-color: #eee;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all ease-in-out 150ms;\n    overflow: hidden;\n    /* box-shadow: 5px 5px 10px 0px #00000012; */\n    outline-width: ",";\n    outline-color: ",";\n    img {\n      width: 100%;\n    }\n  }\n  p {\n    font-size: 1rem;\n    color: ",";\n    font-weight: 600;\n    text-align: center;\n    text-transform: capitalize;\n    transition: all ease-in-out 150ms;\n  }\n  &:hover {\n    div {\n      outline-width: 5px;\n      outline-color: ",";\n    }\n    p {\n      color: ",";\n    }\n  }\n"])),(function(e){return e.active?"2px":"1px"}),(function(e){var n=e.theme;return e.active&&n.shades.primary[2]}),(function(e){var n=e.theme;return e.active&&n.colors.primary}),(function(e){return e.theme.shades.primary[2]}),(function(e){return e.theme.colors.primary})),fn=(0,h.ZP)(Ze.Z)(Qe||(Qe=(0,c.Z)(["\n  button {\n    background: rgba(240, 132, 56, 1);\n    color: #fff;\n    height: 40px;\n    width: 150px;\n    display: flex;\n    justify-content: space-around;\n    padding: 0 1rem;\n    border-radius: 6px;\n    svg {\n      path {\n        stroke: #fff;\n      }\n    }\n    &:disabled {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.theme.colors.grey})),hn=h.ZP.div(We||(We=(0,c.Z)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  margin: auto;\n"]))),xn=h.ZP.div(Ye||(Ye=(0,c.Z)(["\n  display: block;\n  position: relative;\n  box-shadow: 0px 0px 15px 0px #0000000f;\n  border: 1px solid #eee;\n  border-radius: 10px;\n  overflow: hidden;\n"])));const gn=function(e){var n=e.type,t=e.id,r=e.width,s=(0,C.V5)(t,r>768),a=s.data,o=s.isError,l=s.isLoading;return(0,v.jsx)(i.Fragment,{children:o?(0,v.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,v.jsx)("h3",{children:"Failed to load design!"})}):(0,v.jsx)(H,{initialData:a,templateName:"template1",children:"preview"===n?(0,v.jsx)(rn,{isLoading:l}):"edit"===n?(0,v.jsx)(Be,{isLoading:l}):null})})},vn=function(){var e=(0,s.UO)(),n=e.id,t=e.type,r=(0,a.S)().width,c=(0,s.k6)();return(0,v.jsx)(i.Fragment,{children:r<768&&0!==r?(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"90%"},children:[(0,v.jsx)("h3",{style:{textAlign:"center"},children:"Builder not available, Please visit desktop site..."}),(0,v.jsx)(o.z,{btnType:"primary",size:"lg",style:{width:"fit-content",padding:"0 1rem",marginTop:"1rem"},onClick:function(){return c.push("/")},children:"Back to Dashboard"})]}):r>=768?(0,v.jsx)(i.Fragment,{children:"new"===t?(0,v.jsx)(y,{templateName:n}):-1!==["edit","preview"].indexOf(t)?(0,v.jsx)(gn,{type:t,id:n,width:r}):(0,v.jsx)(l.default,{})}):null})}},7723:(e,n,t)=>{t.d(n,{Z:()=>u});var r=t(7462),i=t(3366),s=t(4578);function a(e,n){return e.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}t(5697);var o=t(7294),l=t(660),c=function(e,n){return e&&n&&n.split(" ").forEach((function(n){return r=n,void((t=e).classList?t.classList.remove(r):"string"==typeof t.className?t.className=a(t.className,r):t.setAttribute("class",a(t.className&&t.className.baseVal||"",r)));var t,r}))},d=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(n=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(e,t){var r=n.resolveArguments(e,t),i=r[0],s=r[1];n.removeClasses(i,"exit"),n.addClass(i,s?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(e,t)},n.onEntering=function(e,t){var r=n.resolveArguments(e,t),i=r[0],s=r[1]?"appear":"enter";n.addClass(i,s,"active"),n.props.onEntering&&n.props.onEntering(e,t)},n.onEntered=function(e,t){var r=n.resolveArguments(e,t),i=r[0],s=r[1]?"appear":"enter";n.removeClasses(i,s),n.addClass(i,s,"done"),n.props.onEntered&&n.props.onEntered(e,t)},n.onExit=function(e){var t=n.resolveArguments(e)[0];n.removeClasses(t,"appear"),n.removeClasses(t,"enter"),n.addClass(t,"exit","base"),n.props.onExit&&n.props.onExit(e)},n.onExiting=function(e){var t=n.resolveArguments(e)[0];n.addClass(t,"exit","active"),n.props.onExiting&&n.props.onExiting(e)},n.onExited=function(e){var t=n.resolveArguments(e)[0];n.removeClasses(t,"exit"),n.addClass(t,"exit","done"),n.props.onExited&&n.props.onExited(e)},n.resolveArguments=function(e,t){return n.props.nodeRef?[n.props.nodeRef.current,e]:[e,t]},n.getClassNames=function(e){var t=n.props.classNames,r="string"==typeof t,i=r?(r&&t?t+"-":"")+e:t[e];return{baseClassName:i,activeClassName:r?i+"-active":t[e+"Active"],doneClassName:r?i+"-done":t[e+"Done"]}},n}(0,s.Z)(n,e);var t=n.prototype;return t.addClass=function(e,n,t){var r=this.getClassNames(n)[t+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===n&&"done"===t&&i&&(r+=" "+i),"active"===t&&e&&e.scrollTop,r&&(this.appliedClasses[n][t]=r,function(e,n){e&&n&&n.split(" ").forEach((function(n){return r=n,void((t=e).classList?t.classList.add(r):function(e,n){return e.classList?!!n&&e.classList.contains(n):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")}(t,r)||("string"==typeof t.className?t.className=t.className+" "+r:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+r)));var t,r}))}(e,r))},t.removeClasses=function(e,n){var t=this.appliedClasses[n],r=t.base,i=t.active,s=t.done;this.appliedClasses[n]={},r&&c(e,r),i&&c(e,i),s&&c(e,s)},t.render=function(){var e=this.props,n=(e.classNames,(0,i.Z)(e,["classNames"]));return o.createElement(l.ZP,(0,r.Z)({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(o.Component);d.defaultProps={classNames:""},d.propTypes={};const u=d}}]);
//# sourceMappingURL=741.bundle.js.map