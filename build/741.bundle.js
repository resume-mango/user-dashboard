"use strict";(self.webpackChunkuser_dashboard=self.webpackChunkuser_dashboard||[]).push([[741],{8741:(e,n,t)=>{t.r(n),t.d(n,{default:()=>vn});var r,i=t(7294),a=t(5977),s=t(9964),o=t(5438),l=t(6044),c=t(168),d=t(5861),u=t(885),m=t(7757),p=t.n(m),h=t(8767),f=t(9163),x=t(3360),g=t(3876),v=t(5893);const y=function(e){var n=e.templateName,t=(0,i.useState)(!1),r=(0,u.Z)(t,2),s=r[0],l=r[1],c=(0,a.k6)(),m=(0,h.useQueryClient)(),f=function(){var e=(0,d.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!1),e.next=3,(0,g.I3)(n,c,m);case 3:return e.sent||l(!0),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){f()}),[]),(0,v.jsx)(i.Fragment,{children:(0,v.jsx)("div",{className:"flex-center h-100",children:s?(0,v.jsxs)(j,{children:[(0,v.jsx)("h2",{children:"Failed to create coverletter."}),(0,v.jsx)(o.z,{btnType:"primary",size:"lg",onClick:function(){return f()},children:"Try Again"})]}):(0,v.jsx)(x.$j,{size:"2.5rem",type:"primary"})})})};var j=f.ZP.div(r||(r=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),b=t(4942),Z=t(2283),w=(t(2150),t(9245)),k=t(5337),S=t(8834),C=t(7561),_=C.Z_().required("first name is required").max(20,"Max 20 characters allowed").min(3,"Min 3 characters required"),P=C.Z_().required("last name is required").max(20,"Max 20 characters allowed").min(3,"Min 3 characters required"),E=C.Z_().email("email is invalid").required("email is required"),z=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,T=C.Z_().test("isValid","Invalid phone number",(function(e){return!e||z.test(e)&&e.length>=6&&e.length<=10})),D=C.Z_().max(50,"Max 50 characters allowed"),F=C.Z_().label("address").max(50,"Max 50 characters allowed"),O=C.Z_().max(50,"Max 50 characters allowed"),N=C.Z_().max(50,"Max 50 characters allowed"),R=C.Z_().test("test_length_greater_than_3000","Max 3000 characters allowed",(function(e){return!e||!(e.replaceAll("<br>","!!!!!!!!!!!!!!!").replace(/(<([^>]+)>)/gi,"").length>3e3)})),B=C.Ry().shape({first_name:_,last_name:P,email_address:E,phone_number:T,designation:D,address:F,company:O,hiring_manager:N,description:R}),L=t(5951);function V(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?V(Object(t),!0).forEach((function(n){(0,b.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var I={title:"",first_name:"",last_name:"",email_address:"",phone_number:"",designation:"",address:"",company:"",hiring_manager:"",description:""},M={data:q(q({},I),{},{id:null}),templateData:null,template:null,step:1,submitSuccess:!1,isSaving:!1,setStep:function(){},setTemplate:function(){},submitCoverletter:function(){},isTemplateReady:!1},H=i.createContext(M);const A=function(e){var n=e.initialData,t=e.templateName,r=e.children,a=(0,i.useState)(!1),s=(0,u.Z)(a,2),o=s[0],l=s[1],c=(0,i.useState)(!1),m=(0,u.Z)(c,2),f=m[0],x=m[1],y=(0,i.useState)("template1"),j=(0,u.Z)(y,2),b=j[0],C=j[1],_=(0,i.useState)(!1),P=(0,u.Z)(_,2),E=P[0],z=P[1],T=(0,i.useState)(!1),D=(0,u.Z)(T,2),F=D[0],O=D[1],N=(0,i.useState)(1),R=(0,u.Z)(N,2),V=R[0],M=R[1],A=(0,i.useState)(!1),G=(0,u.Z)(A,2),X=G[0],$=G[1],J=(0,w.d)().setNotify,U=(0,h.useQueryClient)(),Q=(0,Z.cI)({mode:"onChange",defaultValues:I,criteriaMode:"all",resolver:(0,S.X)(B)}),W=(0,k.xB)(b,E&&!!t),Y=W.data,K=W.isLoading,ee=(W.isError,Q.handleSubmit),ne=Q.watch,te=Q.reset,re=Q.trigger,ie=Q.setValue,ae=Q.formState,se=ae.isValid,oe=ae.isDirty;(0,i.useEffect)((function(){if(n){n.template&&C(n.template);var e=n.fields;if(e){var t={title:n.title||"Untitled",first_name:e.first_name||"",last_name:e.last_name||"",email_address:e.email_address||"",phone_number:e.phone_number||"",designation:e.designation||"",address:e.address||"",company:e.company||"",hiring_manager:e.hiring_manager||"",description:e.description||""};te(t,{keepDirty:!0,keepIsValid:!0,keepErrors:!0}),z(!0)}}}),[n]),(0,i.useEffect)((function(){l(!1)}),[b]);var le=function(){var e=(0,d.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.h)(Y.fonts);case 2:return e.abrupt("return",x(!0));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){if(E&&Y&&Y.fonts&&0!==Y.fonts)return x(!1),le(),function(){return x(!0)}}),[Y,E]),(0,i.useEffect)((function(){if(document&&E&&!o){var e=document.getElementById("css_style");e&&e.remove();var n=document.createElement("link");return n.id="css_style",n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","".concat("https://api.resumemango.com","/css/coverletters/").concat(b,".css")),n.onload=function(){l(!0)},n.onerror=function(){return console.log("stylesheet could not be loaded")},document.head.appendChild(n),function(){l(!0)}}}),[o,E]);var ce=ne(),de=!!ce.description.replace(/(<([^>]+)>)/gi,"").length;(0,i.useEffect)((function(){!de&&oe&&ie("description","")}),[ce.description]);var ue=function(){var e=(0,d.Z)(p().mark((function e(t,r){var i,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(){var e=(0,d.Z)(p().mark((function e(r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.T3)(b,t,n,r,ne,te,O,J,U);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r){e.next=5;break}if(re(),se){e.next=5;break}return e.abrupt("return",J({type:"warning",heading:"Invalid fields!",message:"Valid fields are required to proceed"}));case 5:if(!oe&&n.template===b){e.next=12;break}return $(!0),e.next=9,ee(i)();case 9:$(!1),e.next=17;break;case 12:return $(!0),a=ce.first_name,e.next=16,(0,g.dG)(a,n._id,t,J);case 16:$(!1);case 17:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,v.jsx)(H.Provider,{value:{data:q(q({},ce),{},{id:n?n._id:null}),isTemplateReady:o&&!K&&Y&&f&&E,templateData:Y,submitSuccess:F,setTemplate:C,template:b,submitCoverletter:ue,step:V,setStep:M,isSaving:X},children:(0,v.jsx)(Z.RV,q(q({},Q),{},{children:r}))})};var G,X,$=function(){var e=i.useContext(H);return{data:e.data,isTemplateReady:e.isTemplateReady,templateData:e.templateData,setTemplate:e.setTemplate,template:e.template,submitCoverletter:e.submitCoverletter,submitSuccess:e.submitSuccess,step:e.step,setStep:e.setStep,isSaving:e.isSaving}},J=t(2566),U=t(7723),Q=t(1757),W=t(5934),Y=t(2537);const K=function(){var e=$().data,n=(0,i.useState)(""),t=(0,u.Z)(n,2),r=t[0],a=t[1],s=(0,Z.Gc)().setValue;return(0,i.useEffect)((function(){a(e.title)}),[e.title]),(0,i.useEffect)((function(){var e=setTimeout((function(){s("title",r,{shouldDirty:!0})}),300);return function(){return clearTimeout(e)}}),[r]),(0,v.jsxs)(i.Fragment,{children:[(0,v.jsxs)(ne,{children:[(0,v.jsx)("input",{name:"title",placeholder:"Untitled",value:r,onChange:function(e){return function(e){e.target.value.length>30?a(e.target.value.substring(0,30)):a(e.target.value)}(e)},spellCheck:!1,autoComplete:"off"}),(0,v.jsx)("p",{id:"mask",children:r})]}),(0,v.jsx)("h2",{children:"Primary Details"}),(0,v.jsxs)(ee,{className:"mb-3",children:[(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"first_name",label:"First Name"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"last_name",label:"Last Name"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"email_address",label:"Email address"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"phone_number",label:"Phone number"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"designation",label:"Designation"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"address",label:"Address"})})]}),(0,v.jsx)("h2",{children:"Company Details"}),(0,v.jsxs)(ee,{className:"mb-3",children:[(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"company",label:"Company Name"})}),(0,v.jsx)("div",{children:(0,v.jsx)(Y.Z,{name:"hiring_manager",label:"Hiring manager name"})})]})]})};var ee=f.ZP.div(G||(G=(0,c.Z)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 1.5rem;\n"]))),ne=f.ZP.div(X||(X=(0,c.Z)(["\n  overflow: hidden;\n  max-width: 100%;\n  position: relative;\n  top: -20px;\n  margin: 1rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  input {\n    background-color: transparent;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0px;\n    top: 0px;\n    padding: 0px;\n    margin: 0px;\n    border: none;\n    font-size: 2rem;\n    text-align: center;\n    z-index: 1;\n    color: #555;\n  }\n  input:focus {\n    color: #343434;\n  }\n  input:hover ~ p:after,\n  input:focus ~ p:after {\n    background-color: ",";\n  }\n\n  p {\n    height: 100%;\n    position: relative;\n    width: fit-content;\n    font-size: 2rem;\n    text-align: center;\n    margin: 0;\n    color: transparent;\n    &:after {\n      content: '';\n      display: flex;\n      height: 2px;\n      z-index: 100;\n      bottom: -10px;\n      width: 100%;\n      background-color: transparent;\n    }\n  }\n"])),(function(e){return e.theme.colors.primary})),te=t(2201);const re=function(){var e=(0,Z.Gc)().formState.errors;return(0,v.jsx)(i.Fragment,{children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)("h2",{children:"Letter Details"}),(0,v.jsx)("p",{className:"mb-3",children:"3–4 paragraphs explaining why you're the perfect candidate for a specific job"}),(0,v.jsx)(te.Z,{name:"description"}),e.description&&(0,v.jsx)(W.dp,{style:{marginTop:"0.5rem"},children:e.description.message})]})})};var ie,ae,se,oe,le=t(5292);const ce=function(e){var n=e.step,t=e.setStep,r=e.max,a=(0,i.useState)(!1),l=(0,u.Z)(a,2),c=l[0],d=l[1],m=$(),p=m.submitCoverletter,h=m.submitSuccess,f=(0,s.S)().width>1300?"lg":"sm",g=(0,Z.Gc)().formState,y=g.isSubmitting,j=g.isDirty,b=g.isValid;return(0,i.useEffect)((function(){var e=setTimeout((function(){c&&(j&&p(null,2===n),d(!1))}),1e3);return function(){return clearTimeout(e)}}),[c]),(0,v.jsx)(i.Fragment,{children:(0,v.jsxs)(ge,{children:[1===n?(0,v.jsx)(K,{}):2===n?(0,v.jsx)(re,{}):null,(0,v.jsxs)(W.Mf,{children:[(0,v.jsx)(o.z,{type:"button",btnType:"ghost",size:f,color:"#343434",onClick:function(){return n>1&&t((function(e){return e-1}))},style:{marginRight:"1rem"},children:1===n?"Cancel":"Previous"}),(0,v.jsx)(o.z,{type:"button",btnType:"primary",size:f,onClick:function(){return n<r&&t((function(e){return e+1})),d(!0)},disabled:(y||!b||!j||c)&&2===n,children:2===n?"Save Changes":"Next"})]}),(0,v.jsx)(U.Z,{in:y&&b,timeout:{enter:200,exit:5e3},children:(0,v.jsx)(ve,{"data-test-id":"save-loader",children:y?(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(x.$j,{type:"primary",size:"1.5rem"}),(0,v.jsx)(ye,{color:"#f08438",children:"Saving"})]}):h?(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(Q.Z,{size:"1.5rem",color:"#f08438"}),(0,v.jsx)("p",{style:{color:"#f08438",margin:"0 0.7rem"},children:"Saved"})]}):(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(le.Z,{size:"1.5rem",color:"#f08438"}),(0,v.jsx)("p",{style:{color:"#f08438",margin:"0 0.7rem"},children:"Failed"})]})})})]})})};var de,ue,me,pe,he,fe,xe,ge=f.ZP.div(ie||(ie=(0,c.Z)(["\n  padding: 2.75rem;\n  max-width: 900px;\n  margin: auto;\n"]))),ve=f.ZP.div(ae||(ae=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: fit-content;\n  padding: 0 0.5rem;\n  height: 50px;\n  min-width: 50px;\n  transition: ease 300ms;\n  background-color: #fff;\n  border-radius: 1rem;\n  box-shadow: 4px 0px 20px 0px #ddd;\n  border: 1px solid #eee;\n  position: absolute;\n  left: 40px;\n  bottom: 40px;\n  opacity: 0;\n  visibility: hidden;\n\n  &.enter-done,\n  &.enter-active,\n  &.exit-active {\n    opacity: 1;\n    visibility: visible;\n  }\n  &.exit-done {\n    opacity: 0;\n    visibility: hidden;\n  }\n"]))),ye=f.ZP.p(oe||(oe=(0,c.Z)(["\n  display: inline-flex;\n  margin: 0 0.7rem;\n  color: ",";\n  &:after {\n    content: '.';\n    margin-left: 0.1rem;\n    animation: ","\n      1s steps(5, end) infinite;\n  }\n"])),(function(e){var n=e.theme;return e.color||n.colors.dark}),(function(e){var n=e.theme;return function(e){return(0,f.F4)(se||(se=(0,c.Z)(["\n   0%, 20% {\n    color: rgba(0,0,0,0);\n    text-shadow:\n      .25em 0 0 rgba(0,0,0,0),\n      .5em 0 0 rgba(0,0,0,0);}\n  40% {\n    color: ",";\n    text-shadow:\n      .25em 0 0 rgba(0,0,0,0),\n      .5em 0 0 rgba(0,0,0,0);}\n  60% {\n    text-shadow:\n      .25em 0 0 ",",\n      .5em 0 0 rgba(0,0,0,0);}\n  80%, 100% {\n    text-shadow:\n      .25em 0 0 ",",\n      .5em 0 0 ",";\n    }\n    \n"])),e,e,e,e)}(e.color||n.colors.dark)})),je=t(2136),be=t(7912),Ze=t(5970),we=t(2434),ke=t(8772),Se=t(3554);const Ce=function(e){var n=e.isDataLoading,t=(0,i.useRef)(null),r=(0,i.useState)(1),o=(0,u.Z)(r,2),l=o[0],c=o[1],d=(0,i.useState)(1),m=(0,u.Z)(d,2),p=m[0],h=m[1],f=(0,i.useState)(0),g=(0,u.Z)(f,2),y=g[0],j=g[1],b=(0,i.useState)(!1),w=(0,u.Z)(b,2),k=w[0],S=w[1],C=(0,i.useState)(!1),_=(0,u.Z)(C,2),P=_[0],E=_[1],z=(0,s.S)(),T=z.width,D=z.height,F=(0,a.k6)(),O=$(),N=O.data,R=O.templateData,B=O.isTemplateReady,L=O.submitCoverletter,V=O.isSaving,q=(0,Z.Gc)().formState,I=q.isSubmitting,M=q.isValid;(0,i.useEffect)((function(){V&&S(!1)}),[V]);var H=T>=1500?.6:T/1920,A=H>=.7?50*H:-60*H;(0,i.useEffect)((function(){var e=function(e,n){if(e&&e.current){var t=e.current.children[0];t.style.transform="scale(".concat(n,")"),e.current.style.width=t.getBoundingClientRect().width+"px",e.current.style.height=t.getBoundingClientRect().height+"px";var r=t.clientWidth*(n-1)/2,i=t.clientHeight*(n-1)/2;t.style.transform="translate3d(".concat(r,"px, ").concat(i,"px, 0px) scale(").concat(n,")");var a=document.createElement("div");a.className="dummybuff",a.style.height="50px",a.style.transform="scale(".concat(n,")"),a.style.visibility="hidden",a.style.position="absolute",a.style.opacity="0",document.body.appendChild(a);var s=a.getBoundingClientRect().height;return{dummyBufferEl:a,bufferHeight:s}}}(t,H);e&&(e.bufferHeight&&j(e.bufferHeight),e.dummyBufferEl&&document.body.removeChild(e.dummyBufferEl))}),[t.current,T,D]),(0,i.useEffect)((function(){if(N&&!I&&B&&0!==y){var e=setTimeout((function(){if(t&&t.current){var e=t.current.querySelector(".page");if(e){var n=e.children[0];if(n){var r=JSON.parse(JSON.stringify(R));n.innerHTML="";var i=(0,ke.Z)(r,N,n,y);i&&(G(Object.keys(i).length),P||E(!0))}}}}),500);return function(){return clearTimeout(e)}}}),[N,t,B,y]),(0,i.useEffect)((function(){if(t&&t.current){var e=t.current.querySelector(".page");if(e){var n=e.children[0];n&&(n.style.transform="translateY(-".concat(e.clientHeight*(p-1),"px)"),n.style.height=e.clientHeight*p+"px")}}}),[p,t.current]);var G=function(e){p>e&&h(e),c(e)},X=function(e){"prev"===e&&p>1&&p<=l&&h(p-1),"next"===e&&p>=1&&p<l&&h(p+1)};return(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(Re,{"data-test-id":"preview-skeleton",style:!n&&N&&B&&P?{visibility:"hidden"}:{visibility:"visible"},children:T?(0,v.jsx)(Se.Z,{style:{position:"absolute",marginTop:0,top:"".concat(A,"px")},scale:H}):null}),(0,v.jsxs)(ze,{children:[(0,v.jsx)(Fe,{ref:t,children:(0,v.jsx)("div",{className:"page",children:(0,v.jsx)("div",{style:{width:"100%"}})})}),(0,v.jsxs)(Te,{className:"template_footer ".concat(!n&&N&&B&&P?"":"invisible"),children:[(0,v.jsx)("div",{children:(0,v.jsxs)(Ne,{type:"button",btnType:"ghost",color:"#F08438",size:"lg",style:{justifyContent:"space-around"},disabled:I,onClick:function(){return F.push("/coverletters/preview/".concat(N.id))},children:[(0,v.jsx)(je.Z,{size:T<1300?"0.8rem":"1rem"}),"Change template"]})}),(0,v.jsxs)(De,{children:[(0,v.jsx)("button",{type:"button",style:{transform:"rotateZ(90deg)"},onClick:function(){return X("prev")},children:(0,v.jsx)(be.Z,{size:"0.75rem"})}),(0,v.jsxs)("p",{children:[p," / ",l]}),(0,v.jsx)("button",{type:"button",style:{transform:"rotateZ(270deg)"},onClick:function(){return X("next")},children:(0,v.jsx)(be.Z,{size:"0.75rem"})})]}),(0,v.jsx)("div",{children:(0,v.jsxs)(Oe,{vertical:"top",horizontal:"left",show:k,setShow:S,disabled:V||!M||I,children:[(0,v.jsx)(Ze.Z.Button,{children:(0,v.jsx)(i.Fragment,{children:V?(0,v.jsxs)(i.Fragment,{children:["Downloading ",(0,v.jsx)(x.$j,{size:"1rem"})]}):(0,v.jsxs)(i.Fragment,{children:["Download ",(0,v.jsx)(we.Z,{})," ",(0,v.jsx)(be.Z,{})]})})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return L("pdf")},children:"Download PDF"})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return L("docx")},children:"Export to DOCX"})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return L("txt")},children:"Export to TXT"})})]})})]})]})]})};var _e,Pe,Ee,ze=f.ZP.div(de||(de=(0,c.Z)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  margin: auto;\n"]))),Te=f.ZP.div(ue||(ue=(0,c.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 1.5rem;\n"]))),De=f.ZP.div(me||(me=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  p {\n    font-weight: 600;\n  }\n  button {\n    padding-left: 0.5rem;\n    padding-right: 0.5rem;\n    svg {\n      path {\n        stroke-width: 1.5;\n      }\n    }\n  }\n"]))),Fe=f.ZP.div(pe||(pe=(0,c.Z)(["\n  display: block;\n  position: relative;\n"]))),Oe=(0,f.ZP)(Ze.Z)(he||(he=(0,c.Z)(["\n  button {\n    background: rgba(240, 132, 56, 1);\n    color: #fff;\n    height: 40px;\n    width: 150px;\n    display: flex;\n    justify-content: space-around;\n    padding: 0 1rem;\n    border-radius: 6px;\n    @media (max-width: 1300px) {\n      height: 32px;\n      font-size: 0.75rem;\n      width: 120px;\n    }\n    svg {\n      path {\n        stroke: #fff;\n      }\n    }\n    &:disabled {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.theme.colors.grey})),Ne=(0,f.ZP)(o.z)(fe||(fe=(0,c.Z)(["\n  @media (max-width: 1300px) {\n    height: 32px;\n    font-size: 0.75rem;\n    width: 120px;\n  }\n"]))),Re=f.ZP.div(xe||(xe=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: auto;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  background: #f7f9fc;\n"]))),Be=t(1239),Le=t(732),Ve=t(6527);const qe=function(e){var n=e.isLoading,t=$(),r=t.data,a=t.step,s=t.setStep,o=(0,Ve.Z)(!1),l=o.showExitPrompt,c=o.setShowExitPrompt,d=(0,Z.Gc)().formState,u=d.errors,m=d.isDirty,p=d.isValid,h=d.isSubmitting,f=!!(u.first_name||u.last_name||u.phone_number||u.email_address||u.address||u.designation||u.company||u.hiring_manager),x=!!u.description,g=!(!(r.first_name&&r.last_name&&r.email_address)||f),y=!x;(0,i.useEffect)((function(){return function(){c(!1)}}),[]),(0,i.useEffect)((function(){c(!(!m&&p&&!h))}),[m,h,p]);var j=r&&r.id?["/coverletters/preview/".concat(r.id)]:[];return(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(Le.Z,{show:l,setShow:c,exludedPaths:j}),(0,v.jsxs)(Ke,{children:[(0,v.jsxs)(J.Z,{max:2,current:a,backRoute:"/coverletters",children:[(0,v.jsx)(J.Z.Step,{name:"Personal Info",isValid:g,isError:f,onClick:function(){return s(1)}}),(0,v.jsx)(J.Z.Step,{name:"Letter Body",isValid:y,isError:x,onClick:function(){return s(2)}})]}),(0,v.jsxs)("form",{id:"coverLetterForm",style:{overflow:"hidden"},children:[(0,v.jsx)(en,{children:n||!r?(0,v.jsx)(Be.Z,{}):(0,v.jsx)(ce,{step:a,setStep:s,max:2})}),(0,v.jsx)(nn,{children:(0,v.jsx)(Ce,{isDataLoading:n})})]})]})]})};var Ie,Me,He,Ae,Ge,Xe,$e,Je,Ue,Qe,We,Ye,Ke=f.ZP.div(_e||(_e=(0,c.Z)(["\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding-top: 7rem;\n"]))),en=f.ZP.div(Pe||(Pe=(0,c.Z)(["\n  height: 100%;\n  width: 50%;\n  margin-right: 50%;\n  overflow-y: scroll;\n  &::-webkit-scrollbar {\n    width: 0;\n  }\n"]))),nn=f.ZP.div(Ee||(Ee=(0,c.Z)(["\n  background-color: #f7f9fc;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  height: 100%;\n  position: fixed;\n  width: 50%;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  overflow-y: scroll;\n  padding-top: 7rem;\n  @media (max-width: 1500px) {\n    padding-bottom: 2rem;\n    padding-top: 9rem;\n  }\n"]))),tn=t(9029);const rn=function(e){var n=e.isLoading,t=(0,i.useState)(!1),r=(0,u.Z)(t,2),l=r[0],c=r[1],d=(0,i.useState)(!1),m=(0,u.Z)(d,2),p=m[0],h=m[1],f=(0,i.useState)(1),g=(0,u.Z)(f,2),y=g[0],j=g[1],b=(0,i.useState)(1),w=(0,u.Z)(b,2),S=w[0],C=w[1],_=(0,i.useState)(0),P=(0,u.Z)(_,2),E=P[0],z=P[1],T=(0,s.S)(),D=T.width,F=T.height,O=(0,a.k6)(),N=$(),R=N.data,B=N.isTemplateReady,L=N.template,V=N.templateData,q=N.setTemplate,I=N.submitCoverletter,M=N.isSaving,H=(0,k.Kj)(),A=H.data,G=H.isLoading,X=H.isError,J=(0,i.useRef)(null),U=(0,Z.Gc)().formState.isValid,Q=D>=1920?1.15:D<=1080?1.4*D/1920:1.15*D/1920;(0,i.useEffect)((function(){if(J&&J.current&&V){var e=J.current.children[0];e.style.transform="scale(".concat(Q,")"),J.current.style.width=e.getBoundingClientRect().width+"px",J.current.style.height=e.getBoundingClientRect().height+"px";var n=e.clientWidth*(Q-1)/2,t=e.clientHeight*(Q-1)/2;e.style.transform="translate3d(".concat(n,"px, ").concat(t,"px, 0px) scale(").concat(Q,")");var r=document.createElement("div");r.style.height="50px",r.style.transform="scale(".concat(Q,")"),r.style.visibility="hidden",r.style.position="absolute",r.style.opacity="0",document.body.appendChild(r);var i=r.getBoundingClientRect().height;z(i),document.body.removeChild(r)}}),[R,J,V,A,D,F]),(0,i.useEffect)((function(){if(R&&A&&!M&&!G&&B&&0!==E){h(!0);var e=setTimeout((function(){if(J&&J.current){var e=document.querySelector(".rhs_wrapper");e&&e.scrollTo(0,0);var n=J.current.querySelector(".page");if(n){var t=n.children[0];if(t){var r=JSON.parse(JSON.stringify(V));t.innerHTML="";var i=(0,ke.Z)(r,R,t,E);i&&(W(Object.keys(i).length),C(1),h(!1))}}}}),500);return function(){return clearTimeout(e)}}}),[R,J,G,A,B,M,E]),(0,i.useEffect)((function(){if(J&&J.current){var e=J.current.querySelector(".page");if(e){var n=e.children[0];n&&(n.style.transform="translateY(-".concat(e.clientHeight*(S-1),"px)"),n.style.height=e.clientHeight*S+"px")}}}),[S,J.current]),(0,i.useEffect)((function(){M&&c(!1)}),[M]);var W=function(e){S>e&&C(e),j(e)},Y=function(e){"prev"===e&&S>1&&S<=y&&C(S-1),"next"===e&&S>=1&&S<y&&C(S+1)};return(0,v.jsxs)(i.Fragment,{children:[(0,v.jsxs)(un,{children:[(0,v.jsx)(o.z,{btnType:"ghost",size:"lg",onClick:function(){return O.push("/coverletters/edit/".concat(R.id))},children:"Back to Editor"}),(0,v.jsx)("div",{children:!X&&!G&&(0,v.jsxs)(hn,{vertical:"bottom",horizontal:"left",show:l,setShow:c,disabled:M||!U,children:[(0,v.jsx)(Ze.Z.Button,{children:(0,v.jsx)(i.Fragment,{children:M?(0,v.jsxs)(i.Fragment,{children:["Downloading ",(0,v.jsx)(x.$j,{size:"1rem"})]}):(0,v.jsxs)(i.Fragment,{children:["Download ",(0,v.jsx)(tn.Z,{})]})})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return I("pdf")},children:"Download PDF"})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return I("docx")},children:"Export to DOCX"})}),(0,v.jsx)(Ze.Z.Item,{children:(0,v.jsx)("a",{onClick:function(){return I("txt")},children:"Export to TXT"})})]})})]}),X?(0,v.jsx)("div",{className:"align-center",style:{height:"40vh"},children:(0,v.jsx)("h3",{children:"Failed to load design!"})}):(0,v.jsxs)(an,{children:[(0,v.jsx)(on,{children:(0,v.jsx)(mn,{"data-test-id":"coverletter-templates",children:A&&A.map((function(e,n){return(0,v.jsxs)(pn,{active:L===e.name,"data-test-id":L===e.name?"active-template":"inactive-template",children:[(0,v.jsx)("div",{onClick:function(){return n=e.name,void(M||q(n));var n},children:(0,v.jsx)("img",{src:e.thumbnail,alt:""})}),(0,v.jsx)("p",{children:e.name})]},n)}))})}),(0,v.jsx)(ln,{children:(0,v.jsxs)(cn,{className:"rhs_wrapper",children:[(0,v.jsxs)(dn,{children:[(0,v.jsx)("button",{type:"button",style:{transform:"rotateZ(90deg)"},onClick:function(){return Y("prev")},children:(0,v.jsx)(be.Z,{size:"0.75rem",color:"#fff"})}),(0,v.jsxs)("p",{children:[S," / ",y]}),(0,v.jsx)("button",{type:"button",style:{transform:"rotateZ(270deg)"},onClick:function(){return Y("next")},children:(0,v.jsx)(be.Z,{size:"0.75rem",color:"#fff"})})]}),(0,v.jsxs)(fn,{children:[(!B||n||!R||p||G)&&(0,v.jsx)(sn,{"data-test-id":"coverletter-skeleton",children:(0,v.jsx)(Se.Z,{scale:Q})}),(0,v.jsx)(xn,{ref:J,style:!B||n||!R||p||G?{visibility:"hidden"}:{visibility:"visible"},children:(0,v.jsx)("div",{className:"page",children:(0,v.jsx)("div",{style:{width:"100%"}})})})]})]})})]})]})};var an=f.ZP.div(Ie||(Ie=(0,c.Z)(["\n  background-color: #fff;\n  display: grid;\n  grid-template-columns: minmax(400px, 500px) auto;\n  height: 100%;\n  @media (max-width: 1080px) {\n    grid-template-columns: 30% 70%;\n  }\n"]))),sn=f.ZP.div(Me||(Me=(0,c.Z)(["\n  position: absolute;\n  z-index: 1;\n"]))),on=f.ZP.div(He||(He=(0,c.Z)(["\n  height: 100%;\n  max-height: 100vh;\n  padding: 7rem 2rem 3rem;\n  overflow-y: auto;\n  @media (max-width: 1080px) {\n    padding: 7rem 0 3rem;\n  }\n"]))),ln=f.ZP.div(Ae||(Ae=(0,c.Z)(["\n  background-color: #f7f9fc;\n  user-select: none;\n  max-height: 100vh;\n  overflow: hidden;\n  position: relative;\n"]))),cn=f.ZP.div(Ge||(Ge=(0,c.Z)(["\n  display: flex;\n  padding: 7rem 2rem 3rem;\n  height: 100%;\n  width: 100%;\n  margin: 0 auto;\n  overflow: scroll;\n"]))),dn=f.ZP.div(Xe||(Xe=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  max-width: 100px;\n  bottom: 10%;\n  z-index: 10;\n  height: 35px;\n  border-radius: 6px;\n  background-color: ",";\n  p {\n    font-weight: 600;\n  }\n  button {\n    padding-left: 0.7rem;\n    padding-right: 0.7rem;\n    svg {\n      path {\n        stroke-width: 1.5;\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.primary})),un=f.ZP.div($e||($e=(0,c.Z)(["\n  display: flex;\n  padding: 1rem 3rem;\n  justify-content: space-between;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  border-bottom: 2px solid #eee;\n  background-color: #fff;\n  z-index: 100;\n"]))),mn=f.ZP.div(Je||(Je=(0,c.Z)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 1rem;\n  padding: 0 2rem;\n  max-width: 450px;\n  margin: auto;\n  @media (max-width: 1080px) {\n    grid-template-columns: repeat(1, 1fr);\n  }\n"]))),pn=f.ZP.div(Ue||(Ue=(0,c.Z)(["\n  div {\n    display: flex;\n    width: 100%;\n    min-height: 250px;\n    background-color: #f7f7f7;\n    outline-style: solid;\n    outline-color: #eee;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all ease-in-out 150ms;\n    overflow: hidden;\n    /* box-shadow: 5px 5px 10px 0px #00000012; */\n    outline-width: ",";\n    outline-color: ",";\n    img {\n      width: 100%;\n    }\n  }\n  p {\n    font-size: 1rem;\n    color: ",";\n    font-weight: 600;\n    text-align: center;\n    text-transform: capitalize;\n    transition: all ease-in-out 150ms;\n  }\n  &:hover {\n    div {\n      outline-width: 5px;\n      outline-color: ",";\n    }\n    p {\n      color: ",";\n    }\n  }\n"])),(function(e){return e.active?"2px":"1px"}),(function(e){var n=e.theme;return e.active&&n.shades.primary[2]}),(function(e){var n=e.theme;return e.active&&n.colors.primary}),(function(e){return e.theme.shades.primary[2]}),(function(e){return e.theme.colors.primary})),hn=(0,f.ZP)(Ze.Z)(Qe||(Qe=(0,c.Z)(["\n  button {\n    background: rgba(240, 132, 56, 1);\n    color: #fff;\n    height: 40px;\n    width: 150px;\n    display: flex;\n    justify-content: space-around;\n    padding: 0 1rem;\n    border-radius: 6px;\n    svg {\n      path {\n        stroke: #fff;\n      }\n    }\n    &:disabled {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.theme.colors.grey})),fn=f.ZP.div(We||(We=(0,c.Z)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  margin: auto;\n"]))),xn=f.ZP.div(Ye||(Ye=(0,c.Z)(["\n  display: block;\n  position: relative;\n  box-shadow: 0px 0px 15px 0px #0000000f;\n  border: 1px solid #eee;\n  border-radius: 10px;\n  overflow: hidden;\n"])));const gn=function(e){var n=e.type,t=e.id,r=e.width,a=(0,k.V5)(t,r>768),s=a.data,o=a.isError,l=a.isLoading;return(0,v.jsx)(i.Fragment,{children:o?(0,v.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,v.jsx)("h3",{children:"Failed to load design!"})}):(0,v.jsx)(A,{initialData:s,templateName:"template1",children:"preview"===n?(0,v.jsx)(rn,{isLoading:l}):"edit"===n?(0,v.jsx)(qe,{isLoading:l}):null})})},vn=function(){var e=(0,a.UO)(),n=e.id,t=e.type,r=(0,s.S)().width,c=(0,a.k6)();return(0,v.jsx)(i.Fragment,{children:r<768&&0!==r?(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"90%"},children:[(0,v.jsx)("h3",{style:{textAlign:"center"},children:"Builder not available, Please visit desktop site..."}),(0,v.jsx)(o.z,{btnType:"primary",size:"lg",style:{width:"fit-content",padding:"0 1rem",marginTop:"1rem"},onClick:function(){return c.push("/")},children:"Back to Dashboard"})]}):r>=768?(0,v.jsx)(i.Fragment,{children:"new"===t?(0,v.jsx)(y,{templateName:n}):-1!==["edit","preview"].indexOf(t)?(0,v.jsx)(gn,{type:t,id:n,width:r}):(0,v.jsx)(l.default,{})}):null})}}}]);
//# sourceMappingURL=741.bundle.js.map