"use strict";(self.webpackChunkuser_dashboard=self.webpackChunkuser_dashboard||[]).push([[680],{5661:(e,r,t)=>{t.d(r,{h7:()=>l,wX:()=>d,wS:()=>f,M7:()=>v});var n,a=t(1002),u=t(5861),c=t(7757),o=t.n(c),s=t(9669),i=t.n(s),p=t(3137),l=function(){var e=(0,u.Z)(o().mark((function e(r,t){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",url:"/coverletter/download/".concat(r,"/").concat(t),responseType:"blob"},e.prev=1,e.next=4,i().request(a);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n=null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r,t){return e.apply(this,arguments)}}(),d=function(){var e=(0,u.Z)(o().mark((function e(r){var t,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",url:"/coverletter",data:{template:r}},e.prev=1,e.next=4,(0,p.Z)(a);case 4:return u=e.sent,t=u.data,n=u.error,e.abrupt("return",{data:t,error:n});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{data:void 0,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}(),f=function(){var e=(0,u.Z)(o().mark((function e(r){var t,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"!==(0,a.Z)(n)&&n.cancel("Cancelling previous requests"),n=i().CancelToken.source(),t={method:"PATCH",url:"/coverletter",cancelToken:n.token,data:r},e.next=5,i().request(t).then((function(e){return{data:e.data,error:void 0}})).catch((function(e){return{data:void 0,error:e}}));case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),v=function(){var e=(0,u.Z)(o().mark((function e(r){var t,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"DELETE",url:"/coverletter/".concat(r)},e.prev=1,e.next=4,(0,p.Z)(a);case 4:return u=e.sent,t=u.data,n=u.error,e.abrupt("return",{data:t,error:n});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{data:void 0,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}()},3876:(e,r,t)=>{t.d(r,{I3:()=>d,B9:()=>f,dG:()=>v,T3:()=>b});var n=t(4942),a=t(5861),u=t(7757),c=t.n(u),o=t(9669),s=t.n(o),i=t(5661);function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var d=function(){var e=(0,a.Z)(c().mark((function e(r,t,n){var a,u,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.wX)(r);case 2:if(a=e.sent,u=a.data,o=a.error,!u||o){e.next=11;break}return n.setQueryData(["coverletter",u._id],u),t.replace("/coverletters/edit/".concat(u._id)),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a,u,o,s){var p,l,d,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(null),!n){e.next=3;break}return e.abrupt("return");case 3:return a(r),e.prev=4,e.next=7,(0,i.M7)(r);case 7:if(p=e.sent,l=p.data,d=p.error,!l||d){e.next=15;break}f=t.filter((function(e){return e._id!==r})),s.setQueryData("coverletters",f),e.next=16;break;case 15:throw new Error("Failed to delete coverletter");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),o({type:"danger",heading:"Err!",message:"Failed to delete coverletter"});case 21:return e.abrupt("return",a(null));case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(r,t,n,a,u,c,o){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a){var u,o,s,p,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.h7)(t,n);case 2:if((u=e.sent)&&u.data){e.next=6;break}return a({type:"danger",heading:"Err!",message:"Failed to donwload design"}),e.abrupt("return");case 6:return o=r?r.replaceAll(/\s/g,"-"):"untitled-coverletter",s=o+"."+n,p=window.URL.createObjectURL(new Blob([u.data])),(l=document.createElement("a")).href=p,l.setAttribute("download",s),document.body.appendChild(l),l.click(),document.body.removeChild(l),e.abrupt("return",window.URL.revokeObjectURL(p));case 16:case"end":return e.stop()}}),e)})));return function(r,t,n,a){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(c().mark((function e(r,t,n,a,u,o,p,d,f){var b,h,w,k,x,y,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=!1,e.prev=1,p(!1),a){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,i.wS)(l({title:a.title,template:r,id:n._id},a));case 7:if(h=e.sent,w=h.data,k=h.error,!w||k){e.next=23;break}if(!t){e.next=15;break}return x=w.title?w.title:"",e.next=15,v(x,n._id,t,d);case 15:(y=f.getQueryData("coverletters"))&&((m=y.findIndex((function(e){return e._id===w._id})))>=0?y.splice(m,1,w):y.unshift(w),f.setQueryData("coverletters",y)),w.fields=u(),f.setQueryData(["coverletter",w._id],w),p(!0),o({},{keepDirty:!1,keepValues:!0,keepIsValid:!0,keepErrors:!0}),e.next=28;break;case 23:if(!s().isCancel(k)){e.next=27;break}p(!0),e.next=28;break;case 27:throw new Error("Failed to update design");case 28:b=!0,e.next=34;break;case 31:e.prev=31,e.t0=e.catch(1),d({type:"danger",heading:"Err!",message:"Failed to update design"});case 34:return e.abrupt("return",b);case 35:case"end":return e.stop()}}),e,null,[[1,31]])})));return function(r,t,n,a,u,c,o,s,i){return e.apply(this,arguments)}}()},5337:(e,r,t)=>{t.d(r,{Kj:()=>p,F:()=>l,xB:()=>d,V5:()=>f});var n=t(5861),a=t(7757),u=t.n(a),c=t(9669),o=t.n(c),s=t(704),i=t(3106),p=function(){return(0,s.Z)("CoverLetterTemplates","/templates/coverletter")},l=function(){var e=function(){var e=(0,n.Z)(u().mark((function e(){var r,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("/coverletter");case 2:return r=e.sent,t=r.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.Z)("coverletters",(function(){return e()}))},d=function(e,r){var t=function(){var e=(0,n.Z)(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("/templates/coverletter/".concat(r));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,i.Z)(["CoverLetterTemplates",e],(function(){return t(e)}),r)},f=function(e,r){var t=function(){var e=(0,n.Z)(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("/coverletter/".concat(r));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,i.Z)(["coverletter",e],(function(){return t(e)}),r)}}}]);
//# sourceMappingURL=680.bundle.js.map